"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[4887],{84887:(E,P,d)=>{d.r(P),d.d(P,{ReportsModule:()=>Ur});var u=d(69808),C=d(99826),p=d(93075),c=d(80574),A=d(94813),y=d(78372),R=d(71884),l=d(63900),_=d(60515),m=d(37623),e=d(5e3),v=d(66082),K=d(92340),W=d(40520);const $=K.N.apiBaseLink+"/api/report/";let j=(()=>{class o{constructor(t){this.httpClient=t}getInvoiceCountByProductId(t,r,n){return this.httpClient.post($+"get-invoice-count-by-product-id",{id:t,startDate:r,endDate:n})}getInvoiceCountBySku(t,r,n){return this.httpClient.post($+"get-invoice-count-by-sku",{sku:t,startDate:r,endDate:n})}getOrderCountByProductId(t,r,n){return this.httpClient.post($+"get-order-count-by-product-id",{id:t,startDate:r,endDate:n})}getOrderCountBySku(t,r,n){return this.httpClient.post($+"get-order-count-by-sku",{sku:t,startDate:r,endDate:n})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(W.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var w=d(61293),q=d(57267),Q=d(13787),U=d(28422),B=d(93377),k=d(17744),Z=d(11047),I=d(76042),N=d(82683),Y=d(92643),x=d(64219),F=d(63677),S=d(92905),h=d(50939),T=d(41894),O=d(77484),b=d(14012),z=d(16186);let J=(()=>{class o{transform(t,r){let n;const i=["K","M","B","T","P","E"],s=t<0;return Number.isNaN(t)||t<1e3&&t>=0||!this.isNumeric(t)||t<0&&t>-1e3?!r||!this.isNumeric(t)||t<0||0==t?t:t.toFixed(r):s?(t*=-1,n=Math.floor(Math.log(t)/Math.log(1e3)),(-1*t/Math.pow(1e3,n)).toFixed(r)+i[n-1]):(n=Math.floor(Math.log(t)/Math.log(1e3)),(t/Math.pow(1e3,n)).toFixed(r)+i[n-1])}isNumeric(t){return t<0&&(t*=-1),!!/^-{0,1}\d+$/.test(t)||!!/^\d+\.\d+$/.test(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"numberSuffix",type:o,pure:!0}),o})();const ee=["searchInput"],te=["searchForm"];function re(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onCategorySelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function ne(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onVendorSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onCountrySelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function ie(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSalesChanelSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function ae(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onBrandSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function se(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearDateFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.dateRangeFilter?t.dateRangeFilter:t.dateRangeCalFilter," ")}}function le(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearCategoryFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.categoryFilter," ")}}function ce(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearSalesChanelFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.salesChanelFilter," ")}}function de(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearVendorFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.vendorFilter," ")}}function pe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearOriginFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.originFilter," ")}}function he(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearBrandFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.brandFilter," ")}}function ue(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearAllFilters())}),e._uU(1," Clear All "),e.qZA()}}function _e(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"slice"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA()()),2&o){const t=a.$implicit,r=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.hij("",r.name.length>10?e.Dn7(3,9,r.name,0,10)+"...":n.str," "),e.xp6(3),e.Oqu(t.variantSku),e.xp6(2),e.hij(" ",t.variantQuantity+t.variantCommittedQuantity," "),e.xp6(2),e.hij(" ",t.variantCommittedQuantity?t.variantCommittedQuantity:0," "),e.xp6(2),e.hij(" ",t.variantQuantity?t.variantQuantity:0," "),e.xp6(2),e.hij(" ",t.variantCostPrice?t.variantCostPrice:0," "),e.xp6(2),e.hij(" ",(t.variantQuantity+t.variantCommittedQuantity)*t.variantCostPrice," "),e.xp6(2),e.hij(" ",t.variantCommittedQuantity*t.variantCostPrice," "),e.xp6(2),e.hij(" ",t.variantQuantity*t.variantCostPrice," ")}}function ge(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",53),e.NdJ("nzExpandChange",function(n){const s=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.onExpandChange(s._id,n))}),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"slice"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA()(),e.TgZ(22,"tr",54)(23,"nz-table",55)(24,"thead")(25,"tr")(26,"th"),e._uU(27,"Item Name"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"SKU"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Stock in hand"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Commited"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Available on Hand"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Cost Price"),e.qZA(),e.TgZ(38,"th"),e._uU(39,"Stock in hand value"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"Commited value"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Available Value"),e.qZA()()(),e.TgZ(44,"tbody"),e.YNc(45,_e,20,13,"tr",47),e.qZA()()(),e.BQk()}if(2&o){const t=a.$implicit,r=e.oxw();e.xp6(2),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(2),e.hij("",t.name.length>10?e.Dn7(5,14,t.name,0,10)+"...":r.str," "),e.xp6(3),e.Oqu(t.sku),e.xp6(2),e.hij(" ",t.quantity+t.committedQuantity," "),e.xp6(2),e.hij(" ",t.committedQuantity?t.committedQuantity:0," "),e.xp6(2),e.hij(" ",t.quantity?t.quantity:0," "),e.xp6(2),e.hij(" ",t.costPrice?t.costPrice:0," "),e.xp6(2),e.hij(" ",(t.quantity+t.committedQuantity)*t.costPrice," "),e.xp6(2),e.hij(" ",t.committedQuantity*t.costPrice," "),e.xp6(2),e.hij(" ",t.quantity*t.costPrice," "),e.xp6(1),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(1),e.Q6J("nzData",t.variantFormArray)("nzShowPagination",!1),e.xp6(22),e.Q6J("ngForOf",t.variantFormArray)}}function me(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"nz-card",31)(1,"canvas",56),e.NdJ("chartHover",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartHovered(n))})("chartClick",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartClicked(n))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("data",t.barChartData)}}function Ce(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",t.products.length," Items")}}const fe=function(){return{boxShadow:"none"}};let ye=(()=>{class o{constructor(t,r,n,i,s,g,f,D){this.productService=t,this.reportService=r,this.reloadService=n,this.utilsService=i,this.countryService=s,this.vendorService=g,this.productTypeService=f,this.brandService=D,this.filter=null,this.barChartLabels=[],this.invoicedData=[],this.returnedData=[],this.invoicedDataForCompare=[],this.returnedDataForCompare=[],this.barChartData={labels:this.barChartLabels,datasets:[{data:this.invoicedData,label:"Invoice "},{data:this.returnedData,label:"Return"}]},this.chooseDate=new Date,this.rangeDate=null,this.chartType="line",this.products=[],this.countries=[],this.brands=[],this.vendors=[],this.productTypes=[],this.chartDataLoading=!0,this.salesChanelOptions=["Website","App","Self"],this.clearAllFilter=!1,this.today=new Date,this.dataFormDateRange=new p.cw({start:new p.NI,end:new p.NI}),this.filterDate=new Date,this.isFocused=!1,this.searchProducts=[],this.isOpen=!1,this.isLoading=!1,this.overlay=!1,this.currentPage=1,this.productsPerPage=10,this.searchQuery=null,this.holdPrevData=[],this.expandSet=new Set,this.disabledDate=M=>(0,m.Z)(M,this.today)>0}ngOnInit(){this.reloadService.refreshProduct$.subscribe(t=>{this.getAllProducts()}),this.getAllProducts(),this.getAllCountries(),this.getAllVendors(),this.getAllProductTypes(),this.getAllBrands()}getAllCountries(){this.countryService.getAll().subscribe(t=>{this.countries=t.data})}getAllVendors(){this.vendorService.getAll().subscribe(t=>{this.vendors=t.data})}getAllProductTypes(){this.productTypeService.getAll().subscribe(t=>{this.productTypes=t.data})}getAllBrands(){this.brandService.getAll().subscribe(t=>{this.brands=t.data})}getAllProducts(){this.chartDataLoading=!0,this.productService.getAllProducts(null,this.filter,null).subscribe(t=>{this.products=t.data,this.holdPrevData=t.data,this.totalProducts=t.count})}onCountrySelect(t){this.originFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{country:t._id}),this.reloadService.needRefreshProduct$()}onVendorSelect(t){this.vendorFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{vendor:t._id}),this.reloadService.needRefreshProduct$()}onCategorySelect(t){this.categoryFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{productType:t._id}),this.reloadService.needRefreshProduct$()}onBrandSelect(t){this.brandFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{brand:t._id}),this.reloadService.needRefreshProduct$()}onSalesChanelSelect(t){this.salesChanelFilter=t,this.reloadService.needRefreshProduct$()}onClickSearchArea(t){t.stopPropagation()}handleFocus(t){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchProducts.length>0&&this.setPanelState(t),this.isFocused=!0)}setPanelState(t){t&&t.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0)}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,A.j)("searchTerm"),(0,y.b)(200),(0,R.x)(),(0,l.w)(r=>{const n={currentPage:this.currentPage.toString(),pageSize:this.productsPerPage.toString()};return this.searchQuery=r.trim(),console.log(this.searchQuery),this.searchQuery?this.productService.getSearchProduct(this.searchQuery,n,this.filter):(this.searchProducts=[],this.products=this.holdPrevData,this.searchProducts=[],this.searchQuery=null,_.E)})).subscribe(r=>{this.isLoading=!1,this.searchProducts=r.data,this.products=r.data,this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0,this.reloadService.needRefreshSalesByItemReport$())},()=>{this.isLoading=!1})}chartClicked({event:t,active:r}){console.log(t,r)}chartHovered({}){}exportToExcel(){const t=this.utilsService.getDateString(new Date),r=c.P6.json_to_sheet(this.products),n=c.P6.book_new();c.P6.book_append_sheet(n,r,"Sales"),c.NC(n,`Products_${t}.xlsx`)}onExpandChange(t,r){r?this.expandSet.add(t):this.expandSet.delete(t)}getAvailable(){let t=0;for(let r=0;r<this.products.length;r++)t+=this.products[r].quantity*this.products[r].costPrice;return t||0}getCommitted(){let t=0;for(let r=0;r<this.products.length;r++)t+=this.products[r].committedQuantity*this.products[r].costPrice;return t||0}clearSalesChanelFilter(){this.salesChanelFilter=null,this.reloadService.needRefreshProduct$()}clearCategoryFilter(){var t;null===(t=this.filter)||void 0===t||delete t.productType,this.categoryFilter=null,this.reloadService.needRefreshProduct$()}clearVendorFilter(){var t;null===(t=this.filter)||void 0===t||delete t.vendor,this.vendorFilter=null,this.reloadService.needRefreshProduct$()}clearOriginFilter(){var t;null===(t=this.filter)||void 0===t||delete t.country,this.originFilter=null,this.reloadService.needRefreshProduct$()}clearBrandFilter(){var t;null===(t=this.filter)||void 0===t||delete t.brand,this.brandFilter=null,this.reloadService.needRefreshProduct$()}clearDateFilter(){this.dateRangeFilter=null,this.dateRangeCalFilter=null,delete this.filter.createdAt,this.reloadService.needRefreshProduct$()}clearAllFilters(){this.categoryFilter=null,this.vendorFilter=null,this.originFilter=null,this.brandFilter=null,this.filter=null,this.dateRangeFilter=null,this.dateRangeCalFilter&&(this.dateRangeCalFilter=null),this.clearAllFilter=!1,this.reloadService.needRefreshProduct$()}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.filter=Object.assign(Object.assign({},this.filter),{createdAt:{$gte:this.startDate,$lt:this.today}}),this.reloadService.needRefreshProduct$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshProduct$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshProduct$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshProduct$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshProduct$()}lastMonthFilter(){const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=t,this.endDate=r,this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshProduct$()}lastYearFilter(){const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDate=r,this.endDate=n,this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshProduct$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshProduct$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshProduct$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshProduct$()}onDateChange(t,r,n,i){const s=this.utilsService.getDateString(t,"DD MMM-YYYY"),g=this.utilsService.getDateString(r,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilter=i):(this.dateRangeFilter=null,this.dateRangeCalFilter=s+" - "+g),this.filter=Object.assign(Object.assign({},this.filter),r?{createdAt:{$gte:t,$lte:r}}:{createdAt:{$eq:t}}),this.reloadService.needRefreshProduct$()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.M),e.Y36(j),e.Y36(w.f),e.Y36(q.F),e.Y36(Q.T),e.Y36(U.n),e.Y36(B.c),e.Y36(k.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-inventory-report"]],viewQuery:function(t,r){if(1&t&&(e.Gf(ee,5),e.Gf(te,5)),2&t){let n;e.iGM(n=e.CRH())&&(r.searchInput=n.first),e.iGM(n=e.CRH())&&(r.searchForm=n.first)}},decls:165,vars:39,consts:[["nz-row","","nzGutter","16",1,"header_title"],["nz-col","","nzXs","12",1,"mb15"],[1,"report_export"],["nzCompact",""],["nz-button","","nzType","default","printTitle","Sales By Item","printSectionId","inv_print","ngxPrint","",3,"useExistingCss"],[1,"las","la-lg","la-print"],["nz-button","","nzType","default",3,"click"],[1,"las","la-lg","la-file-export"],["id","inv_print","nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzMd","24","nzXXl","8",1,"mb15"],["nz-row","","nzGutter","8"],["nz-col","","nzXs","6","nzMd","12","nzXXl","12",1,"mb15"],["nz-col","","nzXs","24","nzMd","24","nzXXl","16",1,"mb15"],["nzGutter","0"],["nz-col","","nzXs","24","nzMd","24",1,"mb15"],["nzSize","small","nzTitle","Inventory Report",3,"nzExtra"],["nz-row","","nzGutter","16"],[1,"filter_atea"],[3,"click"],["searchForm","ngForm"],["nz-input","","id","searchInput","type","text","placeholder","Search here...","name","searchTerm","autocomplete","off","ngModel","","required","",3,"focus"],["searchInput",""],[1,"date_filter"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-calendar"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzSize","small"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","nzDisabledDate","ngModelChange"],["nz-button","","nzType","primary"],[1,"las","la-angle-down"],["productTypeMenu","nzDropdownMenu"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["vendorMenu","nzDropdownMenu"],["countryMenu","nzDropdownMenu"],["statusMenu","nzDropdownMenu"],["brandMenu","nzDropdownMenu"],["nz-col","","nzXs","24","nzMd","24","nzXXl","16",1,"entry_query_filter"],[4,"ngIf"],[3,"click",4,"ngIf"],["nzSize","small","nzTableLayout","fixed",3,"nzData"],["nzTable",""],["nzWidth","40px"],[4,"ngFor","ngForOf"],["nz-row","","nzGutter","0"],["nz-col","","nzXs","24","nzMd","24","nzXXl","24",1,"mb15"],["nzSize","small",4,"ngIf"],["totalSalesItems",""],[1,"las","la-times",3,"click"],[3,"nzExpand","nzExpandChange"],[3,"nzExpand"],[3,"nzData","nzShowPagination"],["baseChart","","type","bar",1,"chart",3,"data","chartHover","chartClick"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Inventory Report"),e.qZA()(),e.TgZ(4,"div",1)(5,"div",2)(6,"nz-input-group",3)(7,"button",4),e._UZ(8,"i",5),e._uU(9," Print "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return r.exportToExcel()}),e._UZ(11,"i",7),e._uU(12," Export "),e.qZA()()()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11)(17,"nz-card")(18,"h3"),e._uU(19,"Total Stock in Hand Value"),e.qZA(),e.TgZ(20,"h2"),e._uU(21),e.ALo(22,"numberSuffix"),e.qZA()()(),e.TgZ(23,"div",11)(24,"nz-card")(25,"h3"),e._uU(26,"Total Committed Value"),e.qZA(),e.TgZ(27,"h2"),e._uU(28),e.ALo(29,"numberSuffix"),e.qZA()()(),e.TgZ(30,"div",11)(31,"nz-card")(32,"h3"),e._uU(33,"Total Available Value"),e.qZA(),e.TgZ(34,"h2"),e._uU(35),e.ALo(36,"numberSuffix"),e.qZA()()()()(),e.TgZ(37,"div",12)(38,"nz-row",13)(39,"div",14)(40,"nz-card",15)(41,"div",16)(42,"div",14)(43,"div",17)(44,"form",18,19),e.NdJ("click",function(i){return r.onClickSearchArea(i)}),e.TgZ(46,"input",20,21),e.NdJ("focus",function(i){return r.handleFocus(i)}),e.qZA()(),e.TgZ(48,"div")(49,"nz-input-group",3)(50,"ul")(51,"li",22)(52,"button",23),e._uU(53," Set Date "),e._UZ(54,"i",24),e.qZA(),e.TgZ(55,"nz-dropdown-menu",25,26)(57,"div",27)(58,"ul",28)(59,"li",29),e.NdJ("click",function(){return r.todayFilter()}),e._uU(60,"Today"),e.qZA(),e.TgZ(61,"li",29),e.NdJ("click",function(){return r.yesterdayFilter()}),e._uU(62,"Yesterday"),e.qZA(),e.TgZ(63,"li",29),e.NdJ("click",function(){return r.lastWeekFilter()}),e._uU(64,"Last 7 days"),e.qZA(),e.TgZ(65,"li",29),e.NdJ("click",function(){return r.lastThirtyDaysFilter()}),e._uU(66," Last 30 days "),e.qZA(),e.TgZ(67,"li",29),e.NdJ("click",function(){return r.lastThreeMonthFilter()}),e._uU(68," Last 90 days "),e.qZA(),e.TgZ(69,"li",29),e.NdJ("click",function(){return r.lastMonthFilter()}),e._uU(70,"Last month"),e.qZA(),e.TgZ(71,"li",29),e.NdJ("click",function(){return r.lastYearFilter()}),e._uU(72,"Last year"),e.qZA(),e.TgZ(73,"li",29),e.NdJ("click",function(){return r.weekToDateFilter()}),e._uU(74,"Week to date"),e.qZA(),e.TgZ(75,"li",29),e.NdJ("click",function(){return r.monthToDateFilter()}),e._uU(76," Month to date "),e.qZA(),e.TgZ(77,"li",29),e.NdJ("click",function(){return r.yearToDateFilter()}),e._uU(78,"Year to date"),e.qZA()(),e.TgZ(79,"div",30)(80,"nz-card",31)(81,"nz-range-picker",32),e.NdJ("ngModelChange",function(i){return r.onDateChange(i[0],i[1])})("ngModelChange",function(i){return r.filterDate=i}),e.qZA(),e._UZ(82,"br"),e.TgZ(83,"button",33),e._uU(84,"Apply"),e.qZA()()()()()(),e.TgZ(85,"li")(86,"button",23),e._uU(87," Category "),e._UZ(88,"i",34),e.qZA(),e.TgZ(89,"nz-dropdown-menu",null,35)(91,"ul",28),e.YNc(92,re,2,1,"li",36),e.qZA()()(),e.TgZ(93,"li")(94,"button",23),e._uU(95," Vendor "),e._UZ(96,"i",34),e.qZA(),e.TgZ(97,"nz-dropdown-menu",null,37)(99,"ul",28),e.YNc(100,ne,2,1,"li",36),e.qZA()()(),e.TgZ(101,"li")(102,"button",23),e._uU(103," Origin "),e._UZ(104,"i",34),e.qZA(),e.TgZ(105,"nz-dropdown-menu",null,38)(107,"ul",28),e.YNc(108,oe,2,1,"li",36),e.qZA()()(),e.TgZ(109,"li")(110,"button",23),e._uU(111," Sales Chanel "),e._UZ(112,"i",34),e.qZA(),e.TgZ(113,"nz-dropdown-menu",null,39)(115,"ul",28),e.YNc(116,ie,2,1,"li",36),e.qZA()()(),e.TgZ(117,"li")(118,"button",23),e._uU(119," Brand "),e._UZ(120,"i",34),e.qZA(),e.TgZ(121,"nz-dropdown-menu",null,40)(123,"ul",28),e.YNc(124,ae,2,1,"li",36),e.qZA()()()()()()()(),e.TgZ(125,"div",41)(126,"ul"),e.YNc(127,se,3,1,"li",42),e.YNc(128,le,3,1,"li",42),e.YNc(129,ce,3,1,"li",42),e.YNc(130,de,3,1,"li",42),e.YNc(131,pe,3,1,"li",42),e.YNc(132,he,3,1,"li",42),e.qZA(),e.YNc(133,ue,2,0,"span",43),e.qZA(),e.TgZ(134,"div",14)(135,"nz-table",44,45)(137,"thead")(138,"tr"),e._UZ(139,"th",46),e.TgZ(140,"th"),e._uU(141,"Item Name"),e.qZA(),e.TgZ(142,"th"),e._uU(143,"SKU"),e.qZA(),e.TgZ(144,"th"),e._uU(145,"Stock in hand"),e.qZA(),e.TgZ(146,"th"),e._uU(147,"Commited"),e.qZA(),e.TgZ(148,"th"),e._uU(149,"Available on Hand"),e.qZA(),e.TgZ(150,"th"),e._uU(151,"Cost Price"),e.qZA(),e.TgZ(152,"th"),e._uU(153,"Stock in hand value"),e.qZA(),e.TgZ(154,"th"),e._uU(155,"Commited value"),e.qZA(),e.TgZ(156,"th"),e._uU(157,"Available Value"),e.qZA()()(),e.TgZ(158,"tbody"),e.YNc(159,ge,46,18,"ng-container",47),e.qZA()()()()()()()()(),e.TgZ(160,"div",48)(161,"div",49),e.YNc(162,me,2,1,"nz-card",50),e.qZA()(),e.YNc(163,Ce,2,1,"ng-template",null,51,e.W1O)),2&t){const n=e.MAs(56),i=e.MAs(90),s=e.MAs(98),g=e.MAs(106),f=e.MAs(114),D=e.MAs(122),M=e.MAs(164);e.xp6(7),e.Q6J("useExistingCss",!0),e.xp6(14),e.hij(" ",e.xi3(22,29,r.getAvailable()+r.getCommitted(),2)," "),e.xp6(7),e.hij("",e.xi3(29,32,r.getCommitted(),2)," "),e.xp6(7),e.hij(" ",e.xi3(36,35,r.getAvailable(),2)," "),e.xp6(5),e.Q6J("nzExtra",M),e.xp6(12),e.Q6J("nzDropdownMenu",n),e.xp6(29),e.Q6J("ngModel",r.filterDate)("nzPopupStyle",e.DdM(38,fe))("nzDisabledDate",r.disabledDate),e.xp6(5),e.Q6J("nzDropdownMenu",i),e.xp6(6),e.Q6J("ngForOf",r.productTypes),e.xp6(2),e.Q6J("nzDropdownMenu",s),e.xp6(6),e.Q6J("ngForOf",r.vendors),e.xp6(2),e.Q6J("nzDropdownMenu",g),e.xp6(6),e.Q6J("ngForOf",r.countries),e.xp6(2),e.Q6J("nzDropdownMenu",f),e.xp6(6),e.Q6J("ngForOf",r.salesChanelOptions),e.xp6(2),e.Q6J("nzDropdownMenu",D),e.xp6(6),e.Q6J("ngForOf",r.brands),e.xp6(3),e.Q6J("ngIf",r.dateRangeFilter||r.dateRangeCalFilter),e.xp6(1),e.Q6J("ngIf",r.categoryFilter),e.xp6(1),e.Q6J("ngIf",r.salesChanelFilter),e.xp6(1),e.Q6J("ngIf",r.vendorFilter),e.xp6(1),e.Q6J("ngIf",r.originFilter),e.xp6(1),e.Q6J("ngIf",r.brandFilter),e.xp6(1),e.Q6J("ngIf",r.dateRangeFilter||r.dateRangeCalFilter||r.salesChanelFilter||r.categoryFilter||r.vendorFilter||r.originFilter||r.brandFilter||r.clearAllFilter),e.xp6(2),e.Q6J("nzData",r.products),e.xp6(24),e.Q6J("ngForOf",r.products),e.xp6(3),e.Q6J("ngIf",!r.chartDataLoading)}},dependencies:[u.sg,u.O5,Z.Zp,Z.gB,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.On,p.F,I.ix,N.w,Y.dQ,x.wO,x.r9,F.cm,F.RR,F.wA,S.uw,S.wS,h.N8,h.Uo,h._C,h.h7,h.Om,h.p0,h.$Z,h.d3,h.Vk,T.t3,T.SK,O.bd,b.jh,z.I,u.OU,J],styles:[".entry_query_filter[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px;max-height:23px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.mb15[_ngcontent-%COMP%]{margin-bottom:15px}.report_export[_ngcontent-%COMP%]{float:right}.header_title[_ngcontent-%COMP%]{padding:15px 0}.date_choose[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.date_choose[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 5px}.date_choose[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px 0 0}.date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.filter_atea[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:250px}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px;font-size:16px}.filter_atea[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0}.filter_atea[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;list-style:none}.single_report[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();const Fe=["searchInput"],De=["searchForm"];function ve(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",t.getTotalOrderedForCompare(t.products)," ")}}function Te(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",t.getTotalInvoicedForCompare(t.products)," ")}}function Ze(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",t.getTotalNotInvoicedForCompare(t.products)," ")}}function xe(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"numberSuffix"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",e.xi3(2,1,t.getTotalSalesForCompare(t.products),2)," ")}}function Se(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onCategorySelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Ae(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onVendorSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Me(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onCountrySelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Pe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSalesChanelSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function Re(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onBrandSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearCategoryFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.categoryFilter," ")}}function be(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearSalesChanelFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.salesChanelFilter," ")}}function ze(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearVendorFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.vendorFilter," ")}}function we(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearOriginFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.originFilter," ")}}function qe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearBrandFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.brandFilter," ")}}function Qe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearAllFilters())}),e._uU(1," Clear All "),e.qZA()}}function Ue(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.orderedQtyForCompare?t.orderedQtyForCompare:0," ")}}function ke(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare?t.invoicedQtyForCompare:0," ")}}function Ie(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.orderedQtyForCompare-t.invoicedQtyForCompare," ")}}function Ne(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,r=e.oxw();e.xp6(1),e.hij(" vs ",r.getAvgPrice(t.priceForCompare,t.orderedQtyForCompare)," ")}}function Ye(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.priceForCompare," ")}}function Je(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",58),e.NdJ("nzExpandChange",function(n){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onExpandChange(i._id,n))}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.ALo(4,"slice"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.YNc(9,Ue,2,1,"span",27),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.YNc(12,ke,2,1,"span",27),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.YNc(15,Ie,2,1,"span",27),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.YNc(18,Ne,2,1,"span",27),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.YNc(21,Ye,2,1,"span",27),e.qZA()()}if(2&o){const t=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(2),e.hij("",t.name.length>10?e.Dn7(4,13,t.name,0,10)+"...":r.str," "),e.xp6(3),e.Oqu(t.sku),e.xp6(2),e.hij(" ",t.orderedQty?t.orderedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.orderedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.invoicedQty?t.invoicedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.orderedQty-t.invoicedQty," "),e.xp6(1),e.Q6J("ngIf",t.orderedQtyForCompare>=0),e.xp6(2),e.hij(" ",r.getAvgPrice(t.price,t.orderedQty)," "),e.xp6(1),e.Q6J("ngIf",t.orderedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.price," "),e.xp6(1),e.Q6J("ngIf",t.priceForCompare>=0)}}function Le(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.orderedQtyForCompare?t.orderedQtyForCompare:0," ")}}function $e(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare?t.invoicedQtyForCompare:0," ")}}function je(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.orderedQtyForCompare-t.invoicedQtyForCompare," ")}}function Be(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.hij(" vs ",r.getAvgPrice(t.priceForCompare,t.orderedQtyForCompare)," ")}}function Ee(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.priceForCompare?t.priceForCompare:0," ")}}function Ge(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"slice"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.YNc(8,Le,2,1,"span",27),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.YNc(11,$e,2,1,"span",27),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.YNc(14,je,2,1,"span",27),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.YNc(17,Be,2,1,"span",27),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.YNc(20,Ee,2,1,"span",27),e.qZA()()),2&o){const t=a.$implicit,r=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.hij("",r.name.length>10?e.Dn7(3,12,r.name,0,10)+"...":n.str," "),e.xp6(3),e.Oqu(t.variantSku),e.xp6(2),e.hij(" ",t.orderedQty?t.orderedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.orderedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.invoicedQty?t.invoicedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.orderedQty-t.invoicedQty," "),e.xp6(1),e.Q6J("ngIf",t.orderedQtyForCompare>=0),e.xp6(2),e.hij(" ",n.getAvgPrice(t.price,t.orderedQty)," "),e.xp6(1),e.Q6J("ngIf",t.orderedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.price?t.price:0," "),e.xp6(1),e.Q6J("ngIf",t.priceForCompare>=0)}}function He(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Je,22,17,"tr",27),e.TgZ(2,"tr",56)(3,"nz-table",57)(4,"thead")(5,"tr")(6,"th"),e._uU(7,"Item Name"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"SKU"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Order qty"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Invoice qty"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Not Invoiced"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Average Price"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Sales Amount"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,Ge,21,16,"tr",50),e.qZA()()(),e.BQk()),2&o){const t=a.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",t.orderedQty||t.orderedQtyForCompare),e.xp6(1),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(1),e.Q6J("nzData",t.variantFormArray)("nzShowPagination",!1),e.xp6(18),e.Q6J("ngForOf",t.variantFormArray)}}function Xe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"nz-card",19)(1,"canvas",59),e.NdJ("chartHover",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartHovered(n))})("chartClick",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartClicked(n))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("data",t.barChartData)}}function Ve(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",t.products.length?t.getTotalProducts(t.products):0," Items")}}const G=function(){return{boxShadow:"none"}};let Ke=(()=>{class o{constructor(t,r,n,i,s,g,f,D){this.productService=t,this.reportService=r,this.reloadService=n,this.utilsService=i,this.countryService=s,this.vendorService=g,this.productTypeService=f,this.brandService=D,this.filter=null,this.barChartLabels=[],this.invoicedData=[],this.returnedData=[],this.invoicedDataForCompare=[],this.returnedDataForCompare=[],this.salesChanelOptions=["Website","App","Self"],this.barChartData={labels:this.barChartLabels,datasets:[{data:this.invoicedData,label:"Invoice "},{data:this.returnedData,label:"Return"}]},this.chooseDate=new Date,this.rangeDate=null,this.chartType="line",this.products=[],this.countries=[],this.brands=[],this.vendors=[],this.productTypes=[],this.chartDataLoading=!0,this.clearAllFilter=!1,this.isFocused=!1,this.searchProducts=[],this.isOpen=!1,this.isLoading=!1,this.overlay=!1,this.currentPage=1,this.productsPerPage=10,this.searchQuery=null,this.holdPrevData=[],this.dateRangeFilter="Set Date",this.dateRangeFilterForCompare="Set Compare Date",this.today=new Date,this.enableComparison=!1,this.expandSet=new Set}ngOnInit(){this.reloadService.refreshSalesByItemReport$.subscribe(t=>{this.setData(this.products),this.enableComparison&&this.setDataForCompare(this.products)}),this.reloadService.refreshProduct$.subscribe(t=>{this.getAllProducts()}),this.getAllProducts(),this.getAllCountries(),this.getAllVendors(),this.getAllProductTypes(),this.getAllBrands()}getAllCountries(){this.countryService.getAll().subscribe(t=>{this.countries=t.data})}getAllVendors(){this.vendorService.getAll().subscribe(t=>{this.vendors=t.data})}getAllProductTypes(){this.productTypeService.getAll().subscribe(t=>{this.productTypes=t.data})}getAllBrands(){this.brandService.getAll().subscribe(t=>{this.brands=t.data})}getAllProducts(){this.chartDataLoading=!0,this.productService.getAllProducts(null,this.filter,null).subscribe(t=>{this.products=t.data,this.holdPrevData=t.data,this.totalProducts=t.count,this.setData(this.products)})}setData(t){this.chartDataLoading=!0;for(let r=0;r<t.length;r++)this.getOrderQty(t[r],t[r]._id),r===t.length-1&&(this.chartDataLoading=!1)}setDataForCompare(t){this.chartDataLoading=!0;for(let r=0;r<t.length;r++)this.getInvoiceQtyForCompare(t[r],t[r]._id),r===t.length-1&&(this.chartDataLoading=!1)}getTotalNotInvoiced(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].orderedQty-t[n].invoicedQty);return r||0}return 0}getTotalInvoiced(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQty);return r||0}return 0}getTotalOrdered(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].orderedQty);return r||0}return 0}getTotalSales(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].price);return r||0}return 0}getTotalNotInvoicedForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].orderedQtyForCompare-t[n].invoicedQtyForCompare);return r||0}return 0}getTotalInvoicedForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQtyForCompare);return r||0}return 0}getTotalOrderedForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].orderedQtyForCompare);return r||0}return 0}getTotalSalesForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].priceForCompare);return r||0}return 0}getOrderQty(t,r){this.reportService.getOrderCountByProductId(r,this.startDate,this.endDate).subscribe(n=>{t.orderedQty=n.orderCount,t.invoicedQty=n.invoiceCount,this.barChartLabels.push(t.sku),this.invoicedData.push(t.orderedQty),t.price=n.price},n=>{t.orderedQty=0,t.invoicedQty=0,t.price=0}),t.variantFormArray&&this.setQtyForVariants(t.variantFormArray)}getInvoiceQtyForCompare(t,r){this.reportService.getInvoiceCountByProductId(r,this.startDateForCompare,this.endDateForCompare).subscribe(n=>{t.invoicedQtyForCompare=n.invoiceCount,t.returnedQtyForCompare=n.returnCount,this.barChartLabels.push(t.sku),this.invoicedDataForCompare.push(t.invoicedQty),this.returnedDataForCompare.push(t.returnedQty),t.priceForCompare=n.price},n=>{t.invoicedQtyForCompare=0,t.returnedQtyForCompare=0,t.priceForCompare=0}),t.variantFormArray&&this.setQtyForVariantsForCompare(t.variantFormArray)}setQtyForVariants(t){for(let r=0;r<t.length;r++)this.getOrderQtyBySku(t[r],t[r].variantSku)}setQtyForVariantsForCompare(t){for(let r=0;r<t.length;r++)this.getInvoiceQtyBySkuForCompare(t[r],t[r].variantSku)}getOrderQtyBySku(t,r){this.reportService.getOrderCountBySku(r,this.startDate,this.endDate).subscribe(n=>{t.invoicedQty=n.invoiceCount,t.orderedQty=n.orderCount,t.price=n.price},n=>{t.invoicedQty=0,t.orderedQty=0,t.price=0})}getInvoiceQtyBySkuForCompare(t,r){this.reportService.getInvoiceCountBySku(r,this.startDateForCompare,this.endDateForCompare).subscribe(n=>{t.invoicedQtyForCompare=n.invoiceCount,t.returnedQtyForCompare=n.returnCount,t.priceForCompare=n.price},n=>{t.invoicedQtyForCompare=0,t.returnedQtyForCompare=0,t.priceForCompare=0})}getTotalProducts(t){let r=0;for(let n=0;n<t.length;n++)(t[n].invoicedQty||t[n].invoicedQtyForCompare)&&(r+=1);return r}onChange(t){this.dateRangeFilter="Custom",this.startDate=t[0],this.endDate=t[1],this.reloadService.needRefreshSalesByItemReport$()}onCountrySelect(t){this.originFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{country:t._id}),this.reloadService.needRefreshProduct$()}onVendorSelect(t){this.vendorFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{vendor:t._id}),this.reloadService.needRefreshProduct$()}onCategorySelect(t){this.categoryFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{productType:t._id}),this.reloadService.needRefreshProduct$()}onBrandSelect(t){this.brandFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{brand:t._id}),this.reloadService.needRefreshProduct$()}onSalesChanelSelect(t){this.salesChanelFilter=t,this.reloadService.needRefreshProduct$()}onClickSearchArea(t){t.stopPropagation()}handleFocus(t){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchProducts.length>0&&this.setPanelState(t),this.isFocused=!0)}setPanelState(t){t&&t.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0)}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,A.j)("searchTerm"),(0,y.b)(200),(0,R.x)(),(0,l.w)(r=>{const n={currentPage:this.currentPage.toString(),pageSize:this.productsPerPage.toString()};return this.searchQuery=r.trim(),console.log(this.searchQuery),this.searchQuery?this.productService.getSearchProduct(this.searchQuery,n,this.filter):(this.searchProducts=[],this.products=this.holdPrevData,this.searchProducts=[],this.searchQuery=null,_.E)})).subscribe(r=>{this.isLoading=!1,this.searchProducts=r.data,this.products=r.data,this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0,this.reloadService.needRefreshSalesByItemReport$())},()=>{this.isLoading=!1})}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.reloadService.needRefreshSalesByItemReport$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshSalesByItemReport$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshSalesByItemReport$()}lastMonthFilter(){const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=t,this.endDate=r,this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshSalesByItemReport$()}lastYearFilter(){const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDate=r,this.endDate=n,this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshSalesByItemReport$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshSalesByItemReport$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshSalesByItemReport$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshSalesByItemReport$()}onDateChange(t,r,n,i){const s=this.utilsService.getDateString(t,"DD MMM-YYYY"),g=this.utilsService.getDateString(r,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilter=i):(this.dateRangeFilter=null,this.dateRangeCalFilter=s+" - "+g),this.reloadService.needRefreshSalesByItemReport$()}todayFilterForCompare(){this.enableComparison=!0,this.dateRangeCalFilter=null,this.dateRangeFilterForCompare="Today",this.startDateForCompare=new Date,this.startDateForCompare.setHours(0,0,0,0),this.endDateForCompare=this.today,this.reloadService.needRefreshSalesByItemReport$()}yesterdayFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Yesterday"),this.reloadService.needRefreshSalesByItemReport$()}lastWeekFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 7 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThirtyDaysFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 30 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThreeMonthFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 90 days"),this.reloadService.needRefreshSalesByItemReport$()}lastMonthFilterForCompare(){this.enableComparison=!0;const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDateForCompare=t,this.endDateForCompare=r,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last month"),this.reloadService.needRefreshSalesByItemReport$()}lastYearFilterForCompare(){this.enableComparison=!0;const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDateForCompare=r,this.endDateForCompare=n,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last Year"),this.reloadService.needRefreshSalesByItemReport$()}weekToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date,this.startDateForCompare.setDate(this.startDateForCompare.getDate()-(6==this.startDateForCompare.getDay()?7:(this.startDateForCompare.getDay()+1)%7)),this.startDateForCompare.setHours(0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Week to date"),this.reloadService.needRefreshSalesByItemReport$()}monthToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Month to date"),this.reloadService.needRefreshSalesByItemReport$()}yearToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Year to date"),this.reloadService.needRefreshSalesByItemReport$()}onChangeForCompare(t){this.enableComparison=!0,this.dateRangeFilterForCompare="Custom",this.startDateForCompare=t[0],this.endDateForCompare=t[1],this.reloadService.needRefreshSalesByItemReport$()}onDateChangeForCompare(t,r,n,i){const s=this.utilsService.getDateString(t,"DD MMM-YYYY"),g=this.utilsService.getDateString(r,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilterForCompare=i):(this.dateRangeFilterForCompare=null,this.dateRangeCalFilter=s+" - "+g),this.reloadService.needRefreshSalesByItemReport$()}chartClicked({event:t,active:r}){console.log(t,r)}chartHovered({}){}exportToExcel(){const t=this.utilsService.getDateString(new Date),r=c.P6.json_to_sheet(this.products),n=c.P6.book_new();c.P6.book_append_sheet(n,r,"Sales"),c.NC(n,`Products_${t}.xlsx`)}onExpandChange(t,r){r?this.expandSet.add(t):this.expandSet.delete(t)}getAvgPrice(t,r){let n=0;return n=Number((t/r).toFixed(2)),n||0}clearSalesChanelFilter(){this.salesChanelFilter=null,this.reloadService.needRefreshProduct$()}clearCategoryFilter(){var t;null===(t=this.filter)||void 0===t||delete t.productType,this.categoryFilter=null,this.reloadService.needRefreshProduct$()}clearVendorFilter(){var t;null===(t=this.filter)||void 0===t||delete t.vendor,this.vendorFilter=null,this.reloadService.needRefreshProduct$()}clearOriginFilter(){var t;null===(t=this.filter)||void 0===t||delete t.country,this.originFilter=null,this.reloadService.needRefreshProduct$()}clearBrandFilter(){var t;null===(t=this.filter)||void 0===t||delete t.brand,this.brandFilter=null,this.reloadService.needRefreshProduct$()}clearAllFilters(){this.categoryFilter=null,this.vendorFilter=null,this.originFilter=null,this.brandFilter=null,this.filter=null,this.dateRangeFilter="Set Date",this.dateRangeFilterForCompare="Set Compare Date",this.clearAllFilter=!1,this.reloadService.needRefreshProduct$()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.M),e.Y36(j),e.Y36(w.f),e.Y36(q.F),e.Y36(Q.T),e.Y36(U.n),e.Y36(B.c),e.Y36(k.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-order-report"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Fe,5),e.Gf(De,5)),2&t){let n;e.iGM(n=e.CRH())&&(r.searchInput=n.first),e.iGM(n=e.CRH())&&(r.searchForm=n.first)}},decls:197,vars:42,consts:[["nz-row","","nzGutter","16",1,"header_title"],["nz-col","","nzXs","12",1,"mb15"],[1,"report_export"],["nzCompact",""],["nz-button","","nzType","default","printTitle","Sales By Item","printSectionId","inv_print","ngxPrint","",3,"useExistingCss"],[1,"las","la-lg","la-print"],["nz-button","","nzType","default",3,"click"],[1,"las","la-lg","la-file-export"],["nz-col","","nzXs","24"],[1,"date_choose"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-lg","la-calendar"],[2,"padding","0 5px"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzSize","small"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","ngModelChange"],["nz-button","","nzType","primary"],["dateMenu2","nzDropdownMenu"],["id","inv_print","nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzMd","24","nzXXl","8",1,"mb15"],["nz-row","","nzGutter","8"],["nz-col","","nzXs","6","nzMd","12","nzXXl","12",1,"mb15"],[4,"ngIf"],["nz-col","","nzXs","24","nzMd","24","nzXXl","16",1,"mb15"],["nzGutter","0"],["nz-col","","nzXs","24","nzMd","24",1,"mb15"],["nzSize","small","nzTitle","Order Report",3,"nzExtra"],["nz-row","","nzGutter","16"],[1,"filter_atea"],[3,"click"],["searchForm","ngForm"],["nz-input","","id","searchInput","type","text","placeholder","Search here...","name","searchTerm","autocomplete","off","ngModel","","required","",3,"focus"],["searchInput",""],[1,"las","la-angle-down"],["productTypeMenu","nzDropdownMenu"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["vendorMenu","nzDropdownMenu"],["countryMenu","nzDropdownMenu"],["statusMenu","nzDropdownMenu"],["brandMenu","nzDropdownMenu"],["nz-col","","nzXs","24","nzMd","24",1,"entry_query_filter"],[3,"click",4,"ngIf"],["nzSize","small","nzTableLayout","fixed",3,"nzData"],["nzTable",""],["nzWidth","40px"],[4,"ngFor","ngForOf"],["nz-row","","nzGutter","0"],["nz-col","","nzXs","24","nzMd","24","nzXXl","24",1,"mb15"],["nzSize","small",4,"ngIf"],["totalSalesItems",""],[1,"las","la-times",3,"click"],[3,"nzExpand"],[3,"nzData","nzShowPagination"],[3,"nzExpand","nzExpandChange"],["baseChart","","type","bar",1,"chart",3,"data","chartHover","chartClick"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Sales by Order"),e.qZA()(),e.TgZ(4,"div",1)(5,"div",2)(6,"nz-input-group",3)(7,"button",4),e._UZ(8,"i",5),e._uU(9," Print "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return r.exportToExcel()}),e._UZ(11,"i",7),e._uU(12," Export "),e.qZA()()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"button",10),e._UZ(16,"i",11),e._uU(17),e.qZA(),e.TgZ(18,"span",12),e._uU(19," ~ "),e.qZA(),e.TgZ(20,"button",10),e._UZ(21,"i",11),e._uU(22),e.qZA(),e.TgZ(23,"nz-dropdown-menu",13,14)(25,"div",15)(26,"ul",16)(27,"li",17),e.NdJ("click",function(){return r.todayFilter()}),e._uU(28,"Today"),e.qZA(),e.TgZ(29,"li",17),e.NdJ("click",function(){return r.yesterdayFilter()}),e._uU(30,"Yesterday"),e.qZA(),e.TgZ(31,"li",17),e.NdJ("click",function(){return r.lastWeekFilter()}),e._uU(32,"Last 7 days"),e.qZA(),e.TgZ(33,"li",17),e.NdJ("click",function(){return r.lastThirtyDaysFilter()}),e._uU(34,"Last 30 days"),e.qZA(),e.TgZ(35,"li",17),e.NdJ("click",function(){return r.lastThreeMonthFilter()}),e._uU(36,"Last 90 days"),e.qZA(),e.TgZ(37,"li",17),e.NdJ("click",function(){return r.lastMonthFilter()}),e._uU(38,"Last month"),e.qZA(),e.TgZ(39,"li",17),e.NdJ("click",function(){return r.lastYearFilter()}),e._uU(40,"Last year"),e.qZA(),e.TgZ(41,"li",17),e.NdJ("click",function(){return r.weekToDateFilter()}),e._uU(42,"Week to date"),e.qZA(),e.TgZ(43,"li",17),e.NdJ("click",function(){return r.monthToDateFilter()}),e._uU(44,"Month to date"),e.qZA(),e.TgZ(45,"li",17),e.NdJ("click",function(){return r.yearToDateFilter()}),e._uU(46,"Year to date"),e.qZA()(),e.TgZ(47,"div",18)(48,"nz-card",19)(49,"nz-range-picker",20),e.NdJ("ngModelChange",function(i){return r.rangeDate=i})("ngModelChange",function(i){return r.onChange(i)}),e.qZA(),e._UZ(50,"br"),e.TgZ(51,"button",21),e._uU(52,"Apply"),e.qZA()()()()(),e.TgZ(53,"nz-dropdown-menu",13,22)(55,"div",15)(56,"ul",16)(57,"li",17),e.NdJ("click",function(){return r.todayFilterForCompare()}),e._uU(58,"Today"),e.qZA(),e.TgZ(59,"li",17),e.NdJ("click",function(){return r.yesterdayFilterForCompare()}),e._uU(60,"Yesterday"),e.qZA(),e.TgZ(61,"li",17),e.NdJ("click",function(){return r.lastWeekFilterForCompare()}),e._uU(62,"Last 7 days"),e.qZA(),e.TgZ(63,"li",17),e.NdJ("click",function(){return r.lastThirtyDaysFilterForCompare()}),e._uU(64,"Last 30 days"),e.qZA(),e.TgZ(65,"li",17),e.NdJ("click",function(){return r.lastThreeMonthFilterForCompare()}),e._uU(66,"Last 90 days"),e.qZA(),e.TgZ(67,"li",17),e.NdJ("click",function(){return r.lastMonthFilterForCompare()}),e._uU(68,"Last month"),e.qZA(),e.TgZ(69,"li",17),e.NdJ("click",function(){return r.lastYearFilterForCompare()}),e._uU(70,"Last year"),e.qZA(),e.TgZ(71,"li",17),e.NdJ("click",function(){return r.weekToDateFilterForCompare()}),e._uU(72,"Week to date"),e.qZA(),e.TgZ(73,"li",17),e.NdJ("click",function(){return r.monthToDateFilterForCompare()}),e._uU(74,"Month to date"),e.qZA(),e.TgZ(75,"li",17),e.NdJ("click",function(){return r.yearToDateFilterForCompare()}),e._uU(76,"Year to date"),e.qZA()(),e.TgZ(77,"div",18)(78,"nz-card",19)(79,"nz-range-picker",20),e.NdJ("ngModelChange",function(i){return r.rangeDate=i})("ngModelChange",function(i){return r.onChangeForCompare(i)}),e.qZA(),e._UZ(80,"br"),e.TgZ(81,"button",21),e._uU(82,"Apply"),e.qZA()()()()()()()(),e.TgZ(83,"div",23)(84,"div",24)(85,"div",25)(86,"div",26)(87,"nz-card")(88,"h3"),e._uU(89,"Total Order Quantity"),e.qZA(),e.TgZ(90,"h2"),e._uU(91),e.YNc(92,ve,2,1,"span",27),e.qZA()()(),e.TgZ(93,"div",26)(94,"nz-card")(95,"h3"),e._uU(96,"Total Invoiced"),e.qZA(),e.TgZ(97,"h2"),e._uU(98),e.YNc(99,Te,2,1,"span",27),e.qZA()()(),e.TgZ(100,"div",26)(101,"nz-card")(102,"h3"),e._uU(103,"Total Not Invoiced"),e.qZA(),e.TgZ(104,"h2"),e._uU(105),e.YNc(106,Ze,2,1,"span",27),e.qZA()()(),e.TgZ(107,"div",26)(108,"nz-card")(109,"h3"),e._uU(110,"Total Sales Amount"),e.qZA(),e.TgZ(111,"h2"),e._uU(112),e.ALo(113,"numberSuffix"),e.YNc(114,xe,3,4,"span",27),e.qZA()()()()(),e.TgZ(115,"div",28)(116,"nz-row",29)(117,"div",30)(118,"nz-card",31)(119,"div",32)(120,"div",30)(121,"div",33)(122,"form",34,35),e.NdJ("click",function(i){return r.onClickSearchArea(i)}),e.TgZ(124,"input",36,37),e.NdJ("focus",function(i){return r.handleFocus(i)}),e.qZA()(),e.TgZ(126,"nz-input-group",3)(127,"button",10),e._uU(128," Category "),e._UZ(129,"i",38),e.qZA(),e.TgZ(130,"nz-dropdown-menu",null,39)(132,"ul",16),e.YNc(133,Se,2,1,"li",40),e.qZA()(),e.TgZ(134,"button",10),e._uU(135," Vendor "),e._UZ(136,"i",38),e.qZA(),e.TgZ(137,"nz-dropdown-menu",null,41)(139,"ul",16),e.YNc(140,Ae,2,1,"li",40),e.qZA()(),e.TgZ(141,"button",10),e._uU(142," Origin "),e._UZ(143,"i",38),e.qZA(),e.TgZ(144,"nz-dropdown-menu",null,42)(146,"ul",16),e.YNc(147,Me,2,1,"li",40),e.qZA()(),e.TgZ(148,"button",10),e._uU(149," Sales Chanel "),e._UZ(150,"i",38),e.qZA(),e.TgZ(151,"nz-dropdown-menu",null,43)(153,"ul",16),e.YNc(154,Pe,2,1,"li",40),e.qZA()(),e.TgZ(155,"button",10),e._uU(156," Brand "),e._UZ(157,"i",38),e.qZA(),e.TgZ(158,"nz-dropdown-menu",null,44)(160,"ul",16),e.YNc(161,Re,2,1,"li",40),e.qZA()()()()(),e.TgZ(162,"div",45)(163,"ul"),e.YNc(164,Oe,3,1,"li",27),e.YNc(165,be,3,1,"li",27),e.YNc(166,ze,3,1,"li",27),e.YNc(167,we,3,1,"li",27),e.YNc(168,qe,3,1,"li",27),e.qZA(),e.YNc(169,Qe,2,0,"span",46),e.qZA(),e.TgZ(170,"div",30)(171,"nz-table",47,48)(173,"thead")(174,"tr"),e._UZ(175,"th",49),e.TgZ(176,"th"),e._uU(177,"Item Name"),e.qZA(),e.TgZ(178,"th"),e._uU(179,"SKU"),e.qZA(),e.TgZ(180,"th"),e._uU(181,"Order qty"),e.qZA(),e.TgZ(182,"th"),e._uU(183,"Invoice qty"),e.qZA(),e.TgZ(184,"th"),e._uU(185,"Not Invoiced"),e.qZA(),e.TgZ(186,"th"),e._uU(187,"Average Price"),e.qZA(),e.TgZ(188,"th"),e._uU(189,"Sales Amount"),e.qZA()()(),e.TgZ(190,"tbody"),e.YNc(191,He,22,5,"ng-container",50),e.qZA()()()()()()()()(),e.TgZ(192,"div",51)(193,"div",52),e.YNc(194,Xe,2,1,"nz-card",53),e.qZA()(),e.YNc(195,Ve,2,1,"ng-template",null,54,e.W1O)),2&t){const n=e.MAs(24),i=e.MAs(54),s=e.MAs(131),g=e.MAs(138),f=e.MAs(145),D=e.MAs(152),M=e.MAs(159),L=e.MAs(196);e.xp6(7),e.Q6J("useExistingCss",!0),e.xp6(8),e.Q6J("nzDropdownMenu",n),e.xp6(2),e.hij(" ",r.dateRangeFilter," "),e.xp6(3),e.Q6J("nzDropdownMenu",i),e.xp6(2),e.hij(" ",r.dateRangeFilterForCompare," "),e.xp6(27),e.Q6J("ngModel",r.rangeDate)("nzPopupStyle",e.DdM(40,G)),e.xp6(30),e.Q6J("ngModel",r.rangeDate)("nzPopupStyle",e.DdM(41,G)),e.xp6(12),e.hij(" ",r.getTotalOrdered(r.products)," "),e.xp6(1),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij(" ",r.getTotalInvoiced(r.products)," "),e.xp6(1),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij("",r.getTotalNotInvoiced(r.products)," "),e.xp6(1),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij(" ",e.xi3(113,37,r.getTotalSales(r.products),2)," "),e.xp6(2),e.Q6J("ngIf",r.enableComparison),e.xp6(4),e.Q6J("nzExtra",L),e.xp6(9),e.Q6J("nzDropdownMenu",s),e.xp6(6),e.Q6J("ngForOf",r.productTypes),e.xp6(1),e.Q6J("nzDropdownMenu",g),e.xp6(6),e.Q6J("ngForOf",r.vendors),e.xp6(1),e.Q6J("nzDropdownMenu",f),e.xp6(6),e.Q6J("ngForOf",r.countries),e.xp6(1),e.Q6J("nzDropdownMenu",D),e.xp6(6),e.Q6J("ngForOf",r.salesChanelOptions),e.xp6(1),e.Q6J("nzDropdownMenu",M),e.xp6(6),e.Q6J("ngForOf",r.brands),e.xp6(3),e.Q6J("ngIf",r.categoryFilter),e.xp6(1),e.Q6J("ngIf",r.salesChanelFilter),e.xp6(1),e.Q6J("ngIf",r.vendorFilter),e.xp6(1),e.Q6J("ngIf",r.originFilter),e.xp6(1),e.Q6J("ngIf",r.brandFilter),e.xp6(1),e.Q6J("ngIf",r.salesChanelFilter||r.categoryFilter||r.vendorFilter||r.originFilter||r.brandFilter||r.clearAllFilter),e.xp6(2),e.Q6J("nzData",r.products),e.xp6(20),e.Q6J("ngForOf",r.products),e.xp6(3),e.Q6J("ngIf",!r.chartDataLoading)}},dependencies:[u.sg,u.O5,Z.Zp,Z.gB,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.On,p.F,I.ix,N.w,Y.dQ,x.wO,x.r9,F.cm,F.RR,F.wA,S.uw,S.wS,h.N8,h.Uo,h._C,h.h7,h.Om,h.p0,h.$Z,h.d3,h.Vk,T.t3,T.SK,O.bd,b.jh,z.I,u.OU,J],styles:[".entry_query_filter[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.mb15[_ngcontent-%COMP%]{margin-bottom:15px}.report_export[_ngcontent-%COMP%]{float:right}.header_title[_ngcontent-%COMP%]{padding:15px 0}.date_choose[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.date_choose[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 5px}.date_choose[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px 0 0}.date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]{display:flex;align-items:center}.filter_atea[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:250px}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px;font-size:16px}.single_report[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();const We=["searchInput"],et=["searchForm"];function tt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"numberSuffix"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",e.xi3(2,1,t.getTotalInvoicedForCompare(t.products),2)," ")}}function rt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"numberSuffix"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",e.xi3(2,1,t.getTotalReturnedForCompare(t.products),2)," ")}}function nt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"numberSuffix"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",e.xi3(2,1,t.getTotalNetSaleForCompare(t.products),2)," ")}}function ot(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"numberSuffix"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",e.xi3(2,1,t.getTotalSalesForCompare(t.products),2)," ")}}function it(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onCategorySelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function at(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onVendorSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function st(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onCountrySelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function lt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSalesChanelSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function ct(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onBrandSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function dt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearCategoryFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.categoryFilter," ")}}function pt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearSalesChanelFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.salesChanelFilter," ")}}function ht(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearVendorFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.vendorFilter," ")}}function ut(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearOriginFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.originFilter," ")}}function _t(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearBrandFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.brandFilter," ")}}function gt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearAllFilters())}),e._uU(1," Clear All "),e.qZA()}}function mt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare?t.invoicedQtyForCompare:0," ")}}function Ct(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.returnedQtyForCompare?t.returnedQtyForCompare:0," ")}}function ft(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare-t.returnedQtyForCompare," ")}}function yt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,r=e.oxw();e.xp6(1),e.hij(" vs ",r.getReturnRatio(t.returnedQtyForCompare,t.invoicedQtyForCompare),"% ")}}function Ft(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.costPrice," ")}}function Dt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,r=e.oxw();e.xp6(1),e.hij(" vs ",r.getAvgPrice(t.priceForCompare,t.invoicedQtyForCompare)," ")}}function vt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"numberSuffix"),e.qZA()),2&o){const t=e.oxw(2).$implicit,r=e.oxw();e.xp6(1),e.hij(" vs ",e.xi3(2,1,(r.getAvgPrice(t.priceForCompare,t.invoicedQtyForCompare)-t.costPrice)*(t.invoicedQtyForCompare-t.returnedQtyForCompare),2)," ")}}function Tt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,r=e.oxw();e.xp6(1),e.hij(" vs ",r.getMargin(t.costPrice,t.priceForCompare,t.invoicedQtyForCompare)," % ")}}function Zt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",58),e.NdJ("nzExpandChange",function(n){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onExpandChange(i._id,n))}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.ALo(4,"slice"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.YNc(9,mt,2,1,"span",27),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.YNc(12,Ct,2,1,"span",27),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.YNc(15,ft,2,1,"span",27),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.YNc(18,yt,2,1,"span",27),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.YNc(21,Ft,2,1,"span",27),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.YNc(24,Dt,2,1,"span",27),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.ALo(27,"numberSuffix"),e.YNc(28,vt,3,4,"span",27),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.YNc(31,Tt,2,1,"span",27),e.qZA()()}if(2&o){const t=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(2),e.hij("",t.name.length>10?e.Dn7(4,19,t.name,0,10)+"...":r.str," "),e.xp6(3),e.Oqu(t.sku),e.xp6(2),e.hij(" ",t.invoicedQty?t.invoicedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.returnedQty?t.returnedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.returnedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.invoicedQty-t.returnedQty," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",r.getReturnRatio(t.returnedQty,t.invoicedQty),"% "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.costPrice," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",r.getAvgPrice(t.price,t.invoicedQty)," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",e.xi3(27,23,(r.getAvgPrice(t.price,t.invoicedQty)-t.costPrice)*(t.invoicedQty-t.returnedQty),2)," "),e.xp6(2),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",r.getMargin(t.costPrice,t.price,t.invoicedQty)," % "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0)}}function xt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare?t.invoicedQtyForCompare:0," ")}}function St(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.returnedQtyForCompare?t.returnedQtyForCompare:0," ")}}function At(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare-t.returnedQtyForCompare," ")}}function Mt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.hij(" vs ",r.getReturnRatio(t.returnedQtyForCompare,t.invoicedQtyForCompare),"% ")}}function Pt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.variantCostPrice?t.variantCostPrice:0," ")}}function Rt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.hij(" vs ",r.getAvgPrice(t.priceForCompare,t.invoicedQtyForCompare)," ")}}function Ot(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"numberSuffix"),e.qZA()),2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.hij(" vs ",(r.getAvgPrice(t.priceForCompare,t.invoicedQtyForCompare)-t.variantCostPrice)*e.xi3(2,1,t.invoicedQtyForCompare-t.returnedQtyForCompare,2)," ")}}function bt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.hij(" vs ",r.getMargin(t.variantCostPrice,t.priceForCompare,t.invoicedQtyForCompare)," % ")}}function zt(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"slice"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.YNc(8,xt,2,1,"span",27),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.YNc(11,St,2,1,"span",27),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.YNc(14,At,2,1,"span",27),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.YNc(17,Mt,2,1,"span",27),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.YNc(20,Pt,2,1,"span",27),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.YNc(23,Rt,2,1,"span",27),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.ALo(26,"numberSuffix"),e.YNc(27,Ot,3,4,"span",27),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.YNc(30,bt,2,1,"span",27),e.qZA()()),2&o){const t=a.$implicit,r=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.hij("",r.name.length>10?e.Dn7(3,18,r.name,0,10)+"...":n.str," "),e.xp6(3),e.Oqu(t.variantSku),e.xp6(2),e.hij(" ",t.invoicedQty?t.invoicedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.returnedQty?t.returnedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.returnedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.invoicedQty-t.returnedQty," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",n.getReturnRatio(t.returnedQty,t.invoicedQty),"% "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.variantCostPrice?t.variantCostPrice:0," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",n.getAvgPrice(t.price,t.invoicedQty)," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",e.xi3(26,22,(n.getAvgPrice(t.price,t.invoicedQty)-t.variantCostPrice)*(t.invoicedQty-t.returnedQty),2)," "),e.xp6(2),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",n.getMargin(t.variantCostPrice,t.price,t.invoicedQty)," % "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0)}}function wt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Zt,32,26,"tr",27),e.TgZ(2,"tr",56)(3,"nz-table",57)(4,"thead")(5,"tr")(6,"th"),e._uU(7,"Item Name"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"SKU"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"INV qty"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Return qty"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Net sale"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Return Ratio"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Average Cost Price"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Average Selling Price"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Profit"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Margin"),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,zt,31,25,"tr",50),e.qZA()()(),e.BQk()),2&o){const t=a.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",t.invoicedQty||t.invoicedQtyForCompare),e.xp6(1),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(1),e.Q6J("nzData",t.variantFormArray)("nzShowPagination",!1),e.xp6(24),e.Q6J("ngForOf",t.variantFormArray)}}function qt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"nz-card",19)(1,"canvas",59),e.NdJ("chartHover",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartHovered(n))})("chartClick",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartClicked(n))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("data",t.barChartData)}}function Qt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",t.products.length?t.getTotalProducts(t.products):0," Items")}}const H=function(){return{boxShadow:"none"}};let Ut=(()=>{class o{constructor(t,r,n,i,s,g,f,D){this.productService=t,this.reportService=r,this.reloadService=n,this.utilsService=i,this.countryService=s,this.vendorService=g,this.productTypeService=f,this.brandService=D,this.filter=null,this.barChartLabels=[],this.invoicedData=[],this.returnedData=[],this.invoicedDataForCompare=[],this.returnedDataForCompare=[],this.barChartData={labels:this.barChartLabels,datasets:[{data:this.invoicedData,label:"Invoice "},{data:this.returnedData,label:"Return"}]},this.salesChanelOptions=["Website","App","Self"],this.clearAllFilter=!1,this.chooseDate=new Date,this.rangeDate=null,this.chartType="line",this.products=[],this.countries=[],this.brands=[],this.vendors=[],this.productTypes=[],this.chartDataLoading=!0,this.isFocused=!1,this.searchProducts=[],this.isOpen=!1,this.isLoading=!1,this.overlay=!1,this.currentPage=1,this.productsPerPage=10,this.searchQuery=null,this.holdPrevData=[],this.dateRangeFilter="Set Date",this.dateRangeFilterForCompare="Set Compare Date",this.today=new Date,this.enableComparison=!1,this.expandSet=new Set}ngOnInit(){this.reloadService.refreshSalesByItemReport$.subscribe(t=>{this.setData(this.products),this.enableComparison&&this.setDataForCompare(this.products)}),this.reloadService.refreshProduct$.subscribe(t=>{this.getAllProducts()}),this.getAllProducts(),this.getAllCountries(),this.getAllVendors(),this.getAllProductTypes(),this.getAllBrands()}getAllCountries(){this.countryService.getAll().subscribe(t=>{this.countries=t.data})}getAllVendors(){this.vendorService.getAll().subscribe(t=>{this.vendors=t.data})}getAllProductTypes(){this.productTypeService.getAll().subscribe(t=>{this.productTypes=t.data})}getAllBrands(){this.brandService.getAll().subscribe(t=>{this.brands=t.data})}getAllProducts(){this.chartDataLoading=!0,this.productService.getAllProducts(null,this.filter,null).subscribe(t=>{this.products=t.data,this.holdPrevData=t.data,this.totalProducts=t.count,this.setData(this.products)})}setData(t){this.chartDataLoading=!0;for(let r=0;r<t.length;r++){this.getInvoiceQty(t[r],t[r]._id);let s=t.length-1;r===s&&(console.log("Length",s),this.chartDataLoading=!1)}}setDataForCompare(t){this.chartDataLoading=!0;for(let r=0;r<t.length;r++)this.getInvoiceQtyForCompare(t[r],t[r]._id),r===t.length-1&&(this.chartDataLoading=!1)}getTotalNetSale(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQty-t[n].returnedQty);return r||0}return 0}getTotalInvoiced(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQty);return r||0}return 0}getTotalReturned(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].returnedQty);return r||0}return 0}getTotalSales(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].price);return r||0}return 0}getTotalNetSaleForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQtyForCompare-t[n].returnedQtyForCompare);return r||0}return 0}getTotalInvoicedForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQtyForCompare);return r||0}return 0}getTotalReturnedForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].returnedQtyForCompare);return r||0}return 0}getTotalSalesForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].priceForCompare);return r||0}return 0}getInvoiceQty(t,r){this.reportService.getInvoiceCountByProductId(r,this.startDate,this.endDate).subscribe(n=>{t.invoicedQty=n.invoiceCount,t.returnedQty=n.returnCount,this.barChartLabels.push(t.sku),this.invoicedData.push(t.invoicedQty),this.returnedData.push(t.returnedQty),t.price=n.price},n=>{t.invoicedQty=0,t.returnedQty=0,t.price=0}),t.variantFormArray&&this.setQtyForVariants(t.variantFormArray)}getInvoiceQtyForCompare(t,r){this.reportService.getInvoiceCountByProductId(r,this.startDateForCompare,this.endDateForCompare).subscribe(n=>{t.invoicedQtyForCompare=n.invoiceCount,t.returnedQtyForCompare=n.returnCount,this.barChartLabels.push(t.sku),this.invoicedDataForCompare.push(t.invoicedQty),this.returnedDataForCompare.push(t.returnedQty),t.priceForCompare=n.price},n=>{t.invoicedQtyForCompare=0,t.returnedQtyForCompare=0,t.priceForCompare=0}),t.variantFormArray&&this.setQtyForVariantsForCompare(t.variantFormArray)}setQtyForVariants(t){for(let r=0;r<t.length;r++)this.getInvoiceQtyBySku(t[r],t[r].variantSku)}setQtyForVariantsForCompare(t){for(let r=0;r<t.length;r++)this.getInvoiceQtyBySkuForCompare(t[r],t[r].variantSku)}getInvoiceQtyBySku(t,r){this.reportService.getInvoiceCountBySku(r,this.startDate,this.endDate).subscribe(n=>{t.invoicedQty=n.invoiceCount,t.returnedQty=n.returnCount,t.price=n.price},n=>{t.invoicedQty=0,t.returnedQty=0,t.price=0})}getInvoiceQtyBySkuForCompare(t,r){this.reportService.getInvoiceCountBySku(r,this.startDateForCompare,this.endDateForCompare).subscribe(n=>{t.invoicedQtyForCompare=n.invoiceCount,t.returnedQtyForCompare=n.returnCount,t.priceForCompare=n.price},n=>{t.invoicedQtyForCompare=0,t.returnedQtyForCompare=0,t.priceForCompare=0})}getTotalProducts(t){let r=0;for(let n=0;n<t.length;n++)(t[n].invoicedQty||t[n].invoicedQtyForCompare)&&(r+=1);return r}onChange(t){this.dateRangeFilter="Custom",this.startDate=t[0],this.endDate=t[1],this.reloadService.needRefreshSalesByItemReport$()}onCountrySelect(t){this.originFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{country:t._id}),this.reloadService.needRefreshProduct$()}onVendorSelect(t){this.vendorFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{vendor:t._id}),this.reloadService.needRefreshProduct$()}onCategorySelect(t){this.categoryFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{productType:t._id}),this.reloadService.needRefreshProduct$()}onBrandSelect(t){this.brandFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{brand:t._id}),this.reloadService.needRefreshProduct$()}onSalesChanelSelect(t){this.salesChanelFilter=t,this.reloadService.needRefreshProduct$()}onClickSearchArea(t){t.stopPropagation()}handleFocus(t){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchProducts.length>0&&this.setPanelState(t),this.isFocused=!0)}setPanelState(t){t&&t.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0)}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,A.j)("searchTerm"),(0,y.b)(200),(0,R.x)(),(0,l.w)(r=>{const n={currentPage:this.currentPage.toString(),pageSize:this.productsPerPage.toString()};return this.searchQuery=r.trim(),console.log(this.searchQuery),this.searchQuery?this.productService.getSearchProduct(this.searchQuery,n,this.filter):(this.searchProducts=[],this.products=this.holdPrevData,this.searchProducts=[],this.searchQuery=null,_.E)})).subscribe(r=>{this.isLoading=!1,this.searchProducts=r.data,this.products=r.data,this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0,this.reloadService.needRefreshSalesByItemReport$())},()=>{this.isLoading=!1})}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.reloadService.needRefreshSalesByItemReport$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshSalesByItemReport$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshSalesByItemReport$()}lastMonthFilter(){const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=t,this.endDate=r,this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshSalesByItemReport$()}lastYearFilter(){const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDate=r,this.endDate=n,this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshSalesByItemReport$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshSalesByItemReport$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshSalesByItemReport$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshSalesByItemReport$()}onDateChange(t,r,n,i){const s=this.utilsService.getDateString(t,"DD MMM-YYYY"),g=this.utilsService.getDateString(r,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilter=i):(this.dateRangeFilter=null,this.dateRangeCalFilter=s+" - "+g),this.reloadService.needRefreshSalesByItemReport$()}todayFilterForCompare(){this.enableComparison=!0,this.dateRangeCalFilter=null,this.dateRangeFilterForCompare="Today",this.startDateForCompare=new Date,this.startDateForCompare.setHours(0,0,0,0),this.endDateForCompare=this.today,this.reloadService.needRefreshSalesByItemReport$()}yesterdayFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Yesterday"),this.reloadService.needRefreshSalesByItemReport$()}lastWeekFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 7 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThirtyDaysFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 30 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThreeMonthFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 90 days"),this.reloadService.needRefreshSalesByItemReport$()}lastMonthFilterForCompare(){this.enableComparison=!0;const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDateForCompare=t,this.endDateForCompare=r,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last month"),this.reloadService.needRefreshSalesByItemReport$()}lastYearFilterForCompare(){this.enableComparison=!0;const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDateForCompare=r,this.endDateForCompare=n,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last Year"),this.reloadService.needRefreshSalesByItemReport$()}weekToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date,this.startDateForCompare.setDate(this.startDateForCompare.getDate()-(6==this.startDateForCompare.getDay()?7:(this.startDateForCompare.getDay()+1)%7)),this.startDateForCompare.setHours(0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Week to date"),this.reloadService.needRefreshSalesByItemReport$()}monthToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Month to date"),this.reloadService.needRefreshSalesByItemReport$()}yearToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Year to date"),this.reloadService.needRefreshSalesByItemReport$()}onChangeForCompare(t){this.enableComparison=!0,this.dateRangeFilterForCompare="Custom",this.startDateForCompare=t[0],this.endDateForCompare=t[1],this.reloadService.needRefreshSalesByItemReport$()}onDateChangeForCompare(t,r,n,i){const s=this.utilsService.getDateString(t,"DD MMM-YYYY"),g=this.utilsService.getDateString(r,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilterForCompare=i):(this.dateRangeFilterForCompare=null,this.dateRangeCalFilter=s+" - "+g),this.reloadService.needRefreshSalesByItemReport$()}chartClicked({event:t,active:r}){console.log(t,r)}chartHovered({event:t,active:r}){console.log(t,r)}exportToExcel(){const t=this.utilsService.getDateString(new Date),r=c.P6.json_to_sheet(this.products),n=c.P6.book_new();c.P6.book_append_sheet(n,r,"Sales"),c.NC(n,`Products_${t}.xlsx`)}onExpandChange(t,r){r?this.expandSet.add(t):this.expandSet.delete(t)}getReturnRatio(t,r){let n=0;return n=Number((t/r*100).toFixed(2)),n||0}getAvgPrice(t,r){let n=0;return n=Number((t/r).toFixed(2)),n||0}getMargin(t,r,n){let i=r/n;i=i>0?i:0;let s=i-t;return s=s>0?s:0,Number((100*s/i).toFixed(2))||0}clearSalesChanelFilter(){this.salesChanelFilter=null,this.reloadService.needRefreshProduct$()}clearCategoryFilter(){var t;null===(t=this.filter)||void 0===t||delete t.productType,this.categoryFilter=null,this.reloadService.needRefreshProduct$()}clearVendorFilter(){var t;null===(t=this.filter)||void 0===t||delete t.vendor,this.vendorFilter=null,this.reloadService.needRefreshProduct$()}clearOriginFilter(){var t;null===(t=this.filter)||void 0===t||delete t.country,this.originFilter=null,this.reloadService.needRefreshProduct$()}clearBrandFilter(){var t;null===(t=this.filter)||void 0===t||delete t.brand,this.brandFilter=null,this.reloadService.needRefreshProduct$()}clearAllFilters(){this.categoryFilter=null,this.vendorFilter=null,this.originFilter=null,this.brandFilter=null,this.filter=null,this.dateRangeFilter="Set Date",this.dateRangeFilterForCompare="Set Compare Date",this.clearAllFilter=!1,this.reloadService.needRefreshProduct$()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.M),e.Y36(j),e.Y36(w.f),e.Y36(q.F),e.Y36(Q.T),e.Y36(U.n),e.Y36(B.c),e.Y36(k.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profit-loss-report"]],viewQuery:function(t,r){if(1&t&&(e.Gf(We,5),e.Gf(et,5)),2&t){let n;e.iGM(n=e.CRH())&&(r.searchInput=n.first),e.iGM(n=e.CRH())&&(r.searchForm=n.first)}},decls:206,vars:51,consts:[["nz-row","","nzGutter","16",1,"header_title"],["nz-col","","nzXs","12",1,"mb15"],[1,"report_export"],["nzCompact",""],["nz-button","","nzType","default","printTitle","Sales By Item","printSectionId","inv_print","ngxPrint","",3,"useExistingCss"],[1,"las","la-lg","la-print"],["nz-button","","nzType","default",3,"click"],[1,"las","la-lg","la-file-export"],["nz-col","","nzXs","24"],[1,"date_choose"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-lg","la-calendar"],[2,"padding","0 5px"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzSize","small"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","ngModelChange"],["nz-button","","nzType","primary"],["dateMenu2","nzDropdownMenu"],["id","inv_print","nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzMd","24","nzXXl","8",1,"mb15"],["nz-row","","nzGutter","8"],["nz-col","","nzXs","6","nzMd","12","nzXXl","12",1,"mb15"],[4,"ngIf"],["nz-col","","nzXs","24","nzMd","24","nzXXl","16",1,"mb15"],["nzGutter","0"],["nz-col","","nzXs","24","nzMd","24",1,"mb15"],["nzSize","small","nzTitle","Profit Loss Report",3,"nzExtra"],["nz-row","","nzGutter","16"],[1,"filter_atea"],[3,"click"],["searchForm","ngForm"],["nz-input","","id","searchInput","type","text","placeholder","Search here...","name","searchTerm","autocomplete","off","ngModel","","required","",3,"focus"],["searchInput",""],[1,"las","la-angle-down"],["productTypeMenu","nzDropdownMenu"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["vendorMenu","nzDropdownMenu"],["countryMenu","nzDropdownMenu"],["statusMenu","nzDropdownMenu"],["brandMenu","nzDropdownMenu"],["nz-col","","nzXs","24","nzMd","24",1,"entry_query_filter"],[3,"click",4,"ngIf"],["nzSize","small","nzTableLayout","fixed",3,"nzData"],["nzTable",""],["nzWidth","40px"],[4,"ngFor","ngForOf"],["nz-row","","nzGutter","0"],["nz-col","","nzXs","24","nzMd","24","nzXXl","24",1,"mb15"],["nzSize","small",4,"ngIf"],["totalSalesItems",""],[1,"las","la-times",3,"click"],[3,"nzExpand"],[3,"nzData","nzShowPagination"],[3,"nzExpand","nzExpandChange"],["baseChart","","type","bar",1,"chart",3,"data","chartHover","chartClick"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Profit/Loss Report"),e.qZA()(),e.TgZ(4,"div",1)(5,"div",2)(6,"nz-input-group",3)(7,"button",4),e._UZ(8,"i",5),e._uU(9," Print "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return r.exportToExcel()}),e._UZ(11,"i",7),e._uU(12," Export "),e.qZA()()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"button",10),e._UZ(16,"i",11),e._uU(17),e.qZA(),e.TgZ(18,"span",12),e._uU(19," ~ "),e.qZA(),e.TgZ(20,"button",10),e._UZ(21,"i",11),e._uU(22),e.qZA(),e.TgZ(23,"nz-dropdown-menu",13,14)(25,"div",15)(26,"ul",16)(27,"li",17),e.NdJ("click",function(){return r.todayFilter()}),e._uU(28,"Today"),e.qZA(),e.TgZ(29,"li",17),e.NdJ("click",function(){return r.yesterdayFilter()}),e._uU(30,"Yesterday"),e.qZA(),e.TgZ(31,"li",17),e.NdJ("click",function(){return r.lastWeekFilter()}),e._uU(32,"Last 7 days"),e.qZA(),e.TgZ(33,"li",17),e.NdJ("click",function(){return r.lastThirtyDaysFilter()}),e._uU(34,"Last 30 days"),e.qZA(),e.TgZ(35,"li",17),e.NdJ("click",function(){return r.lastThreeMonthFilter()}),e._uU(36,"Last 90 days"),e.qZA(),e.TgZ(37,"li",17),e.NdJ("click",function(){return r.lastMonthFilter()}),e._uU(38,"Last month"),e.qZA(),e.TgZ(39,"li",17),e.NdJ("click",function(){return r.lastYearFilter()}),e._uU(40,"Last year"),e.qZA(),e.TgZ(41,"li",17),e.NdJ("click",function(){return r.weekToDateFilter()}),e._uU(42,"Week to date"),e.qZA(),e.TgZ(43,"li",17),e.NdJ("click",function(){return r.monthToDateFilter()}),e._uU(44,"Month to date"),e.qZA(),e.TgZ(45,"li",17),e.NdJ("click",function(){return r.yearToDateFilter()}),e._uU(46,"Year to date"),e.qZA()(),e.TgZ(47,"div",18)(48,"nz-card",19)(49,"nz-range-picker",20),e.NdJ("ngModelChange",function(i){return r.rangeDate=i})("ngModelChange",function(i){return r.onChange(i)}),e.qZA(),e._UZ(50,"br"),e.TgZ(51,"button",21),e._uU(52,"Apply"),e.qZA()()()()(),e.TgZ(53,"nz-dropdown-menu",13,22)(55,"div",15)(56,"ul",16)(57,"li",17),e.NdJ("click",function(){return r.todayFilterForCompare()}),e._uU(58,"Today"),e.qZA(),e.TgZ(59,"li",17),e.NdJ("click",function(){return r.yesterdayFilterForCompare()}),e._uU(60,"Yesterday"),e.qZA(),e.TgZ(61,"li",17),e.NdJ("click",function(){return r.lastWeekFilterForCompare()}),e._uU(62,"Last 7 days"),e.qZA(),e.TgZ(63,"li",17),e.NdJ("click",function(){return r.lastThirtyDaysFilterForCompare()}),e._uU(64,"Last 30 days"),e.qZA(),e.TgZ(65,"li",17),e.NdJ("click",function(){return r.lastThreeMonthFilterForCompare()}),e._uU(66,"Last 90 days"),e.qZA(),e.TgZ(67,"li",17),e.NdJ("click",function(){return r.lastMonthFilterForCompare()}),e._uU(68,"Last month"),e.qZA(),e.TgZ(69,"li",17),e.NdJ("click",function(){return r.lastYearFilterForCompare()}),e._uU(70,"Last year"),e.qZA(),e.TgZ(71,"li",17),e.NdJ("click",function(){return r.weekToDateFilterForCompare()}),e._uU(72,"Week to date"),e.qZA(),e.TgZ(73,"li",17),e.NdJ("click",function(){return r.monthToDateFilterForCompare()}),e._uU(74,"Month to date"),e.qZA(),e.TgZ(75,"li",17),e.NdJ("click",function(){return r.yearToDateFilterForCompare()}),e._uU(76,"Year to date"),e.qZA()(),e.TgZ(77,"div",18)(78,"nz-card",19)(79,"nz-range-picker",20),e.NdJ("ngModelChange",function(i){return r.rangeDate=i})("ngModelChange",function(i){return r.onChangeForCompare(i)}),e.qZA(),e._UZ(80,"br"),e.TgZ(81,"button",21),e._uU(82,"Apply"),e.qZA()()()()()()()(),e.TgZ(83,"div",23)(84,"div",24)(85,"div",25)(86,"div",26)(87,"nz-card")(88,"h3"),e._uU(89,"Total Invoiced"),e.qZA(),e.TgZ(90,"h2"),e._uU(91),e.ALo(92,"numberSuffix"),e.YNc(93,tt,3,4,"span",27),e.qZA()()(),e.TgZ(94,"div",26)(95,"nz-card")(96,"h3"),e._uU(97,"Total Returned"),e.qZA(),e.TgZ(98,"h2"),e._uU(99),e.ALo(100,"numberSuffix"),e.YNc(101,rt,3,4,"span",27),e.qZA()()(),e.TgZ(102,"div",26)(103,"nz-card")(104,"h3"),e._uU(105,"Net Sales"),e.qZA(),e.TgZ(106,"h2"),e._uU(107),e.ALo(108,"numberSuffix"),e.YNc(109,nt,3,4,"span",27),e.qZA()()(),e.TgZ(110,"div",26)(111,"nz-card")(112,"h3"),e._uU(113,"Total Sales Amount"),e.qZA(),e.TgZ(114,"h2"),e._uU(115),e.ALo(116,"numberSuffix"),e.YNc(117,ot,3,4,"span",27),e.qZA()()()()(),e.TgZ(118,"div",28)(119,"nz-row",29)(120,"div",30)(121,"nz-card",31)(122,"div",32)(123,"div",30)(124,"div",33)(125,"form",34,35),e.NdJ("click",function(i){return r.onClickSearchArea(i)}),e.TgZ(127,"input",36,37),e.NdJ("focus",function(i){return r.handleFocus(i)}),e.qZA()(),e.TgZ(129,"nz-input-group",3)(130,"button",10),e._uU(131," Category "),e._UZ(132,"i",38),e.qZA(),e.TgZ(133,"nz-dropdown-menu",null,39)(135,"ul",16),e.YNc(136,it,2,1,"li",40),e.qZA()(),e.TgZ(137,"button",10),e._uU(138," Vendor "),e._UZ(139,"i",38),e.qZA(),e.TgZ(140,"nz-dropdown-menu",null,41)(142,"ul",16),e.YNc(143,at,2,1,"li",40),e.qZA()(),e.TgZ(144,"button",10),e._uU(145," Origin "),e._UZ(146,"i",38),e.qZA(),e.TgZ(147,"nz-dropdown-menu",null,42)(149,"ul",16),e.YNc(150,st,2,1,"li",40),e.qZA()(),e.TgZ(151,"button",10),e._uU(152," Sales Chanel "),e._UZ(153,"i",38),e.qZA(),e.TgZ(154,"nz-dropdown-menu",null,43)(156,"ul",16),e.YNc(157,lt,2,1,"li",40),e.qZA()(),e.TgZ(158,"button",10),e._uU(159," Brand "),e._UZ(160,"i",38),e.qZA(),e.TgZ(161,"nz-dropdown-menu",null,44)(163,"ul",16),e.YNc(164,ct,2,1,"li",40),e.qZA()()()()(),e.TgZ(165,"div",45)(166,"ul"),e.YNc(167,dt,3,1,"li",27),e.YNc(168,pt,3,1,"li",27),e.YNc(169,ht,3,1,"li",27),e.YNc(170,ut,3,1,"li",27),e.YNc(171,_t,3,1,"li",27),e.qZA(),e.YNc(172,gt,2,0,"span",46),e.qZA(),e.TgZ(173,"div",30)(174,"nz-table",47,48)(176,"thead")(177,"tr"),e._UZ(178,"th",49),e.TgZ(179,"th"),e._uU(180,"Item Name"),e.qZA(),e.TgZ(181,"th"),e._uU(182,"SKU"),e.qZA(),e.TgZ(183,"th"),e._uU(184,"INV qty"),e.qZA(),e.TgZ(185,"th"),e._uU(186,"Return qty"),e.qZA(),e.TgZ(187,"th"),e._uU(188,"Net sale"),e.qZA(),e.TgZ(189,"th"),e._uU(190,"Return Ratio"),e.qZA(),e.TgZ(191,"th"),e._uU(192,"Average Cost Price"),e.qZA(),e.TgZ(193,"th"),e._uU(194,"Average Selling Price"),e.qZA(),e.TgZ(195,"th"),e._uU(196,"Profit"),e.qZA(),e.TgZ(197,"th"),e._uU(198,"Margin"),e.qZA()()(),e.TgZ(199,"tbody"),e.YNc(200,wt,28,5,"ng-container",50),e.qZA()()()()()()()()(),e.TgZ(201,"div",51)(202,"div",52),e.YNc(203,qt,2,1,"nz-card",53),e.qZA()(),e.YNc(204,Qt,2,1,"ng-template",null,54,e.W1O)),2&t){const n=e.MAs(24),i=e.MAs(54),s=e.MAs(134),g=e.MAs(141),f=e.MAs(148),D=e.MAs(155),M=e.MAs(162),L=e.MAs(175),kr=e.MAs(205);e.xp6(7),e.Q6J("useExistingCss",!0),e.xp6(8),e.Q6J("nzDropdownMenu",n),e.xp6(2),e.hij(" ",r.dateRangeFilter," "),e.xp6(3),e.Q6J("nzDropdownMenu",i),e.xp6(2),e.hij(" ",r.dateRangeFilterForCompare," "),e.xp6(27),e.Q6J("ngModel",r.rangeDate)("nzPopupStyle",e.DdM(49,H)),e.xp6(30),e.Q6J("ngModel",r.rangeDate)("nzPopupStyle",e.DdM(50,H)),e.xp6(12),e.hij(" ",e.xi3(92,37,r.getTotalInvoiced(r.products),2)," "),e.xp6(2),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij("",e.xi3(100,40,r.getTotalReturned(r.products),2)," "),e.xp6(2),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij(" ",e.xi3(108,43,r.getTotalNetSale(r.products),2)," "),e.xp6(2),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij(" ",e.xi3(116,46,r.getTotalSales(r.products),2)," "),e.xp6(2),e.Q6J("ngIf",r.enableComparison),e.xp6(4),e.Q6J("nzExtra",kr),e.xp6(9),e.Q6J("nzDropdownMenu",s),e.xp6(6),e.Q6J("ngForOf",r.productTypes),e.xp6(1),e.Q6J("nzDropdownMenu",g),e.xp6(6),e.Q6J("ngForOf",r.vendors),e.xp6(1),e.Q6J("nzDropdownMenu",f),e.xp6(6),e.Q6J("ngForOf",r.countries),e.xp6(1),e.Q6J("nzDropdownMenu",D),e.xp6(6),e.Q6J("ngForOf",r.salesChanelOptions),e.xp6(1),e.Q6J("nzDropdownMenu",M),e.xp6(6),e.Q6J("ngForOf",r.brands),e.xp6(3),e.Q6J("ngIf",r.categoryFilter),e.xp6(1),e.Q6J("ngIf",r.salesChanelFilter),e.xp6(1),e.Q6J("ngIf",r.vendorFilter),e.xp6(1),e.Q6J("ngIf",r.originFilter),e.xp6(1),e.Q6J("ngIf",r.brandFilter),e.xp6(1),e.Q6J("ngIf",r.salesChanelFilter||r.categoryFilter||r.vendorFilter||r.originFilter||r.brandFilter||r.clearAllFilter),e.xp6(2),e.Q6J("nzData",r.products),e.xp6(26),e.Q6J("ngForOf",L.data),e.xp6(3),e.Q6J("ngIf",!r.chartDataLoading)}},dependencies:[u.sg,u.O5,Z.Zp,Z.gB,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.On,p.F,I.ix,N.w,Y.dQ,x.wO,x.r9,F.cm,F.RR,F.wA,S.uw,S.wS,h.N8,h.Uo,h._C,h.h7,h.Om,h.p0,h.$Z,h.d3,h.Vk,T.t3,T.SK,O.bd,b.jh,z.I,u.OU,J],styles:[".entry_query_filter[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.mb15[_ngcontent-%COMP%]{margin-bottom:15px}.report_export[_ngcontent-%COMP%]{float:right}.header_title[_ngcontent-%COMP%]{padding:15px 0}.date_choose[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.date_choose[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 5px}.date_choose[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px 0 0}.date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]{display:flex;align-items:center}.filter_atea[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:250px}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px;font-size:16px}.single_report[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();function kt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare?t.invoicedQtyForCompare:0," ")}}function It(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.returnedQtyForCompare?t.returnedQtyForCompare:0," ")}}function Nt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare-t.returnedQtyForCompare," ")}}function Yt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,r=e.oxw();e.xp6(1),e.hij(" vs ",r.getReturnRatio(t.returnedQtyForCompare,t.invoicedQtyForCompare),"% ")}}function Jt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,r=e.oxw();e.xp6(1),e.hij(" vs ",r.getAvgPrice(t.priceForCompare,t.invoicedQtyForCompare)," ")}}function Lt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" vs ",t.priceForCompare," ")}}function $t(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",7),e.NdJ("nzExpandChange",function(n){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onExpandChange(i._id,n))}),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.ALo(4,"slice"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.YNc(9,kt,2,1,"span",4),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.YNc(12,It,2,1,"span",4),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.YNc(15,Nt,2,1,"span",4),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.YNc(18,Yt,2,1,"span",4),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.YNc(21,Jt,2,1,"span",4),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.YNc(24,Lt,2,1,"span",4),e.qZA()()}if(2&o){const t=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(2),e.hij("",t.name.length>10?e.Dn7(4,15,t.name,0,10)+"...":r.str," "),e.xp6(3),e.Oqu(t.sku),e.xp6(2),e.hij(" ",t.invoicedQty?t.invoicedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.returnedQty?t.returnedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.returnedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.invoicedQty-t.returnedQty," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",r.getReturnRatio(t.returnedQty,t.invoicedQty),"% "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",r.getAvgPrice(t.price,t.invoicedQty)," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.price," "),e.xp6(1),e.Q6J("ngIf",t.priceForCompare>=0)}}function jt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare?t.invoicedQtyForCompare:0," ")}}function Bt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.returnedQtyForCompare?t.returnedQtyForCompare:0," ")}}function Et(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.invoicedQtyForCompare-t.returnedQtyForCompare," ")}}function Gt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.hij(" vs ",r.getReturnRatio(t.returnedQtyForCompare,t.invoicedQtyForCompare),"% ")}}function Ht(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.hij(" vs ",r.getAvgPrice(t.priceForCompare,t.invoicedQtyForCompare)," ")}}function Xt(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" vs ",t.priceForCompare?t.priceForCompare:0," ")}}function Vt(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"slice"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.YNc(8,jt,2,1,"span",4),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.YNc(11,Bt,2,1,"span",4),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.YNc(14,Et,2,1,"span",4),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.YNc(17,Gt,2,1,"span",4),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.YNc(20,Ht,2,1,"span",4),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.YNc(23,Xt,2,1,"span",4),e.qZA()()),2&o){const t=a.$implicit,r=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.hij("",r.name.length>10?e.Dn7(3,14,r.name,0,10)+"...":n.str," "),e.xp6(3),e.Oqu(t.variantSku),e.xp6(2),e.hij(" ",t.invoicedQty?t.invoicedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.returnedQty?t.returnedQty:0," "),e.xp6(1),e.Q6J("ngIf",t.returnedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.invoicedQty-t.returnedQty," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",n.getReturnRatio(t.returnedQty,t.invoicedQty),"% "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",n.getAvgPrice(t.price,t.invoicedQty)," "),e.xp6(1),e.Q6J("ngIf",t.invoicedQtyForCompare>=0),e.xp6(2),e.hij(" ",t.price?t.price:0," "),e.xp6(1),e.Q6J("ngIf",t.priceForCompare>=0)}}function Kt(o,a){if(1&o&&(e.ynx(0),e.YNc(1,$t,25,19,"tr",4),e.TgZ(2,"tr",5)(3,"nz-table",6)(4,"thead")(5,"tr")(6,"th"),e._uU(7,"Item Name"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"SKU"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"INV qty"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Return qty"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Net sale"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Return Ratio"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Average Price"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Sales Amount"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,Vt,24,18,"tr",3),e.qZA()()(),e.BQk()),2&o){const t=a.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",t.invoicedQty||t.invoicedQtyForCompare),e.xp6(1),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(1),e.Q6J("nzData",t.variantFormArray)("nzShowPagination",!1),e.xp6(20),e.Q6J("ngForOf",t.variantFormArray)}}let X=(()=>{class o{constructor(){this.data=[],this.expandSet=new Set}ngOnInit(){}onExpandChange(t,r){r?this.expandSet.add(t):this.expandSet.delete(t)}getReturnRatio(t,r){let n=0;return n=Number((t/r*100).toFixed(2)),n||0}getAvgPrice(t,r){let n=0;return n=Number((t/r).toFixed(2)),n||0}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-table"]],inputs:{data:"data"},decls:23,vars:3,consts:[["nzSize","small","nzTableLayout","fixed",3,"nzData","nzFrontPagination"],["nzTable",""],["nzWidth","40px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"nzExpand"],[3,"nzData","nzShowPagination"],[3,"nzExpand","nzExpandChange"]],template:function(t,r){if(1&t&&(e.TgZ(0,"nz-table",0,1)(2,"thead")(3,"tr"),e._UZ(4,"th",2),e.TgZ(5,"th"),e._uU(6,"Item Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"SKU"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"INV qty"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Return qty"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Net sale"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Return Ratio"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Average Price"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Sales Amount"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,Kt,24,5,"ng-container",3),e.qZA()()),2&t){const n=e.MAs(1);e.Q6J("nzData",r.data)("nzFrontPagination",!0),e.xp6(22),e.Q6J("ngForOf",n.data)}},dependencies:[u.sg,u.O5,h.N8,h.Uo,h._C,h.h7,h.Om,h.p0,h.$Z,h.d3,h.Vk,u.OU]}),o})(),Wt=(()=>{class o{constructor(){this.allReportData=[{name:"Mamun"}]}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reports"]],decls:7,vars:1,consts:[[1,"header_title"],["nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzSm","12","nzMd","8"],["nzSize","small"],[3,"data"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Welcome to Report"),e.qZA()(),e.TgZ(3,"div",1)(4,"div",2)(5,"nz-card",3),e._UZ(6,"app-table",4),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("data",r.allReportData))},dependencies:[X,T.t3,T.SK,O.bd],styles:[".header_title[_ngcontent-%COMP%]{padding:15px 0}"]}),o})();const er=["searchInput"],tr=["searchForm"];function rr(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",t.getTotalInvoicedForCompare(t.products)," ")}}function nr(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",t.getTotalReturnedForCompare(t.products)," ")}}function or(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",t.getTotalNetSaleForCompare(t.products)," ")}}function ir(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"numberSuffix"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" vs ",e.xi3(2,1,t.getTotalSalesForCompare(t.products),2)," ")}}function ar(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onCategorySelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function sr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onVendorSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function lr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onCountrySelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function cr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSalesChanelSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function dr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onBrandSelect(i))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function pr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearCategoryFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.categoryFilter," ")}}function hr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearSalesChanelFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.salesChanelFilter," ")}}function ur(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearVendorFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.vendorFilter," ")}}function _r(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearOriginFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.originFilter," ")}}function gr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearBrandFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.brandFilter," ")}}function mr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearAllFilters())}),e._uU(1," Clear All "),e.qZA()}}function Cr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"nz-card",19)(1,"canvas",53),e.NdJ("chartHover",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartHovered(n))})("chartClick",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartClicked(n))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("data",t.barChartData)}}function fr(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",t.products.length?t.getTotalProducts(t.products):0," Items")}}const V=function(){return{boxShadow:"none"}};let yr=(()=>{class o{constructor(t,r,n,i,s,g,f,D){this.productService=t,this.reportService=r,this.reloadService=n,this.utilsService=i,this.countryService=s,this.vendorService=g,this.productTypeService=f,this.brandService=D,this.filter=null,this.barChartLabels=[],this.invoicedData=[],this.returnedData=[],this.invoicedDataForCompare=[],this.returnedDataForCompare=[],this.barChartData={labels:this.barChartLabels,datasets:[{data:this.invoicedData,label:"Invoice "},{data:this.returnedData,label:"Return"}]},this.salesChanelOptions=["Website","App","Self"],this.clearAllFilter=!1,this.chooseDate=new Date,this.rangeDate=null,this.chartType="line",this.products=[],this.countries=[],this.brands=[],this.vendors=[],this.productTypes=[],this.chartDataLoading=!0,this.isFocused=!1,this.searchProducts=[],this.isOpen=!1,this.isLoading=!1,this.overlay=!1,this.currentPage=1,this.productsPerPage=10,this.searchQuery=null,this.holdPrevData=[],this.dateRangeFilter="Set Date",this.dateRangeFilterForCompare="Set Compare Date",this.today=new Date,this.enableComparison=!1}ngOnInit(){this.reloadService.refreshSalesByItemReport$.subscribe(t=>{this.setData(this.products),this.enableComparison&&this.setDataForCompare(this.products)}),this.reloadService.refreshProduct$.subscribe(t=>{this.getAllProducts()}),this.getAllProducts(),this.getAllCountries(),this.getAllVendors(),this.getAllProductTypes(),this.getAllBrands()}getAllCountries(){this.countryService.getAll().subscribe(t=>{this.countries=t.data})}getAllVendors(){this.vendorService.getAll().subscribe(t=>{this.vendors=t.data})}getAllProductTypes(){this.productTypeService.getAll().subscribe(t=>{this.productTypes=t.data})}getAllBrands(){this.brandService.getAll().subscribe(t=>{this.brands=t.data})}getAllProducts(){this.chartDataLoading=!0,this.productService.getAllProducts(null,this.filter,null).subscribe(t=>{this.products=t.data,this.holdPrevData=t.data,this.totalProducts=t.count,this.setData(this.products)})}setData(t){this.chartDataLoading=!0;for(let r=0;r<t.length;r++){this.getInvoiceQty(t[r],t[r]._id);let s=t.length-1;r===s&&(console.log("Length",s),this.chartDataLoading=!1)}}setDataForCompare(t){this.chartDataLoading=!0;for(let r=0;r<t.length;r++)this.getInvoiceQtyForCompare(t[r],t[r]._id),r===t.length-1&&(this.chartDataLoading=!1)}getTotalNetSale(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQty-t[n].returnedQty);return r||0}return 0}getTotalInvoiced(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQty);return r||0}return 0}getTotalReturned(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].returnedQty);return r||0}return 0}getTotalSales(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].price);return r||0}return 0}getTotalNetSaleForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQtyForCompare-t[n].returnedQtyForCompare);return r||0}return 0}getTotalInvoicedForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].invoicedQtyForCompare);return r||0}return 0}getTotalReturnedForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].returnedQtyForCompare);return r||0}return 0}getTotalSalesForCompare(t){let r=0;if(t){for(let n=0;n<t.length;n++)r+=Number(t[n].priceForCompare);return r||0}return 0}getInvoiceQty(t,r){this.reportService.getInvoiceCountByProductId(r,this.startDate,this.endDate).subscribe(n=>{t.invoicedQty=n.invoiceCount,t.returnedQty=n.returnCount,this.barChartLabels.push(t.sku),this.invoicedData.push(t.invoicedQty),this.returnedData.push(t.returnedQty),t.price=n.price},n=>{t.invoicedQty=0,t.returnedQty=0,t.price=0}),t.variantFormArray&&this.setQtyForVariants(t.variantFormArray)}getInvoiceQtyForCompare(t,r){this.reportService.getInvoiceCountByProductId(r,this.startDateForCompare,this.endDateForCompare).subscribe(n=>{t.invoicedQtyForCompare=n.invoiceCount,t.returnedQtyForCompare=n.returnCount,this.barChartLabels.push(t.sku),this.invoicedDataForCompare.push(t.invoicedQty),this.returnedDataForCompare.push(t.returnedQty),t.priceForCompare=n.price},n=>{t.invoicedQtyForCompare=0,t.returnedQtyForCompare=0,t.priceForCompare=0}),t.variantFormArray&&this.setQtyForVariantsForCompare(t.variantFormArray)}setQtyForVariants(t){for(let r=0;r<t.length;r++)this.getInvoiceQtyBySku(t[r],t[r].variantSku)}setQtyForVariantsForCompare(t){for(let r=0;r<t.length;r++)this.getInvoiceQtyBySkuForCompare(t[r],t[r].variantSku)}getInvoiceQtyBySku(t,r){this.reportService.getInvoiceCountBySku(r,this.startDate,this.endDate).subscribe(n=>{t.invoicedQty=n.invoiceCount,t.returnedQty=n.returnCount,t.price=n.price},n=>{t.invoicedQty=0,t.returnedQty=0,t.price=0})}getInvoiceQtyBySkuForCompare(t,r){this.reportService.getInvoiceCountBySku(r,this.startDateForCompare,this.endDateForCompare).subscribe(n=>{t.invoicedQtyForCompare=n.invoiceCount,t.returnedQtyForCompare=n.returnCount,t.priceForCompare=n.price},n=>{t.invoicedQtyForCompare=0,t.returnedQtyForCompare=0,t.priceForCompare=0})}getTotalProducts(t){let r=0;for(let n=0;n<t.length;n++)(t[n].invoicedQty||t[n].invoicedQtyForCompare)&&(r+=1);return r}onChange(t){this.dateRangeFilter="Custom",this.startDate=t[0],this.endDate=t[1],this.reloadService.needRefreshSalesByItemReport$()}onSalesChanelSelect(t){this.salesChanelFilter=t,this.reloadService.needRefreshProduct$()}onCountrySelect(t){this.originFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{country:t._id}),this.reloadService.needRefreshProduct$()}onVendorSelect(t){this.vendorFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{vendor:t._id}),this.reloadService.needRefreshProduct$()}onCategorySelect(t){this.categoryFilter=null==t?void 0:t.name,this.filter=Object.assign(Object.assign({},this.filter),{productType:t._id}),this.reloadService.needRefreshProduct$()}onBrandSelect(t){this.brandFilter=null==t?void 0:t.name,console.log("brandFilter",this.brandFilter),this.filter=Object.assign(Object.assign({},this.filter),{brand:t._id}),this.reloadService.needRefreshProduct$()}onClickSearchArea(t){t.stopPropagation()}handleFocus(t){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchProducts.length>0&&this.setPanelState(t),this.isFocused=!0)}setPanelState(t){t&&t.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0)}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,A.j)("searchTerm"),(0,y.b)(200),(0,R.x)(),(0,l.w)(r=>{const n={currentPage:this.currentPage.toString(),pageSize:this.productsPerPage.toString()};return this.searchQuery=r.trim(),console.log(this.searchQuery),this.searchQuery?this.productService.getSearchProduct(this.searchQuery,n,this.filter):(this.searchProducts=[],this.products=this.holdPrevData,this.searchProducts=[],this.searchQuery=null,_.E)})).subscribe(r=>{this.isLoading=!1,this.searchProducts=r.data,this.products=r.data,this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0,this.reloadService.needRefreshSalesByItemReport$())},()=>{this.isLoading=!1})}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.reloadService.needRefreshSalesByItemReport$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshSalesByItemReport$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshSalesByItemReport$()}lastMonthFilter(){const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=t,this.endDate=r,this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshSalesByItemReport$()}lastYearFilter(){const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDate=r,this.endDate=n,this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshSalesByItemReport$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshSalesByItemReport$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshSalesByItemReport$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshSalesByItemReport$()}onDateChange(t,r,n,i){const s=this.utilsService.getDateString(t,"DD MMM-YYYY"),g=this.utilsService.getDateString(r,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilter=i):(this.dateRangeFilter=null,this.dateRangeCalFilter=s+" - "+g),this.reloadService.needRefreshSalesByItemReport$()}todayFilterForCompare(){this.enableComparison=!0,this.dateRangeCalFilter=null,this.dateRangeFilterForCompare="Today",this.startDateForCompare=new Date,this.startDateForCompare.setHours(0,0,0,0),this.endDateForCompare=this.today,this.reloadService.needRefreshSalesByItemReport$()}yesterdayFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Yesterday"),this.reloadService.needRefreshSalesByItemReport$()}lastWeekFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 7 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThirtyDaysFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 30 days"),this.reloadService.needRefreshSalesByItemReport$()}lastThreeMonthFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last 90 days"),this.reloadService.needRefreshSalesByItemReport$()}lastMonthFilterForCompare(){this.enableComparison=!0;const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDateForCompare=t,this.endDateForCompare=r,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last month"),this.reloadService.needRefreshSalesByItemReport$()}lastYearFilterForCompare(){this.enableComparison=!0;const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDateForCompare=r,this.endDateForCompare=n,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Last Year"),this.reloadService.needRefreshSalesByItemReport$()}weekToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date,this.startDateForCompare.setDate(this.startDateForCompare.getDate()-(6==this.startDateForCompare.getDay()?7:(this.startDateForCompare.getDay()+1)%7)),this.startDateForCompare.setHours(0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Week to date"),this.reloadService.needRefreshSalesByItemReport$()}monthToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Month to date"),this.reloadService.needRefreshSalesByItemReport$()}yearToDateFilterForCompare(){this.enableComparison=!0,this.startDateForCompare=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDateForCompare=this.today,this.onDateChangeForCompare(this.startDateForCompare,this.endDateForCompare,!0,"Year to date"),this.reloadService.needRefreshSalesByItemReport$()}onChangeForCompare(t){this.enableComparison=!0,this.dateRangeFilterForCompare="Custom",this.startDateForCompare=t[0],this.endDateForCompare=t[1],this.reloadService.needRefreshSalesByItemReport$()}onDateChangeForCompare(t,r,n,i){const s=this.utilsService.getDateString(t,"DD MMM-YYYY"),g=this.utilsService.getDateString(r,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilterForCompare=i):(this.dateRangeFilterForCompare=null,this.dateRangeCalFilter=s+" - "+g),this.reloadService.needRefreshSalesByItemReport$()}chartClicked({event:t,active:r}){console.log(t,r)}chartHovered({event:t,active:r}){console.log(t,r)}exportToExcel(){const t=this.utilsService.getDateString(new Date),r=c.P6.json_to_sheet(this.products),n=c.P6.book_new();c.P6.book_append_sheet(n,r,"Sales"),c.NC(n,`Products_${t}.xlsx`)}clearSalesChanelFilter(){this.salesChanelFilter=null,this.reloadService.needRefreshProduct$()}clearCategoryFilter(){var t;null===(t=this.filter)||void 0===t||delete t.productType,this.categoryFilter=null,this.reloadService.needRefreshProduct$()}clearVendorFilter(){var t;null===(t=this.filter)||void 0===t||delete t.vendor,this.vendorFilter=null,this.reloadService.needRefreshProduct$()}clearOriginFilter(){var t;null===(t=this.filter)||void 0===t||delete t.country,this.originFilter=null,this.reloadService.needRefreshProduct$()}clearBrandFilter(){var t;null===(t=this.filter)||void 0===t||delete t.brand,this.brandFilter=null,this.reloadService.needRefreshProduct$()}clearAllFilters(){this.categoryFilter=null,this.vendorFilter=null,this.originFilter=null,this.brandFilter=null,this.filter=null,this.dateRangeFilter="Set Date",this.dateRangeFilterForCompare="Set Compare Date",this.clearAllFilter=!1,this.reloadService.needRefreshProduct$()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.M),e.Y36(j),e.Y36(w.f),e.Y36(q.F),e.Y36(Q.T),e.Y36(U.n),e.Y36(B.c),e.Y36(k.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sales-by-order"]],viewQuery:function(t,r){if(1&t&&(e.Gf(er,5),e.Gf(tr,5)),2&t){let n;e.iGM(n=e.CRH())&&(r.searchInput=n.first),e.iGM(n=e.CRH())&&(r.searchForm=n.first)}},decls:177,vars:41,consts:[["nz-row","","nzGutter","16",1,"header_title"],["nz-col","","nzXs","12",1,"mb15"],[1,"report_export"],["nzCompact",""],["nz-button","","nzType","default","printTitle","Sales By Item","printSectionId","inv_print","ngxPrint","",3,"useExistingCss"],[1,"las","la-lg","la-print"],["nz-button","","nzType","default",3,"click"],[1,"las","la-lg","la-file-export"],["nz-col","","nzXs","24"],[1,"date_choose"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-lg","la-calendar"],[2,"padding","0 5px"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzSize","small"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","ngModelChange"],["nz-button","","nzType","primary"],["dateMenu2","nzDropdownMenu"],["id","inv_print","nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzMd","24","nzXXl","8",1,"mb15"],["nz-row","","nzGutter","8"],["nz-col","","nzXs","6","nzMd","12","nzXXl","12",1,"mb15"],[4,"ngIf"],["nz-col","","nzXs","24","nzMd","24","nzXXl","16",1,"mb15"],["nzGutter","0"],["nz-col","","nzXs","24","nzMd","24",1,"mb15"],["nzSize","small","nzTitle","Sales by Item",3,"nzExtra"],["nz-row","","nzGutter","16"],[1,"filter_atea"],[3,"click"],["searchForm","ngForm"],["nz-input","","id","searchInput","type","text","placeholder","Search here...","name","searchTerm","autocomplete","off","ngModel","","required","",3,"focus"],["searchInput",""],[1,"las","la-angle-down"],["productTypeMenu","nzDropdownMenu"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["vendorMenu","nzDropdownMenu"],["countryMenu","nzDropdownMenu"],["statusMenu","nzDropdownMenu"],["brandMenu","nzDropdownMenu"],[1,"entry_query_filter"],[3,"click",4,"ngIf"],[3,"data"],["nz-row","","nzGutter","0"],["nz-col","","nzXs","24","nzMd","24","nzXXl","24",1,"mb15"],["nzSize","small",4,"ngIf"],["totalSalesItems",""],[1,"las","la-times",3,"click"],["baseChart","","type","bar",1,"chart",3,"data","chartHover","chartClick"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Sales by Item"),e.qZA()(),e.TgZ(4,"div",1)(5,"div",2)(6,"nz-input-group",3)(7,"button",4),e._UZ(8,"i",5),e._uU(9," Print "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return r.exportToExcel()}),e._UZ(11,"i",7),e._uU(12," Export "),e.qZA()()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"button",10),e._UZ(16,"i",11),e._uU(17),e.qZA(),e.TgZ(18,"span",12),e._uU(19," ~ "),e.qZA(),e.TgZ(20,"button",10),e._UZ(21,"i",11),e._uU(22),e.qZA(),e.TgZ(23,"nz-dropdown-menu",13,14)(25,"div",15)(26,"ul",16)(27,"li",17),e.NdJ("click",function(){return r.todayFilter()}),e._uU(28,"Today"),e.qZA(),e.TgZ(29,"li",17),e.NdJ("click",function(){return r.yesterdayFilter()}),e._uU(30,"Yesterday"),e.qZA(),e.TgZ(31,"li",17),e.NdJ("click",function(){return r.lastWeekFilter()}),e._uU(32,"Last 7 days"),e.qZA(),e.TgZ(33,"li",17),e.NdJ("click",function(){return r.lastThirtyDaysFilter()}),e._uU(34,"Last 30 days"),e.qZA(),e.TgZ(35,"li",17),e.NdJ("click",function(){return r.lastThreeMonthFilter()}),e._uU(36,"Last 90 days"),e.qZA(),e.TgZ(37,"li",17),e.NdJ("click",function(){return r.lastMonthFilter()}),e._uU(38,"Last month"),e.qZA(),e.TgZ(39,"li",17),e.NdJ("click",function(){return r.lastYearFilter()}),e._uU(40,"Last year"),e.qZA(),e.TgZ(41,"li",17),e.NdJ("click",function(){return r.weekToDateFilter()}),e._uU(42,"Week to date"),e.qZA(),e.TgZ(43,"li",17),e.NdJ("click",function(){return r.monthToDateFilter()}),e._uU(44,"Month to date"),e.qZA(),e.TgZ(45,"li",17),e.NdJ("click",function(){return r.yearToDateFilter()}),e._uU(46,"Year to date"),e.qZA()(),e.TgZ(47,"div",18)(48,"nz-card",19)(49,"nz-range-picker",20),e.NdJ("ngModelChange",function(i){return r.rangeDate=i})("ngModelChange",function(i){return r.onChange(i)}),e.qZA(),e._UZ(50,"br"),e.TgZ(51,"button",21),e._uU(52,"Apply"),e.qZA()()()()(),e.TgZ(53,"nz-dropdown-menu",13,22)(55,"div",15)(56,"ul",16)(57,"li",17),e.NdJ("click",function(){return r.todayFilterForCompare()}),e._uU(58,"Today"),e.qZA(),e.TgZ(59,"li",17),e.NdJ("click",function(){return r.yesterdayFilterForCompare()}),e._uU(60,"Yesterday"),e.qZA(),e.TgZ(61,"li",17),e.NdJ("click",function(){return r.lastWeekFilterForCompare()}),e._uU(62,"Last 7 days"),e.qZA(),e.TgZ(63,"li",17),e.NdJ("click",function(){return r.lastThirtyDaysFilterForCompare()}),e._uU(64,"Last 30 days"),e.qZA(),e.TgZ(65,"li",17),e.NdJ("click",function(){return r.lastThreeMonthFilterForCompare()}),e._uU(66,"Last 90 days"),e.qZA(),e.TgZ(67,"li",17),e.NdJ("click",function(){return r.lastMonthFilterForCompare()}),e._uU(68,"Last month"),e.qZA(),e.TgZ(69,"li",17),e.NdJ("click",function(){return r.lastYearFilterForCompare()}),e._uU(70,"Last year"),e.qZA(),e.TgZ(71,"li",17),e.NdJ("click",function(){return r.weekToDateFilterForCompare()}),e._uU(72,"Week to date"),e.qZA(),e.TgZ(73,"li",17),e.NdJ("click",function(){return r.monthToDateFilterForCompare()}),e._uU(74,"Month to date"),e.qZA(),e.TgZ(75,"li",17),e.NdJ("click",function(){return r.yearToDateFilterForCompare()}),e._uU(76,"Year to date"),e.qZA()(),e.TgZ(77,"div",18)(78,"nz-card",19)(79,"nz-range-picker",20),e.NdJ("ngModelChange",function(i){return r.rangeDate=i})("ngModelChange",function(i){return r.onChangeForCompare(i)}),e.qZA(),e._UZ(80,"br"),e.TgZ(81,"button",21),e._uU(82,"Apply"),e.qZA()()()()()()()(),e.TgZ(83,"div",23)(84,"div",24)(85,"div",25)(86,"div",26)(87,"nz-card")(88,"h3"),e._uU(89,"Total Invoiced"),e.qZA(),e.TgZ(90,"h2"),e._uU(91),e.YNc(92,rr,2,1,"span",27),e.qZA()()(),e.TgZ(93,"div",26)(94,"nz-card")(95,"h3"),e._uU(96,"Total Returned"),e.qZA(),e.TgZ(97,"h2"),e._uU(98),e.YNc(99,nr,2,1,"span",27),e.qZA()()(),e.TgZ(100,"div",26)(101,"nz-card")(102,"h3"),e._uU(103,"Net Sales"),e.qZA(),e.TgZ(104,"h2"),e._uU(105),e.YNc(106,or,2,1,"span",27),e.qZA()()(),e.TgZ(107,"div",26)(108,"nz-card")(109,"h3"),e._uU(110,"Total Sales Amount"),e.qZA(),e.TgZ(111,"h2"),e._uU(112),e.ALo(113,"numberSuffix"),e.YNc(114,ir,3,4,"span",27),e.qZA()()()()(),e.TgZ(115,"div",28)(116,"nz-row",29)(117,"div",30)(118,"nz-card",31)(119,"div",32)(120,"div",30)(121,"div",33)(122,"form",34,35),e.NdJ("click",function(i){return r.onClickSearchArea(i)}),e.TgZ(124,"input",36,37),e.NdJ("focus",function(i){return r.handleFocus(i)}),e.qZA()(),e.TgZ(126,"nz-input-group",3)(127,"button",10),e._uU(128," Category "),e._UZ(129,"i",38),e.qZA(),e.TgZ(130,"nz-dropdown-menu",null,39)(132,"ul",16),e.YNc(133,ar,2,1,"li",40),e.qZA()(),e.TgZ(134,"button",10),e._uU(135," Vendor "),e._UZ(136,"i",38),e.qZA(),e.TgZ(137,"nz-dropdown-menu",null,41)(139,"ul",16),e.YNc(140,sr,2,1,"li",40),e.qZA()(),e.TgZ(141,"button",10),e._uU(142," Origin "),e._UZ(143,"i",38),e.qZA(),e.TgZ(144,"nz-dropdown-menu",null,42)(146,"ul",16),e.YNc(147,lr,2,1,"li",40),e.qZA()(),e.TgZ(148,"button",10),e._uU(149," Sales Chanel "),e._UZ(150,"i",38),e.qZA(),e.TgZ(151,"nz-dropdown-menu",null,43)(153,"ul",16),e.YNc(154,cr,2,1,"li",40),e.qZA()(),e.TgZ(155,"button",10),e._uU(156," Brand "),e._UZ(157,"i",38),e.qZA(),e.TgZ(158,"nz-dropdown-menu",null,44)(160,"ul",16),e.YNc(161,dr,2,1,"li",40),e.qZA()()()()(),e.TgZ(162,"div",45)(163,"ul"),e.YNc(164,pr,3,1,"li",27),e.YNc(165,hr,3,1,"li",27),e.YNc(166,ur,3,1,"li",27),e.YNc(167,_r,3,1,"li",27),e.YNc(168,gr,3,1,"li",27),e.qZA(),e.YNc(169,mr,2,0,"span",46),e.qZA(),e.TgZ(170,"div",30),e._UZ(171,"app-table",47),e.qZA()()()()()()(),e.TgZ(172,"div",48)(173,"div",49),e.YNc(174,Cr,2,1,"nz-card",50),e.qZA()(),e.YNc(175,fr,2,1,"ng-template",null,51,e.W1O)),2&t){const n=e.MAs(24),i=e.MAs(54),s=e.MAs(131),g=e.MAs(138),f=e.MAs(145),D=e.MAs(152),M=e.MAs(159),L=e.MAs(176);e.xp6(7),e.Q6J("useExistingCss",!0),e.xp6(8),e.Q6J("nzDropdownMenu",n),e.xp6(2),e.hij(" ",r.dateRangeFilter," "),e.xp6(3),e.Q6J("nzDropdownMenu",i),e.xp6(2),e.hij(" ",r.dateRangeFilterForCompare," "),e.xp6(27),e.Q6J("ngModel",r.rangeDate)("nzPopupStyle",e.DdM(39,V)),e.xp6(30),e.Q6J("ngModel",r.rangeDate)("nzPopupStyle",e.DdM(40,V)),e.xp6(12),e.hij(" ",r.getTotalInvoiced(r.products)," "),e.xp6(1),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij("",r.getTotalReturned(r.products)," "),e.xp6(1),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij(" ",r.getTotalNetSale(r.products)," "),e.xp6(1),e.Q6J("ngIf",r.enableComparison),e.xp6(6),e.hij(" ",e.xi3(113,36,r.getTotalSales(r.products),2)," "),e.xp6(2),e.Q6J("ngIf",r.enableComparison),e.xp6(4),e.Q6J("nzExtra",L),e.xp6(9),e.Q6J("nzDropdownMenu",s),e.xp6(6),e.Q6J("ngForOf",r.productTypes),e.xp6(1),e.Q6J("nzDropdownMenu",g),e.xp6(6),e.Q6J("ngForOf",r.vendors),e.xp6(1),e.Q6J("nzDropdownMenu",f),e.xp6(6),e.Q6J("ngForOf",r.countries),e.xp6(1),e.Q6J("nzDropdownMenu",D),e.xp6(6),e.Q6J("ngForOf",r.salesChanelOptions),e.xp6(1),e.Q6J("nzDropdownMenu",M),e.xp6(6),e.Q6J("ngForOf",r.brands),e.xp6(3),e.Q6J("ngIf",r.categoryFilter),e.xp6(1),e.Q6J("ngIf",r.salesChanelFilter),e.xp6(1),e.Q6J("ngIf",r.vendorFilter),e.xp6(1),e.Q6J("ngIf",r.originFilter),e.xp6(1),e.Q6J("ngIf",r.brandFilter),e.xp6(1),e.Q6J("ngIf",r.salesChanelFilter||r.categoryFilter||r.vendorFilter||r.originFilter||r.brandFilter||r.clearAllFilter),e.xp6(2),e.Q6J("data",r.products),e.xp6(3),e.Q6J("ngIf",!r.chartDataLoading)}},dependencies:[u.sg,u.O5,X,Z.Zp,Z.gB,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.On,p.F,I.ix,N.w,Y.dQ,x.wO,x.r9,F.cm,F.RR,F.wA,S.uw,S.wS,T.t3,T.SK,O.bd,b.jh,z.I,J],styles:[".entry_query_filter[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px;max-height:23px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.mb15[_ngcontent-%COMP%]{margin-bottom:15px}.report_export[_ngcontent-%COMP%]{float:right}.header_title[_ngcontent-%COMP%]{padding:15px 0}.date_choose[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.date_choose[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 5px}.date_choose[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px 0 0}.date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]{display:flex;align-items:center}.filter_atea[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:250px}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px;font-size:16px}.single_report[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();var Fr=d(68132),Dr=d(73433);const vr=["searchInput"],Tr=["searchForm"];function Zr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearDateFilter())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.dateRangeFilter?t.dateRangeFilter:t.dateRangeCalFilter," ")}}function xr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearAllFilters())}),e._uU(1," Clear All "),e.qZA()}}function Sr(o,a){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td"),e.TgZ(2,"td"),e._uU(3),e.ALo(4,"slice"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"orderStatus"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA()()),2&o){const t=a.$implicit,r=e.oxw(2);e.xp6(3),e.hij(" ",t.name.length>10?e.Dn7(4,7,t.name,0,10)+"...":r.str," "),e.xp6(3),e.Oqu(t.sku),e.xp6(2),e.Oqu(e.lcZ(9,11,t.deliveryStatus)),e.xp6(3),e.Oqu(t.quantity),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.tax),e.xp6(2),e.Oqu((t.price+t.tax)*t.quantity)}}function Ar(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",46),e.NdJ("nzExpandChange",function(n){const s=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.onExpandChange(s._id,n))}),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e._UZ(8,"td")(9,"td")(10,"td")(11,"td"),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"currency"),e.qZA()(),e.TgZ(15,"tr",47)(16,"nz-table",48)(17,"thead")(18,"tr"),e._UZ(19,"th")(20,"th"),e.TgZ(21,"th"),e._uU(22,"Sku"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Status"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Qty"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Unit Price"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Tax"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Item Value"),e.qZA()()(),e.TgZ(33,"tbody"),e.YNc(34,Sr,18,13,"tr",40),e.qZA()()(),e.BQk()}if(2&o){const t=a.$implicit,r=e.oxw();e.xp6(2),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(2),e.Oqu(e.xi3(5,8,t.createdAt,"medium")),e.xp6(3),e.Oqu(t.orderId),e.xp6(6),e.Oqu(e.xi3(14,11,t.totalAmount,"BDT")),e.xp6(2),e.Q6J("nzExpand",r.expandSet.has(t._id)),e.xp6(1),e.Q6J("nzData",t.orderedItems)("nzShowPagination",!1),e.xp6(18),e.Q6J("ngForOf",t.orderedItems)}}function Mr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"nz-card",31)(1,"canvas",49),e.NdJ("chartHover",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartHovered(n))})("chartClick",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.chartClicked(n))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("data",t.barChartData)}}function Pr(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",t.orders.length," Orders")}}const Rr=function(){return{boxShadow:"none"}},Or=[{path:"",component:Wt},{path:"sales-by-order",component:yr},{path:"order-report",component:Ke},{path:"inventory-report",component:ye},{path:"sales-order-report",component:(()=>{class o{constructor(t,r,n,i,s,g){this.reloadService=t,this.utilsService=r,this.countryService=n,this.vendorService=i,this.brandService=s,this.orderService=g,this.filter=null,this.barChartLabels=[],this.invoicedData=[],this.returnedData=[],this.invoicedDataForCompare=[],this.returnedDataForCompare=[],this.barChartData={labels:this.barChartLabels,datasets:[{data:this.invoicedData,label:"Invoice "},{data:this.returnedData,label:"Return"}]},this.chooseDate=new Date,this.rangeDate=null,this.chartType="line",this.orders=[],this.countries=[],this.brands=[],this.vendors=[],this.productTypes=[],this.chartDataLoading=!0,this.clearAllFilter=!1,this.today=new Date,this.dataFormDateRange=new p.cw({start:new p.NI,end:new p.NI}),this.filterDate=new Date,this.sortQuery={createdAt:-1},this.isFocused=!1,this.searchOrders=[],this.isOpen=!1,this.isLoading=!1,this.overlay=!1,this.currentPage=1,this.productsPerPage=10,this.searchQuery=null,this.holdPrevData=[],this.expandSet=new Set,this.disabledDate=f=>(0,m.Z)(f,this.today)>0}ngOnInit(){this.reloadService.refreshOrder$.subscribe(t=>{this.getAllOrders()}),this.getAllOrders(),this.getAllCountries(),this.getAllVendors(),this.getAllBrands()}getAllCountries(){this.countryService.getAll().subscribe(t=>{this.countries=t.data})}getAllVendors(){this.vendorService.getAll().subscribe(t=>{this.vendors=t.data})}getAllBrands(){this.brandService.getAll().subscribe(t=>{this.brands=t.data})}getAllOrders(){this.chartDataLoading=!0,this.orderService.getAllOrdersByAdmin(null,this.sortQuery,this.filter).subscribe(t=>{this.orders=t.data,this.holdPrevData=t.data,this.totalProducts=t.count})}onCountrySelect(t){this.filter=Object.assign(Object.assign({},this.filter),{country:t._id}),this.reloadService.needRefreshProduct$()}onVendorSelect(t){this.filter=Object.assign(Object.assign({},this.filter),{vendor:t._id}),this.reloadService.needRefreshProduct$()}onCategorySelect(t){this.filter=Object.assign(Object.assign({},this.filter),{productType:t._id}),this.reloadService.needRefreshProduct$()}onBrandSelect(t){this.filter=Object.assign(Object.assign({},this.filter),{brand:t._id}),this.reloadService.needRefreshProduct$()}onClickSearchArea(t){t.stopPropagation()}handleFocus(t){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchOrders.length>0&&this.setPanelState(t),this.isFocused=!0)}setPanelState(t){t&&t.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchOrders.length>0&&(this.isOpen=!0,this.overlay=!0)}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,A.j)("searchTerm"),(0,y.b)(200),(0,R.x)(),(0,l.w)(r=>{const n={currentPage:this.currentPage.toString(),pageSize:this.productsPerPage.toString()};return this.searchQuery=r.trim(),console.log(this.searchQuery),this.searchQuery?this.orderService.getOrdersBySearch(this.searchQuery,n,this.filter):(this.searchOrders=[],this.orders=this.holdPrevData,this.searchOrders=[],this.searchQuery=null,_.E)})).subscribe(r=>{this.isLoading=!1,this.searchOrders=r.data,this.orders=r.data,this.searchOrders.length>0&&(this.isOpen=!0,this.overlay=!0,this.reloadService.needRefreshSalesByItemReport$())},()=>{this.isLoading=!1})}chartClicked({event:t,active:r}){console.log(t,r)}chartHovered({}){}exportToExcel(){const t=this.utilsService.getDateString(new Date),r=c.P6.json_to_sheet(this.orders),n=c.P6.book_new();c.P6.book_append_sheet(n,r,"Sales"),c.NC(n,`Products_${t}.xlsx`)}onExpandChange(t,r){r?this.expandSet.add(t):this.expandSet.delete(t)}getTotalValue(){let t=0;for(let r=0;r<this.orders.length;r++)t+=this.orders[r].totalAmount*this.orders[r].totalAmount;return t||0}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.filter=Object.assign(Object.assign({},this.filter),{checkoutDate:{$gte:this.startDate,$lt:this.today}}),this.reloadService.needRefreshOrder$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshOrder$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshOrder$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshOrder$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshOrder$()}lastMonthFilter(){const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=t,this.endDate=r,this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshOrder$()}lastYearFilter(){const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDate=r,this.endDate=n,this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshOrder$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshOrder$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshOrder$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshOrder$()}onDateChange(t,r,n,i){const s=this.utilsService.getDateString(t,"DD MMM-YYYY"),g=this.utilsService.getDateString(r,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilter=i):(this.dateRangeFilter=null,this.dateRangeCalFilter=s+" - "+g),this.filter=Object.assign(Object.assign({},this.filter),r?{checkoutDate:{$gte:t,$lte:r}}:{checkoutDate:{$eq:t}}),this.reloadService.needRefreshOrder$()}clearAllFilters(){this.sortQuery=null,this.filter=null,this.dateRangeFilter=null,this.dateRangeCalFilter&&(this.dateRangeCalFilter=null),this.clearAllFilter=!1,this.reloadService.needRefreshOrder$()}clearDateFilter(){this.dateRangeFilter=null,this.dateRangeCalFilter=null,delete this.filter.checkoutDate,this.reloadService.needRefreshOrder$()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w.f),e.Y36(q.F),e.Y36(Q.T),e.Y36(U.n),e.Y36(k.c),e.Y36(Fr.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sales-order-report"]],viewQuery:function(t,r){if(1&t&&(e.Gf(vr,5),e.Gf(Tr,5)),2&t){let n;e.iGM(n=e.CRH())&&(r.searchInput=n.first),e.iGM(n=e.CRH())&&(r.searchForm=n.first)}},decls:97,vars:16,consts:[["nz-row","","nzGutter","16",1,"header_title"],["nz-col","","nzXs","12",1,"mb15"],[1,"report_export"],["nzCompact",""],["nz-button","","nzType","default","printTitle","Sales By Item","printSectionId","inv_print","ngxPrint","",3,"useExistingCss"],[1,"las","la-lg","la-print"],["nz-button","","nzType","default",3,"click"],[1,"las","la-lg","la-file-export"],["id","inv_print","nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzMd","24","nzXXl","8",1,"mb15"],["nz-row","","nzGutter","8"],["nz-col","","nzXs","6","nzMd","12","nzXXl","12",1,"mb15"],["nz-col","","nzXs","24","nzMd","24","nzXXl","16",1,"mb15"],["nzGutter","0"],["nz-col","","nzXs","24","nzMd","24",1,"mb15"],["nzSize","small","nzTitle","Sales Order Report",3,"nzExtra"],["nz-row","","nzGutter","16"],[1,"filter_atea"],[3,"click"],["searchForm","ngForm"],["nz-input","","id","searchInput","type","text","placeholder","Search here...","name","searchTerm","autocomplete","off","ngModel","","required","",3,"focus"],["searchInput",""],[1,"date_filter"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-calendar"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzSize","small"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","nzDisabledDate","ngModelChange"],["nz-button","","nzType","primary"],["nz-col","","nzXs","24","nzMd","24","nzXXl","16",1,"entry_query_filter"],[4,"ngIf"],[3,"click",4,"ngIf"],["nzSize","small","nzTableLayout","fixed",3,"nzData"],["nzTable",""],["nzWidth","40px"],[4,"ngFor","ngForOf"],["nz-row","","nzGutter","0"],["nz-col","","nzXs","24","nzMd","24","nzXXl","24",1,"mb15"],["nzSize","small",4,"ngIf"],["totalSalesItems",""],[1,"las","la-times",3,"click"],[3,"nzExpand","nzExpandChange"],[3,"nzExpand"],[3,"nzData","nzShowPagination"],["baseChart","","type","bar",1,"chart",3,"data","chartHover","chartClick"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Sales Order Report"),e.qZA()(),e.TgZ(4,"div",1)(5,"div",2)(6,"nz-input-group",3)(7,"button",4),e._UZ(8,"i",5),e._uU(9," Print "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return r.exportToExcel()}),e._UZ(11,"i",7),e._uU(12," Export "),e.qZA()()()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11)(17,"nz-card")(18,"h3"),e._uU(19,"Total Sales Order Value"),e.qZA(),e.TgZ(20,"h2"),e._uU(21),e.ALo(22,"numberSuffix"),e.qZA()()()()(),e.TgZ(23,"div",12)(24,"nz-row",13)(25,"div",14)(26,"nz-card",15)(27,"div",16)(28,"div",14)(29,"div",17)(30,"form",18,19),e.NdJ("click",function(i){return r.onClickSearchArea(i)}),e.TgZ(32,"input",20,21),e.NdJ("focus",function(i){return r.handleFocus(i)}),e.qZA()(),e.TgZ(34,"div")(35,"ul")(36,"li",22)(37,"button",23),e._uU(38," Set Date "),e._UZ(39,"i",24),e.qZA(),e.TgZ(40,"nz-dropdown-menu",25,26)(42,"div",27)(43,"ul",28)(44,"li",29),e.NdJ("click",function(){return r.todayFilter()}),e._uU(45,"Today"),e.qZA(),e.TgZ(46,"li",29),e.NdJ("click",function(){return r.yesterdayFilter()}),e._uU(47,"Yesterday"),e.qZA(),e.TgZ(48,"li",29),e.NdJ("click",function(){return r.lastWeekFilter()}),e._uU(49,"Last 7 days"),e.qZA(),e.TgZ(50,"li",29),e.NdJ("click",function(){return r.lastThirtyDaysFilter()}),e._uU(51," Last 30 days "),e.qZA(),e.TgZ(52,"li",29),e.NdJ("click",function(){return r.lastThreeMonthFilter()}),e._uU(53," Last 90 days "),e.qZA(),e.TgZ(54,"li",29),e.NdJ("click",function(){return r.lastMonthFilter()}),e._uU(55,"Last month"),e.qZA(),e.TgZ(56,"li",29),e.NdJ("click",function(){return r.lastYearFilter()}),e._uU(57,"Last year"),e.qZA(),e.TgZ(58,"li",29),e.NdJ("click",function(){return r.weekToDateFilter()}),e._uU(59,"Week to date"),e.qZA(),e.TgZ(60,"li",29),e.NdJ("click",function(){return r.monthToDateFilter()}),e._uU(61," Month to date "),e.qZA(),e.TgZ(62,"li",29),e.NdJ("click",function(){return r.yearToDateFilter()}),e._uU(63,"Year to date"),e.qZA()(),e.TgZ(64,"div",30)(65,"nz-card",31)(66,"nz-range-picker",32),e.NdJ("ngModelChange",function(i){return r.onDateChange(i[0],i[1])})("ngModelChange",function(i){return r.filterDate=i}),e.qZA(),e._UZ(67,"br"),e.TgZ(68,"button",33),e._uU(69,"Apply"),e.qZA()()()()()()()()()(),e.TgZ(70,"div",34)(71,"ul"),e.YNc(72,Zr,3,1,"li",35),e.qZA(),e.YNc(73,xr,2,0,"span",36),e.qZA(),e.TgZ(74,"div",14)(75,"nz-table",37,38)(77,"thead")(78,"tr"),e._UZ(79,"th",39),e.TgZ(80,"th"),e._uU(81,"Date"),e.qZA(),e.TgZ(82,"th"),e._uU(83,"SO Number"),e.qZA(),e._UZ(84,"th")(85,"th")(86,"th")(87,"th"),e.TgZ(88,"th"),e._uU(89,"Total Value"),e.qZA()()(),e.TgZ(90,"tbody"),e.YNc(91,Ar,35,14,"ng-container",40),e.qZA()()()()()()()()(),e.TgZ(92,"div",41)(93,"div",42),e.YNc(94,Mr,2,1,"nz-card",43),e.qZA()(),e.YNc(95,Pr,2,1,"ng-template",null,44,e.W1O)),2&t){const n=e.MAs(41),i=e.MAs(96);e.xp6(7),e.Q6J("useExistingCss",!0),e.xp6(14),e.Oqu(e.xi3(22,12,r.getTotalValue(),2)),e.xp6(5),e.Q6J("nzExtra",i),e.xp6(11),e.Q6J("nzDropdownMenu",n),e.xp6(29),e.Q6J("ngModel",r.filterDate)("nzPopupStyle",e.DdM(15,Rr))("nzDisabledDate",r.disabledDate),e.xp6(6),e.Q6J("ngIf",r.dateRangeFilter||r.dateRangeCalFilter),e.xp6(1),e.Q6J("ngIf",r.dateRangeFilter||r.dateRangeCalFilter),e.xp6(2),e.Q6J("nzData",r.orders),e.xp6(16),e.Q6J("ngForOf",r.orders),e.xp6(3),e.Q6J("ngIf",!r.chartDataLoading)}},dependencies:[u.sg,u.O5,Z.Zp,Z.gB,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.On,p.F,I.ix,N.w,Y.dQ,x.wO,x.r9,F.cm,F.RR,F.wA,S.uw,S.wS,h.N8,h.Uo,h._C,h.h7,h.Om,h.p0,h.$Z,h.d3,h.Vk,T.t3,T.SK,O.bd,b.jh,z.I,u.OU,u.H9,u.uU,Dr.M,J],styles:[".entry_query_filter[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px;max-height:23px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.mb15[_ngcontent-%COMP%]{margin-bottom:15px}.report_export[_ngcontent-%COMP%]{float:right}.header_title[_ngcontent-%COMP%]{padding:15px 0}.date_choose[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.date_choose[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 5px}.date_choose[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px 0 0}.date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]{display:flex;align-items:center}.filter_atea[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:250px}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.filter_atea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px;font-size:16px}.filter_atea[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0}.filter_atea[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;list-style:none}.single_report[_ngcontent-%COMP%]{overflow:hidden}"]}),o})()},{path:"profit-loss-report",component:Ut}];let br=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.Bz.forChild(Or),C.Bz]}),o})();var zr=d(60597),wr=d(16102),qr=d(23059),Qr=d(24586);let Ur=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,br,zr.m,wr.P,b.vQ,qr.a4,z.K,Qr.D]}),o})()},31913:(E,P,d)=>{d.d(P,{i:()=>u});var u=(()=>{return(C=u||(u={}))[C.PENDING=0]="PENDING",C[C.CANCEL=1]="CANCEL",C[C.CONFIRM=2]="CONFIRM",C[C.PARTIAL_SHIPPING=3]="PARTIAL_SHIPPING",C[C.SHIPPING=4]="SHIPPING",C[C.DELIVERED=5]="DELIVERED",C[C.RETURNING=6]="RETURNING",C[C.RETURNED=7]="RETURNED",C[C.PARTIAL_RETURNED=8]="PARTIAL_RETURNED",C[C.REFUND=9]="REFUND",C[C.EDIT=10]="EDIT",u;var C})()},68132:(E,P,d)=>{d.d(P,{p:()=>A});var u=d(40520),C=d(92340),p=d(5e3);const c=C.N.apiBaseLink+"/api/order/";let A=(()=>{class y{constructor(l){this.httpClient=l}editOrder(l){return this.httpClient.post(c+"edit-order",l)}placeOrder(l){return this.httpClient.post(c+"place-order",l)}updateOrder(l){return this.httpClient.post(c+"update-order",l)}placeOrderRequest(l){return this.httpClient.post(c+"place-order-request",l)}placeTempOrder(l){return this.httpClient.post(c+"place-temp-order",l)}updateOrderSessionKey(l,_){return this.httpClient.post(c+"update-session-key/"+l+"/"+_,{})}getAllOrdersByUser(l,_,m,e){let v=new u.LE;return v=v.append("q",l),v=v.append("status",e),_&&(v=v.append("pageSize",_.pageSize),v=v.append("currentPage",_.currentPage)),this.httpClient.get(c+"get-all-orders-by-user",{params:v})}getAllOrdersByUserId(l){return this.httpClient.get(c+"get-all-orders-by-userId/"+l)}getAllCanceledOrdersByUser(l,_,m){return this.httpClient.get(c+"get-all-canceled-orders-by-user")}getAllOrdersByUserOrderId(l,_){let m=new u.LE;return l&&(console.log("param id ",l),m=m.append("id",l)),_&&(m=m.append("select",_)),this.httpClient.get(c+"get-orders-by-user-orderId",{params:m})}getAllOrdersofyUserByAdmin(l,_,m){let e=new u.LE;return m&&(e=e.append("userId",m)),l?(e=e.append("pageSize",l.pageSize),e=e.append("page",l.currentPage),_&&(e=e.append("select",_)),this.httpClient.get(c+"get-all-orders-of-user-by-admin",{params:e})):(_&&(e=e.append("select",_)),this.httpClient.get(c+"get-all-orders-of-user-by-admin",{params:e}))}getOrderDetails(l){return this.httpClient.get(c+"get-order-details/"+l)}getOrderDetailsByOrderId(l){return this.httpClient.get(c+"get-order-details-by-orderId/"+l)}getrequestOrderDetails(l){return this.httpClient.get(c+"get-request-order-details/"+l)}cancelOrderByUser(l){return this.httpClient.put(c+"cancel-order-by-user/"+l,{})}deleteOrderByAdmin(l){return this.httpClient.delete(c+"delete-order-by-admin/"+l)}getAllTransactionByUser(l,_){let m=new u.LE;return l?(m=m.append("pageSize",l.pageSize),m=m.append("page",l.currentPage),_&&(m=m.append("select",_)),this.httpClient.get(c+"get-all-transactions-by-user",{params:m})):(_&&(m=m.append("select",_)),this.httpClient.get(c+"get-all-transactions-by-user",{params:m}))}getAllOrdersByAdmin(l,_,m,e){return this.httpClient.post(c+"get-all-orders-by-admin",{paginate:l,sort:_,filter:m,select:e})}getOrdersBySearch(l,_,m){let e=new u.LE;return e=e.append("q",l),_&&(e=e.append("pageSize",_.pageSize),e=e.append("currentPage",_.currentPage)),this.httpClient.post(c+"get-order-by-search",{filter:m},{params:e})}getSelectedOrderDetails(l){return this.httpClient.post(c+"get-selected-order-details",{selectedIds:l})}getAllOrdersByAdminNoPaginate(){return this.httpClient.get(c+"get-all-orders-by-admin-no-paginate")}changeOrderStatus(l){return this.httpClient.put(c+"change-order-status",l)}getAllTransactionByAdmin(l,_){let m=new u.LE;return l?(m=m.append("pageSize",l.pageSize),m=m.append("page",l.currentPage),_&&(m=m.append("select",_)),this.httpClient.get(c+"get-all-transaction-by-admin",{params:m})):(_&&(m=m.append("select",_)),this.httpClient.get(c+"get-all-transaction-by-admin",{params:m}))}testSslSmsApi(){return this.httpClient.get(c+"sent-test-ssl-message")}updateOrderById(l){return this.httpClient.put(c+"update-order-by-id",l)}updateMultipleOrderById(l){return this.httpClient.post(c+"update-multiple-order-by-id",l)}updateRequestOrderById(l){return this.httpClient.put(c+"update-request-order-by-id",l)}payPayment(l){return this.httpClient.post(c+"pay-payment",l)}sendNotification(l){return this.httpClient.post(c+"confirm-notification",l)}addToOrderTimeline(l,_){return this.httpClient.post(c+"add-to-order-timeline",{data:l,orderId:_})}updateTag(l,_){return this.httpClient.post(c+"update-tag",{orderId:l,tag:_})}setFilterVariable(l){this.filterVariable=l}getFilterVariable(){let l=this.filterVariable;return this.clearFilterVariable(),l}clearFilterVariable(){this.filterVariable=void 0}}return y.\u0275fac=function(l){return new(l||y)(p.LFG(u.eN))},y.\u0275prov=p.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},73433:(E,P,d)=>{d.d(P,{M:()=>p});var u=d(31913),C=d(5e3);let p=(()=>{class c{transform(y,R){switch(y){case u.i.PENDING:return"Pending";case u.i.CONFIRM:return"Confirmed";case u.i.PARTIAL_SHIPPING:return"Partial Invoiced";case u.i.SHIPPING:return"Invoiced";case u.i.DELIVERED:return"Delivered";case u.i.CANCEL:return"Canceled";case u.i.RETURNING:return"Returning";case u.i.RETURNED:return"Returned";case u.i.PARTIAL_RETURNED:return"Partial Returned";case u.i.REFUND:return"Refund";default:return"-"}}}return c.\u0275fac=function(y){return new(y||c)},c.\u0275pipe=C.Yjl({name:"orderStatus",type:c,pure:!0}),c})()}}]);