"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[2831],{12831:(C,m,s)=>{s.r(m),s.d(m,{AllInvoiceModule:()=>rt});var o=s(69808),r=s(99826),_=s(93075),D=s(60515),y=s(94813),v=s(78372),I=s(71884),N=s(63900),u=s(31913),g=s(4602),b=s(37623),d=(()=>{return(n=d||(d={})).COD="COD",n.ADVANCE="ADVANCE",n.PAID="PAID",n.UNPAID="UNPAID",n.PENDING="PENDING",n.PARTIAL_PAID="PARTIAL_PAID",n.REFUNDED="REFUNDED",n.REFUND="REFUND",n.OVERDUE="OVERDUE",n.CANCEL="CANCEL",n.CONFIRM="CONFIRM",n.PROCESSING="PROCESSING",n.SHIPPING="SHIPPING",n.DELIVERED="DELIVERED",n.RETURNING="RETURNING",n.EXPIRED="EXPIRED",n.HIGHTOLOW="HIGHTOLOW",n.LOWTOHIGH="LOWTOHIGH",n.OLDESTFIRST="OLDESTFIRST",n.NEWESTFIRST="NEWESTFIRST",n.ZTOA="ZTOA",n.ATOZ="ATOZ",n.AMOUNTHIGHTOLOW="AMOUNTHIGHTOLOW",n.AMOUNTLOWTOHIGH="AMOUNTLOWTOHIGH",d;var n})(),t=s(5e3),x=s(49111),O=s(57267),M=s(61293),E=s(11047),F=s(76042),Z=s(82683),z=s(92643),S=s(90868),R=s(64219),A=s(63677),T=s(92905),P=s(50939),k=s(77484),U=s(73433),w=s(81197);const q=["searchForm"],G=["searchInput"];function V(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"li",21),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.filterByPaymentStatus(l))}),t._uU(1),t.qZA()}if(2&n){const e=c.$implicit;t.xp6(1),t.hij(" ",e.viewValue," ")}}function L(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"li",21),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.filterByOrderStatus(l))}),t._uU(1),t.qZA()}if(2&n){const e=c.$implicit;t.xp6(1),t.hij(" ",e.viewValue," ")}}function H(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.clearDateFilter())}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.dateRangeFilter?e.dateRangeFilter:e.dateRangeCalFilter," ")}}function J(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.clearPaymentStatusFilter())}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.paymentStatusFilter," ")}}function Y(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.clearDeliveryStatusFilter())}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.deliveryStatusFilter," ")}}function $(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.clearShippingStatusFilter())}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.shippingStatusFilter," ")}}function j(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"span",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.clearAllFilters())}),t._uU(1," Clear All "),t.qZA()}}function K(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",43),t.NdJ("nzCheckedChange",function(i){const p=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.onItemChecked(p.invoiceId,i))}),t.qZA(),t.TgZ(2,"td")(3,"a",2),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.onInvoiceDetailsChanged(p.event,l.invoiceId))}),t._uU(4),t.qZA(),t.TgZ(5,"h5"),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"td")(9,"span",44),t._uU(10),t.ALo(11,"orderStatus"),t.qZA()(),t.TgZ(12,"td")(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.ALo(25,"paymentStatus"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA()()}if(2&n){const e=c.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("nzChecked",a.setOfCheckedId.has(e.invoiceId)),t.xp6(3),t.Oqu(e.invoiceId),t.xp6(2),t.Oqu(t.xi3(7,14,e.invoiceDate,"dd/MM/yyyy")),t.xp6(4),t.Oqu(t.lcZ(11,17,e.deliveryStatus)),t.xp6(3),t.Tol(e.shipped?"btn":"shipped"),t.xp6(1),t.Oqu(e.shipped?"Shipped":"Ready To Shipped"),t.xp6(2),t.Oqu(e.shippingCarrier),t.xp6(2),t.hij("",e.total-e.paidAmount-e.writeOff," TK"),t.xp6(2),t.Oqu(e.orderNumber),t.xp6(2),t.hij("",e.total," TK"),t.xp6(2),t.Oqu(t.lcZ(25,19,e.paymentStatus)),t.xp6(3),t.hij("",e.paidAmount," TK"),t.xp6(2),t.hij("",e.writeOff," TK")}}const Q=function(){return{boxShadow:"none"}};function W(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"nz-tab",10)(1,"div",11)(2,"form",null,12)(4,"input",13,14),t.NdJ("focus",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.handleFocus(i))}),t.qZA()(),t.TgZ(6,"ul")(7,"li")(8,"button",15),t._uU(9," Set Date "),t._UZ(10,"i",16),t.qZA(),t.TgZ(11,"nz-dropdown-menu",17,18)(13,"div",19)(14,"ul",20)(15,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.todayFilter())}),t._uU(16,"Today"),t.qZA(),t.TgZ(17,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.yesterdayFilter())}),t._uU(18,"Yesterday"),t.qZA(),t.TgZ(19,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.lastWeekFilter())}),t._uU(20,"Last 7 days"),t.qZA(),t.TgZ(21,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.lastThirtyDaysFilter())}),t._uU(22," Last 30 days "),t.qZA(),t.TgZ(23,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.lastThreeMonthFilter())}),t._uU(24," Last 90 days "),t.qZA(),t.TgZ(25,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.lastMonthFilter())}),t._uU(26,"Last month"),t.qZA(),t.TgZ(27,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.lastYearFilter())}),t._uU(28,"Last year"),t.qZA(),t.TgZ(29,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.weekToDateFilter())}),t._uU(30,"Week to date"),t.qZA(),t.TgZ(31,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.monthToDateFilter())}),t._uU(32," Month to date "),t.qZA(),t.TgZ(33,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.yearToDateFilter())}),t._uU(34,"Year to date"),t.qZA()(),t.TgZ(35,"div",22)(36,"nz-card",6)(37,"nz-range-picker",23),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.onDateChange(i[0],i[1]))})("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.filterDate=i)}),t.qZA(),t._UZ(38,"br"),t.TgZ(39,"button",24),t._uU(40,"Apply"),t.qZA()()()()()(),t.TgZ(41,"li")(42,"button",25),t._uU(43," Payment Status "),t._UZ(44,"i",26),t.qZA(),t.TgZ(45,"nz-dropdown-menu",null,27)(47,"ul",20),t.YNc(48,V,2,1,"li",28),t.qZA()()(),t.TgZ(49,"li")(50,"button",25),t._uU(51," Delivery Status "),t._UZ(52,"i",26),t.qZA(),t.TgZ(53,"nz-dropdown-menu",null,29)(55,"ul",20),t.YNc(56,L,2,1,"li",28),t.qZA()()(),t.TgZ(57,"li")(58,"button",25),t._uU(59," Shipping Status "),t._UZ(60,"i",26),t.qZA(),t.TgZ(61,"nz-dropdown-menu",null,30)(63,"ul",20)(64,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.filterByShipped(!0))}),t._uU(65," Shipped "),t.qZA(),t.TgZ(66,"li",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.filterByShipped(!1))}),t._uU(67," Ready To Shipped "),t.qZA()()()(),t.TgZ(68,"li")(69,"button",25),t._uU(70," Vendor "),t._UZ(71,"i",26),t.qZA(),t.TgZ(72,"nz-dropdown-menu",null,31)(74,"ul",20)(75,"li",32),t._uU(76," Care Me "),t.qZA(),t.TgZ(77,"li",32),t._uU(78," Care Me Global "),t.qZA(),t.TgZ(79,"li",32),t._uU(80," Intimate Star"),t.qZA(),t.TgZ(81,"li",32),t._uU(82," Thirdstep "),t.qZA()()()()()(),t.TgZ(83,"div",33)(84,"ul"),t.YNc(85,H,3,1,"li",34),t.YNc(86,J,3,1,"li",34),t.YNc(87,Y,3,1,"li",34),t.YNc(88,$,3,1,"li",34),t.qZA(),t.YNc(89,j,2,0,"span",35),t.qZA(),t.TgZ(90,"nz-table",36,37),t.NdJ("nzQueryParams",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.onPageChanged(i))}),t.TgZ(92,"thead")(93,"tr")(94,"th",38),t.NdJ("nzCheckedChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.checked=i)})("nzCheckedChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.onAllChecked(i))}),t.qZA(),t.TgZ(95,"th"),t._uU(96,"ID & Date"),t.qZA(),t.TgZ(97,"th",39),t._uU(98,"Delivery Status"),t.qZA(),t.TgZ(99,"th",39),t._uU(100,"Shipped"),t.qZA(),t.TgZ(101,"th",39),t._uU(102,"Shipping Method"),t.qZA(),t.TgZ(103,"th",40),t._uU(104,"Due"),t.qZA(),t.TgZ(105,"th",39),t._uU(106,"Order No"),t.qZA(),t.TgZ(107,"th",39),t._uU(108,"Amount"),t.qZA(),t.TgZ(109,"th",39),t._uU(110,"Payment Status"),t.qZA(),t.TgZ(111,"th",39),t._uU(112,"Payment"),t.qZA(),t.TgZ(113,"th",39),t._uU(114,"WriteOff"),t.qZA()()(),t.TgZ(115,"tbody"),t.YNc(116,K,30,21,"tr",41),t.qZA()()()}if(2&n){const e=c.$implicit,a=t.MAs(12),i=t.MAs(46),l=t.MAs(54),p=t.MAs(62),f=t.MAs(73),st=t.MAs(91),h=t.oxw();t.Q6J("nzTitle",e),t.xp6(8),t.Q6J("nzDropdownMenu",a),t.xp6(29),t.Q6J("ngModel",h.filterDate)("nzPopupStyle",t.DdM(24,Q))("nzDisabledDate",h.disabledDate),t.xp6(5),t.Q6J("nzDropdownMenu",i),t.xp6(6),t.Q6J("ngForOf",h.paymentOrderStatus),t.xp6(2),t.Q6J("nzDropdownMenu",l),t.xp6(6),t.Q6J("ngForOf",h.productOrderStatus),t.xp6(2),t.Q6J("nzDropdownMenu",p),t.xp6(11),t.Q6J("nzDropdownMenu",f),t.xp6(16),t.Q6J("ngIf",h.dateRangeFilter||h.dateRangeCalFilter),t.xp6(1),t.Q6J("ngIf",h.paymentStatusFilter),t.xp6(1),t.Q6J("ngIf",h.deliveryStatusFilter),t.xp6(1),t.Q6J("ngIf",h.shippingStatusFilter),t.xp6(1),t.Q6J("ngIf",h.shippingStatusFilter||h.deliveryStatusFilter||h.paymentStatusFilter||h.dateRangeFilter||h.dateRangeCalFilter),t.xp6(1),t.Q6J("nzData",h.invoices)("nzLoading",h.loading)("nzPageIndex",h.currentPage)("nzFrontPagination",!1)("nzTotal",h.totalNumbers),t.xp6(4),t.Q6J("nzChecked",h.checked)("nzIndeterminate",h.indeterminate),t.xp6(22),t.Q6J("ngForOf",st.data)}}function B(n,c){if(1&n&&(t.TgZ(0,"a",45),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Total : ",e.totalNumbers,"")}}const X=[{path:"",component:(()=>{class n{constructor(e,a,i,l,p){this.invoiceService=e,this.utilsService=a,this.reloadService=i,this.router=l,this.activatedRoute=p,this.spin=!1,this.tabs=["All Invoice"],this.listOfSelection=[{text:"Select All Row",onSelect:()=>{this.onAllChecked(!0)}}],this.checked=!1,this.indeterminate=!1,this.overlay=!1,this.isOpen=!1,this.listOfCurrentPageData=[],this.listOfData=[],this.loading=!1,this.setOfCheckedId=new Set,this.invoices=[],this.currentPage=1,this.invoicePerPage=10,this.totalNumbers=0,this.today=new Date,this.dataFormDateRange=new _.cw({start:new _.NI,end:new _.NI}),this.sortQuery={createdAt:-1},this.query=null,this.activeSort=null,this.searchInvoices=[],this.productOrderStatus=[{value:u.i.PENDING,viewValue:"Pending"},{value:u.i.CANCEL,viewValue:"Cancel"},{value:u.i.CONFIRM,viewValue:"Confirm"},{value:u.i.PARTIAL_SHIPPING,viewValue:"Processing"},{value:u.i.SHIPPING,viewValue:"Shipping"},{value:u.i.DELIVERED,viewValue:"Delivered"},{value:u.i.RETURNING,viewValue:"Returning"},{value:u.i.REFUND,viewValue:"Refund"}],this.paymentOrderStatus=[{value:g.b.PAID,viewValue:"Paid"},{value:g.b.UNPAID,viewValue:"Unpaid"},{value:g.b.PENDING,viewValue:"Pending"},{value:g.b.PARTIALPAID,viewValue:"Partial Paid"},{value:g.b.REFUNDED,viewValue:"Refunded"},{value:g.b.OVERDUE,viewValue:"Overdue"},{value:g.b.CANCEL,viewValue:"Cancel"},{value:g.b.EXPIRED,viewValue:"Expired"}],this.disabledDate=f=>(0,b.Z)(f,this.today)>0}updateCheckedSet(e,a){a?this.setOfCheckedId.add(e):this.setOfCheckedId.delete(e)}onItemChecked(e,a){this.updateCheckedSet(e,a),this.refreshCheckedStatus()}onAllChecked(e){this.listOfCurrentPageData.forEach(a=>this.updateCheckedSet(a.invoiceId,e)),this.refreshCheckedStatus()}onCurrentPageDataChange(e){this.listOfCurrentPageData=e,this.currentPage=2,this.refreshCheckedStatus()}refreshCheckedStatus(){this.checked=this.listOfCurrentPageData.every(e=>this.setOfCheckedId.has(e.invoiceId)),this.indeterminate=this.listOfCurrentPageData.some(e=>this.setOfCheckedId.has(e.invoiceId))&&!this.checked}ngOnInit(){this.subAcRoute=this.activatedRoute.queryParams.subscribe(e=>{console.log("qParam",e),e&&e.page?(this.currentPage=e.page,this.shippingStatusParam=e.shippingStatusParam,this.paymentStatusParam=e.paymentStatusParam,this.deliveryStatusParam=e.deliveryStatusParam,this.startDateParam=e.startDateParam,this.endDateParam=e.endDateParam,this.dateRangeParam=e.dateRangeParam,this.filterSortCheck()):this.currentPage=1,this.searchInvoices.length||this.getAllInvoices()}),this.queryParamsVar={page:this.currentPage,shippingStatusParam:this.shippingStatusParam,paymentStatusParam:this.paymentStatusParam,deliveryStatusParam:this.deliveryStatusParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},this.shippingStatusParam&&this.filterFromShippingStatusParam(this.shippingStatusParam),this.paymentStatusParam&&this.filterFromPaymentStatusParam(this.paymentStatusParam),this.deliveryStatusParam&&this.filterFromDeliveryStatusParam(this.deliveryStatusParam),this.startDateParam&&this.dateRangeParam&&this.onDateChange(this.startDateParam,this.endDateParam,!0,this.dateRangeParam),this.startDateParam&&this.endDateParam&&this.dateRangeParam&&this.onDateChange(this.startDateParam,this.endDateParam,!0,this.dateRangeParam),this.startDateParam&&null!==this.endDateParam&&(this.filter=Object.assign(Object.assign({},this.filter),{invoiceDate:{$gte:this.startDateParam,$lt:new Date}})),this.reloadService.refreshAllInvoices$.subscribe(()=>{this.getAllInvoices()}),this.getAllInvoices()}getAllInvoices(){this.loading=!0;const e={pageSize:this.invoicePerPage.toString(),currentPage:this.currentPage.toString()};this.invoiceService.getAllInvoices(e,this.sortQuery,this.filter).subscribe(a=>{this.invoices=a.data,this.totalNumbers=a.count,this.listOfData=this.invoices,this.loading=!1},a=>{console.log(a),this.loading=!1})}filterFromShippingStatusParam(e){switch(e){case"true":this.shippingStatusFilter="Shipped";break;case"false":this.shippingStatusFilter="Ready To Shipped";break;default:this.shippingStatusFilter=null}}filterFromPaymentStatusParam(e){switch(e){case"PAID":this.paymentStatusFilter="Paid";break;case"UNPAID":this.paymentStatusFilter="Unpaid";break;case"PENDING":this.paymentStatusFilter="Pending";break;case"PARTIAL_PAID":this.paymentStatusFilter="Partial Paid";break;case"REFUNDED":this.paymentStatusFilter="Refunded";break;case"OVERDUE":this.paymentStatusFilter="Overdue";break;case"CANCEL":this.paymentStatusFilter="Cancel";break;case"EXPIRED":this.paymentStatusFilter="Expired";break;default:this.paymentStatusFilter=null}}filterFromDeliveryStatusParam(e){switch(e){case"PENDING":this.deliveryStatusFilter="Pending";break;case"CANCEL":this.paymentStatusFilter="Cancel";break;case"CONFIRM":this.paymentStatusFilter="Confirm";break;case"PARTIAL_SHIPPING":this.paymentStatusFilter="Processing";break;case"SHIPPING":this.paymentStatusFilter="Shipping";break;case"DELIVERED":this.paymentStatusFilter="Delivered";break;case"RETURNING":this.paymentStatusFilter="Returning";break;case"REFUND":this.paymentStatusFilter="Refund";break;default:this.paymentStatusFilter=null}}filterSortCheck(){if(this.startDateParam&&this.onDateChange(this.startDateParam,this.endDateParam),this.shippingStatusParam)switch(this.shippingStatusParam){case"true":this.filter=Object.assign(Object.assign({},this.filter),{shipped:!0});break;case"false":this.filter=Object.assign(Object.assign({},this.filter),{shipped:!1});break;default:this.filter=null}let e;if(this.paymentStatusParam){switch(this.paymentStatusParam){case"PAID":e=g.b.PAID;break;case"UNPAID":e=g.b.UNPAID;break;case"PENDING":e=g.b.PENDING;break;case"PARTIAL_PAID":e=g.b.PARTIALPAID;break;case"REFUNDED":e=g.b.REFUNDED;break;case"OVERDUE":e=g.b.OVERDUE;break;case"CANCEL":e=g.b.CANCEL;break;case"EXPIRED":e=g.b.EXPIRED;break;default:e=null}this.filter=Object.assign(Object.assign({},this.filter),{paymentStatus:e})}if(this.deliveryStatusParam){let a;switch(this.deliveryStatusParam){case"PENDING":a=u.i.PENDING;break;case"CANCEL":a=u.i.CANCEL;break;case"CONFIRM":a=u.i.CONFIRM;break;case"PROCESSING":a=u.i.PARTIAL_SHIPPING;break;case"SHIPPING":a=u.i.SHIPPING;break;case"DELIVERED":a=u.i.DELIVERED;break;case"RETURNING":a=u.i.RETURNING;break;case"REFUND":a=u.i.REFUND;break;default:a=null}this.filter=Object.assign(Object.assign({},this.filter),{deliveryStatus:a})}this.reloadService.needRefreshAllInvoices$(),this.getAllInvoices()}onRefresh(){this.spin=!0,this.invoices=[],this.setOfCheckedId.clear(),this.filter=null,this.sortQuery=null,this.reloadService.needRefreshAllInvoices$(),this.getAllInvoices()}sortData(e,a){this.sortQuery=e,this.activeSort=a,this.reloadService.needRefreshAllInvoices$()}filterByOrderStatus(e){switch(this.queryParamsVar.page=1,this.router.navigate([],{queryParams:this.queryParamsVar}),e.viewValue){case"Pending":this.deliveryStatusParam=d.PENDING;break;case"Cancel":this.deliveryStatusParam=d.CANCEL;break;case"Confirm":this.deliveryStatusParam=d.CONFIRM;break;case"Processing":this.deliveryStatusParam=d.PROCESSING;break;case"Shipping":this.deliveryStatusParam=d.SHIPPING;break;case"Delivered":this.deliveryStatusParam=d.DELIVERED;break;case"Returning":this.deliveryStatusParam=d.RETURNING;break;case"Refund":this.deliveryStatusParam=d.REFUND;break;default:this.deliveryStatusParam=null}this.deliveryStatusFilter=e.viewValue,this.filter=Object.assign(Object.assign({},this.filter),{deliveryStatus:e.value}),this.reloadService.needRefreshAllInvoices$()}filterByShipped(e){this.shippingStatusFilter=e?"Shipped":"Ready To Shipped",this.shippingStatusParam=e,this.filter=Object.assign(Object.assign({},this.filter),{shipped:e}),this.reloadService.needRefreshAllInvoices$()}filterByPaymentStatus(e){switch(this.queryParamsVar.page=1,this.router.navigate([],{queryParams:this.queryParamsVar}),e.viewValue){case"Paid":this.paymentStatusParam=d.PAID;break;case"Unpaid":this.paymentStatusParam=d.UNPAID;break;case"Pending":this.paymentStatusParam=d.PENDING;break;case"Partial Paid":this.paymentStatusParam=d.PARTIAL_PAID;break;case"Refunded":this.paymentStatusParam=d.REFUNDED;break;case"Overdue":this.paymentStatusParam=d.OVERDUE;break;case"Cancel":this.paymentStatusParam=d.CANCEL;break;case"Expired":this.paymentStatusParam=d.EXPIRED;break;default:this.paymentStatusParam=null}this.paymentStatusFilter=e.viewValue,this.filter={paymentStatus:e.value},this.reloadService.needRefreshAllInvoices$()}clearDateFilter(){this.dateRangeFilter=null,this.dateRangeCalFilter=null,delete this.filter.invoiceDate,this.queryParamsVar.startDateParam&&delete this.queryParamsVar.startDateParam,this.queryParamsVar.endDateParam&&delete this.queryParamsVar.endDateParam,this.queryParamsVar.dateRangeParam&&delete this.queryParamsVar.dateRangeParam,this.queryParamsVar.page=1,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshAllInvoices$()}clearPaymentStatusFilter(){this.paymentStatusFilter=null,delete this.filter.paymentStatus,delete this.queryParamsVar.paymentStatusParam,this.queryParamsVar.page=1,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshAllInvoices$()}clearDeliveryStatusFilter(){this.deliveryStatusFilter=null,delete this.filter.deliveryStatus,delete this.queryParamsVar.deliveryStatusParam,this.queryParamsVar.page=1,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshAllInvoices$()}clearShippingStatusFilter(){this.shippingStatusFilter=null,delete this.filter.shipped,delete this.queryParamsVar.shippingStatusParam,this.queryParamsVar.page=1,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshAllInvoices$()}clearAllFilters(){this.queryParamsVar.startDateParam&&delete this.queryParamsVar.startDateParam,this.queryParamsVar.endDateParam&&delete this.queryParamsVar.endDateParam,this.queryParamsVar.dateRangeParam&&delete this.queryParamsVar.dateRangeParam,this.queryParamsVar.paymentStatusParam&&delete this.queryParamsVar.paymentStatusParam,this.queryParamsVar.deliveryStatusParam&&delete this.queryParamsVar.deliveryStatusParam,this.filter=null,this.dateRangeFilter=null,this.dateRangeCalFilter&&(this.dateRangeCalFilter=null),this.shippingStatusFilter=null,this.paymentStatusFilter=null,this.deliveryStatusFilter=null,this.reloadService.needRefreshAllInvoices$()}onDateChange(e,a,i,l){const p=this.utilsService.getDateString(e,"DD MMM-YYYY"),f=this.utilsService.getDateString(a,"DD MMM-YYYY");!0===i?(this.dateRangeCalFilter=null,this.dateRangeFilter=l):(this.dateRangeFilter=null,this.dateRangeCalFilter=p+" - "+f),this.startDateParam=e,this.endDateParam=a,this.filter=Object.assign(Object.assign({},this.filter),a?{invoiceDate:{$gte:e,$lte:a}}:{invoiceDate:{$eq:e}}),this.reloadService.needRefreshAllInvoices$()}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.dateRangeParam="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.startDateParam=this.startDate,this.filter=Object.assign(Object.assign({},this.filter),{invoiceDate:{$gte:this.startDate,$lt:this.today}}),this.reloadService.needRefreshAllInvoices$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.dateRangeParam="Yesterday",this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshAllInvoices$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 7 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshAllInvoices$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 30 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshAllInvoices$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 90 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshAllInvoices$()}lastMonthFilter(){const e=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),a=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=e,this.endDate=a,this.dateRangeParam="Last month",this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshAllInvoices$()}lastYearFilter(){const e=new Date((new Date).getFullYear()-1,0,1),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),11,31,23,59,59,999);this.startDate=a,this.endDate=i,this.dateRangeParam="Last Year",this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshAllInvoices$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.dateRangeParam="Week to date",this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshAllInvoices$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshAllInvoices$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshAllInvoices$()}onInvoiceDetailsChanged(e,a){this.router.navigate(["/admin/invoice",a],{queryParams:{shippingStatusParam:this.shippingStatusParam,paymentStatusParam:this.paymentStatusParam,deliveryStatusParam:this.deliveryStatusParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},queryParamsHandling:"merge"})}onPageChanged(e){this.router.navigate([],{queryParams:this.queryParamsVar})}endChangeRegDateRange(e){if(e.value){const a=this.utilsService.getDateString(this.dataFormDateRange.value.start),i=this.utilsService.getDateString(this.dataFormDateRange.value.end);this.filter={createdAt:{$gte:a,$lte:i}},this.currentPage>1||this.reloadService.needRefreshAllInvoices$()}}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,y.j)("searchTerm"),(0,v.b)(200),(0,I.x)(),(0,N.w)(a=>(this.query=a.trim(),""===this.query||null===this.query?(this.overlay=!1,this.searchInvoices=[],this.query=null,this.reloadService.needRefreshAllInvoices$(),D.E):(this.loading=!0,this.invoiceService.getInvoicesBySearch(this.query,{currentPage:"1",pageSize:"10"},this.filter))))).subscribe(a=>{this.loading=!1,this.invoices=a.data,this.searchInvoices=a.data,this.searchInvoices.length>0&&(this.isOpen=!0,this.overlay=!0)},()=>{this.loading=!1})}handleFocus(e){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchInvoices.length>0&&this.setPanelState(e),this.isFocused=!0)}setPanelState(e){e&&e.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.loading||this.searchInvoices.length>0&&(this.isOpen=!0,this.overlay=!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.q),t.Y36(O.F),t.Y36(M.f),t.Y36(r.F0),t.Y36(r.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-all-invoice"]],viewQuery:function(e,a){if(1&e&&(t.Gf(q,5),t.Gf(G,5)),2&e){let i;t.iGM(i=t.CRH())&&(a.searchForm=i.first),t.iGM(i=t.CRH())&&(a.searchInput=i.first)}},decls:16,vars:4,consts:[[1,"page-header"],[1,"page-header-left"],[3,"click"],[1,"header-action"],["type","button"],[1,"table-samary"],["nzSize","small"],[3,"nzTabBarExtraContent"],[3,"nzTitle",4,"ngFor","ngForOf"],["extraTemplate",""],[3,"nzTitle"],[1,"table-filter-area"],["searchForm","ngForm"],["nz-input","","id","searchInput","type","text","placeholder","Filter Invoices","name","searchTerm","autocomplete","off","ngModel","","required","",1,"tw",3,"focus"],["searchInput",""],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-calendar"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","nzDisabledDate","ngModelChange"],["nz-button","","nzType","primary"],["nz-button","","nz-dropdown","","nzPlacement","bottomRight",3,"nzDropdownMenu"],[1,"las","la-angle-down"],["payment","nzDropdownMenu"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["orderS","nzDropdownMenu"],["shipped","nzDropdownMenu"],["vendor","nzDropdownMenu"],["nz-menu-item",""],[1,"entry_query_filter"],[4,"ngIf"],[3,"click",4,"ngIf"],["nzSize","small",3,"nzData","nzLoading","nzPageIndex","nzFrontPagination","nzTotal","nzQueryParams"],["rowSelectionTable",""],["nzWidth","40px",3,"nzChecked","nzIndeterminate","nzCheckedChange"],[1,"twid150"],[1,"twid80"],[4,"ngFor","ngForOf"],[1,"las","la-times",3,"click"],[3,"nzChecked","nzCheckedChange"],[1,"btn"],[2,"text-decoration","none","color","black"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2"),t._uU(3,"All Invoice"),t.qZA(),t._uU(4," \xa0\xa0 "),t.TgZ(5,"span",2),t.NdJ("click",function(){return a.onRefresh()}),t._UZ(6,"i"),t.qZA()(),t.TgZ(7,"div",3)(8,"a",4),t._uU(9,"Export"),t.qZA()()(),t.TgZ(10,"div",5)(11,"nz-card",6)(12,"nz-tabset",7),t.YNc(13,W,117,25,"nz-tab",8),t.qZA()()(),t.YNc(14,B,2,1,"ng-template",null,9,t.W1O)),2&e){const i=t.MAs(15);t.xp6(6),t.Tol(a.spin?"fa fa-refresh fa-spin":"fa fa-refresh"),t.xp6(6),t.Q6J("nzTabBarExtraContent",i),t.xp6(1),t.Q6J("ngForOf",a.tabs)}},dependencies:[o.sg,o.O5,_._Y,_.Fj,_.JJ,_.JL,_.Q7,_.On,_.F,E.Zp,F.ix,Z.w,z.dQ,S.xH,S.xw,R.wO,R.r9,A.cm,A.RR,A.wA,T.uw,T.wS,P.N8,P.Uo,P._C,P.h7,P.Om,P.p0,P.$Z,P.g6,k.bd,o.uU,U.M,w.r],styles:[".date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #ddd}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.entry_query_filter[_ngcontent-%COMP%]{margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:30px 0 15px}.page-header[_ngcontent-%COMP%]   .page-header-left[_ngcontent-%COMP%]{display:flex}.page-header[_ngcontent-%COMP%]   .page-header-left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto;cursor:pointer}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]{display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#585858;margin-left:15px}.table-samary[_ngcontent-%COMP%]{margin-bottom:30px}.table-filter-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.table-filter-area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:inline-flex;align-items:center}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;list-style:none}.btn[_ngcontent-%COMP%]{padding:2px 10px;border-radius:50px}.shipped[_ngcontent-%COMP%]{color:green}@media (min-width: 1441px){.twid80[_ngcontent-%COMP%]{width:150px}.twid150[_ngcontent-%COMP%]{width:180px}}@media (max-width: 1440px){.twid80[_ngcontent-%COMP%]{width:80px}.twid150[_ngcontent-%COMP%]{width:130px}}@media (max-width: 768px){.twid150[_ngcontent-%COMP%]{width:100px}.table-filter-area[_ngcontent-%COMP%]{flex-direction:column}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}}"]}),n})()}];let tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[r.Bz.forChild(X),r.Bz]}),n})();var et=s(90898),at=s(19966),nt=s(24586),it=s(83626);let rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[o.ez,tt,et.q,at.JX,nt.D,it.P]}),n})()},31913:(C,m,s)=>{s.d(m,{i:()=>o});var o=(()=>{return(r=o||(o={}))[r.PENDING=0]="PENDING",r[r.CANCEL=1]="CANCEL",r[r.CONFIRM=2]="CONFIRM",r[r.PARTIAL_SHIPPING=3]="PARTIAL_SHIPPING",r[r.SHIPPING=4]="SHIPPING",r[r.DELIVERED=5]="DELIVERED",r[r.RETURNING=6]="RETURNING",r[r.RETURNED=7]="RETURNED",r[r.PARTIAL_RETURNED=8]="PARTIAL_RETURNED",r[r.REFUND=9]="REFUND",r[r.EDIT=10]="EDIT",o;var r})()},4602:(C,m,s)=>{s.d(m,{b:()=>o});var o=(()=>{return(r=o||(o={}))[r.PAID=0]="PAID",r[r.UNPAID=1]="UNPAID",r[r.PENDING=2]="PENDING",r[r.PARTIALPAID=3]="PARTIALPAID",r[r.REFUNDED=4]="REFUNDED",r[r.OVERDUE=5]="OVERDUE",r[r.CANCEL=6]="CANCEL",r[r.EXPIRED=7]="EXPIRED",r[r.WRITE_OFF=8]="WRITE_OFF",o;var r})()},73433:(C,m,s)=>{s.d(m,{M:()=>_});var o=s(31913),r=s(5e3);let _=(()=>{class D{transform(v,I){switch(v){case o.i.PENDING:return"Pending";case o.i.CONFIRM:return"Confirmed";case o.i.PARTIAL_SHIPPING:return"Partial Invoiced";case o.i.SHIPPING:return"Invoiced";case o.i.DELIVERED:return"Delivered";case o.i.CANCEL:return"Canceled";case o.i.RETURNING:return"Returning";case o.i.RETURNED:return"Returned";case o.i.PARTIAL_RETURNED:return"Partial Returned";case o.i.REFUND:return"Refund";default:return"-"}}}return D.\u0275fac=function(v){return new(v||D)},D.\u0275pipe=r.Yjl({name:"orderStatus",type:D,pure:!0}),D})()}}]);