"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[9420],{79420:(w,m,o)=>{o.r(m),o.d(m,{TagModule:()=>I});var g=o(69808),c=o(99826),i=o(93075),n=o(5e3),f=o(3294),h=o(49727),_=o(61293),x=o(67322),z=o(63640),p=o(11047),C=o(76042),A=o(82683),v=o(92643),S=o(16114),T=o(78054),d=o(50939),Z=o(41894),b=o(77484);function q(e,l){if(1&e){const t=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.qZA(),n.TgZ(17,"td")(18,"button",10),n.NdJ("click",function(){const s=n.CHM(t).$implicit,u=n.oxw();return n.KtG(u.onDelete(s._id))}),n._UZ(19,"i",11),n.qZA(),n.TgZ(20,"button",10),n.NdJ("click",function(){const s=n.CHM(t).$implicit,u=n.oxw();return n.KtG(u.edit(s._id,s))}),n._UZ(21,"i",12),n.qZA()()()}if(2&e){const t=l.$implicit;n.xp6(2),n.Oqu(t.tagname),n.xp6(2),n.Oqu(t.priority),n.xp6(2),n.Oqu(t.totalorder),n.xp6(2),n.Oqu(t.ordervalue),n.xp6(2),n.Oqu(t.return),n.xp6(2),n.Oqu(t.cancel),n.xp6(2),n.Oqu(t.badge),n.xp6(2),n.Oqu(t.allowVisible?"Yes":"No")}}function U(e,l){1&e&&(n.TgZ(0,"mat-error"),n._uU(1,"This field is required"),n.qZA())}function O(e,l){1&e&&(n.TgZ(0,"mat-error"),n._uU(1,"This field is required"),n.qZA())}function J(e,l){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"form",17),n.NdJ("ngSubmit",function(){n.CHM(t);const a=n.oxw(2);return n.KtG(a.onSubmit())}),n.TgZ(2,"div",18)(3,"div",19)(4,"nz-form-item")(5,"nz-form-label",20),n._UZ(6,"i",21),n._uU(7," Name "),n.qZA(),n.TgZ(8,"nz-form-control",22)(9,"nz-input-group",23),n._UZ(10,"input",24),n.TgZ(11,"nz-input-group",25),n._UZ(12,"input",26),n.qZA(),n.YNc(13,U,2,0,"mat-error",27),n.qZA()()()(),n.TgZ(14,"div",28)(15,"nz-form-item")(16,"nz-form-label",29),n._uU(17," Sales Order "),n.qZA(),n.TgZ(18,"nz-form-control",22)(19,"nz-select",30),n._UZ(20,"nz-option",31)(21,"nz-option",32),n.qZA(),n.TgZ(22,"nz-input-group",33),n._UZ(23,"input",34),n.qZA(),n.YNc(24,O,2,0,"mat-error",27),n.qZA()()(),n.TgZ(25,"div",28)(26,"nz-form-item")(27,"nz-form-label",35),n._uU(28," Order Value "),n.qZA(),n.TgZ(29,"nz-select",36),n._UZ(30,"nz-option",31)(31,"nz-option",32),n.qZA(),n.TgZ(32,"nz-form-control",22)(33,"nz-input-group",37),n._UZ(34,"input",38),n.qZA()()()(),n.TgZ(35,"div",28)(36,"nz-form-item")(37,"nz-form-label",39),n._uU(38," Return Ratio "),n.qZA(),n.TgZ(39,"nz-select",40),n._UZ(40,"nz-option",31)(41,"nz-option",32),n.qZA(),n.TgZ(42,"nz-form-control",22)(43,"nz-input-group",41),n._UZ(44,"input",42),n.qZA()()()(),n.TgZ(45,"div",28)(46,"nz-form-item")(47,"nz-form-label",43),n._uU(48," Cancel Ratio "),n.qZA(),n.TgZ(49,"nz-select",44),n._UZ(50,"nz-option",31)(51,"nz-option",32),n.qZA(),n.TgZ(52,"nz-form-control",22)(53,"nz-input-group",41),n._UZ(54,"input",45),n.qZA()()()(),n.TgZ(55,"div",46)(56,"nz-form-item")(57,"nz-form-label",43),n._uU(58," Set Badge "),n._UZ(59,"i",47),n.qZA(),n.TgZ(60,"nz-form-control",22),n._UZ(61,"input",48),n.qZA()()(),n.TgZ(62,"div",49)(63,"nz-form-item")(64,"nz-form-control",22)(65,"label",50),n._uU(66,"Allow customer visibility"),n.qZA()()()()()(),n.BQk()}if(2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("formGroup",t.dataForm),n.xp6(4),n.Q6J("nzSpan",24),n.xp6(3),n.Q6J("nzSpan",24),n.xp6(5),n.Q6J("ngIf",t.showError),n.xp6(3),n.Q6J("nzSpan",24),n.xp6(2),n.Q6J("nzSpan",24),n.xp6(2),n.Q6J("nzValue",1),n.xp6(1),n.Q6J("nzValue",2),n.xp6(3),n.Q6J("ngIf",t.showError),n.xp6(3),n.Q6J("nzSpan",24),n.xp6(3),n.Q6J("nzValue",1),n.xp6(1),n.Q6J("nzValue",2),n.xp6(1),n.Q6J("nzSpan",24),n.xp6(5),n.Q6J("nzSpan",24),n.xp6(3),n.Q6J("nzValue",1),n.xp6(1),n.Q6J("nzValue",2),n.xp6(1),n.Q6J("nzSpan",24),n.xp6(5),n.Q6J("nzSpan",24),n.xp6(3),n.Q6J("nzValue",1),n.xp6(1),n.Q6J("nzValue",2),n.xp6(1),n.Q6J("nzSpan",24),n.xp6(5),n.Q6J("nzSpan",24),n.xp6(3),n.Q6J("nzSpan",24),n.xp6(4),n.Q6J("nzSpan",24)}}function M(e,l){if(1&e){const t=n.EpF();n.TgZ(0,"button",13),n.NdJ("click",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.showTagModal())}),n._UZ(1,"i",14),n._uU(2," Add Tag "),n.qZA(),n.TgZ(3,"nz-modal",15),n.NdJ("nzVisibleChange",function(a){n.CHM(t);const s=n.oxw();return n.KtG(s.isTag=a)})("nzOnCancel",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.tagCancel())})("nzOnOk",function(){n.CHM(t);const a=n.oxw();return n.KtG(a.onSubmit())}),n.YNc(4,J,67,24,"ng-container",16),n.qZA()}if(2&e){const t=n.oxw();n.xp6(3),n.Q6J("nzVisible",t.isTag)}}const Q=[{path:"",component:(()=>{class e{constructor(t,r,a,s){this.fb=t,this.tagService=r,this.msg=a,this.reloadService=s,this.isTag=!1,this.tags=[],this.id=null,this.showError=!1}ngOnInit(){this.initModule(),this.getAllTags(),this.reloadService.refreshTags$.subscribe(()=>{this.initModule(),this.getAllTags()})}getAllTags(){this.tagService.getAllTags().subscribe(t=>{this.tags=t.data},t=>{this.msg.error(t.message)})}initModule(){this.dataForm=this.fb.group({tagname:[null,i.kI.required],priority:[null,i.kI.required],totalorder:[null,i.kI.required],totalorderCondition:[1,i.kI.required],ordervalue:[null,i.kI.required],ordervalueCondition:[1,i.kI.required],return:[null,i.kI.required],returnCondition:[1,i.kI.required],cancel:[null,i.kI.required],cancelCondition:[1,i.kI.required],badge:[null],allowVisible:[!0]})}showTagModal(){this.isTag=!0,this.id=null,this.showError=!1}tagCancel(){console.log("Button cancel clicked!"),this.isTag=!1,this.id=null,this.showError=!1}onSubmit(){if(this.dataForm.invalid)return this.msg.error("Please input all the required fields"),void(this.showError=!0);this.showError=!1;let t=this.dataForm.value;console.log(t),this.id?this.onEdit(this.id):this.add(t)}onDelete(t){this.tagService.deleteTag(t).subscribe(r=>{this.msg.success(r.message),this.reloadService.needRefreshTags$()},r=>{console.log(r.message)})}add(t){this.tagService.addTag(t).subscribe(r=>{this.msg.success(r.message),this.reloadService.needRefreshTags$(),this.isTag=!1},r=>{console.log(r.message)})}onEdit(t){const r=Object.assign(Object.assign({},this.dataForm.value),{_id:t});this.tagService.editTag(r).subscribe(a=>{this.msg.success(a.message),this.reloadService.needRefreshTags$(),this.isTag=!1},a=>{console.log(a.message)})}edit(t,r){this.id=t,this.dataForm.patchValue(r),this.isTag=!0}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.qu),n.Y36(f.c),n.Y36(h.dD),n.Y36(_.f))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-tag"]],decls:35,vars:4,consts:[["nz-row",""],["nz-col","","nzXs","24","nzSm","4"],[1,"customer_setting"],["nz-col","","nzXs","24"],["nzTitle","Customer Badge","nzSize","small",1,"customer_tags",3,"nzExtra"],["nz-row","","nzGutter","16"],["nzSize","small",3,"nzData","nzPageSize"],["basicTable",""],[4,"ngFor","ngForOf"],["extraTemplate",""],["nz-button","",3,"click"],[1,"las","la-lg","la-trash"],[1,"las","la-lg","la-edit"],["nz-button","","nzType","dashed",3,"click"],[1,"las","la-lg","la-plus"],["nzTitle","Create New Badge","nzOkText","Assign Badge",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-form","",3,"formGroup","ngSubmit"],["nz-row","","nzGutter","8"],["nz-col","","nzXs","24","nzLg","24"],["nzFor","tagname",3,"nzSpan"],[1,"las","la-lg","la-tags"],[3,"nzSpan"],["nzCompact",""],["nz-input","","placeholder","Tag Name","name","tagname","type","text","id","tagname","formControlName","tagname",2,"width","69%","margin-right","1%"],["nzAddOnBefore","Priority",2,"width","30%"],["nz-input","","placeholder","1","name","priority","type","number","id","priority","formControlName","priority"],[4,"ngIf"],["nz-col","","nzXs","12","nzMd","12"],["nzFor","totalorder",3,"nzSpan"],["nzWidth","50px","formControlName","totalorderCondition","nzSize","small"],["nzLabel","MIN",3,"nzValue"],["nzLabel","MAX",3,"nzValue"],["nzAddOnBefore","Min","nzAddOnAfter","Qty"],["nz-input","","placeholder","0","name","totalorder","type","number","id","totalorder","formControlName","totalorder"],["nzFor","ordervalue",3,"nzSpan"],["nzWidth","50px","formControlName","ordervalueCondition","nzSize","small"],["nzAddOnBefore","Min","nzAddOnAfter","TK"],["nz-input","","placeholder","0.00","name","ordervalue","type","number","id","ordervalue","formControlName","ordervalue"],["nzFor","return",3,"nzSpan"],["nzWidth","50px","formControlName","returnCondition","nzSize","small"],["nzAddOnBefore","Min","nzAddOnAfter","%"],["nz-input","","name","return","type","number","id","return","formControlName","return","placeholder","0%"],["nzFor","cancel",3,"nzSpan"],["nzWidth","50px","formControlName","cancelCondition","nzSize","small"],["nz-input","","name","cancel","type","number","id","cancel","formControlName","cancel","placeholder","0%"],["nz-col","","nzXs","12","nzMd","24"],[1,"las","la-info-circle"],["nz-input","","name","badge","type","number","id","badge","formControlName","badge","placeholder","<i class='las la-skull-crossbones'></i>"],["nz-col","","nzXs","24","nzMd","24"],["formControlName","allowVisible","nz-checkbox",""]],template:function(t,r){if(1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),n._uU(4,"Customer Settings"),n.qZA()()(),n.TgZ(5,"div",3)(6,"nz-card",4)(7,"div",5)(8,"div",3)(9,"nz-table",6,7)(11,"thead")(12,"tr")(13,"th"),n._uU(14,"Tag Name"),n.qZA(),n.TgZ(15,"th"),n._uU(16,"Priority"),n.qZA(),n.TgZ(17,"th"),n._uU(18,"Min Total Order"),n.qZA(),n.TgZ(19,"th"),n._uU(20,"Min Order value"),n.qZA(),n.TgZ(21,"th"),n._uU(22,"Min Return value"),n.qZA(),n.TgZ(23,"th"),n._uU(24,"Min Cancel value"),n.qZA(),n.TgZ(25,"th"),n._uU(26,"Icon"),n.qZA(),n.TgZ(27,"th"),n._uU(28,"Customer View"),n.qZA(),n.TgZ(29,"th"),n._uU(30,"Action"),n.qZA()()(),n.TgZ(31,"tbody"),n.YNc(32,q,22,8,"tr",8),n.qZA()()()()(),n.YNc(33,M,5,1,"ng-template",null,9,n.W1O),n.qZA()()),2&t){const a=n.MAs(34);n.xp6(6),n.Q6J("nzExtra",a),n.xp6(3),n.Q6J("nzData",r.tags)("nzPageSize",10),n.xp6(23),n.Q6J("ngForOf",r.tags)}},dependencies:[g.sg,g.O5,x.TO,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,z.du,z.Hf,p.Zp,p.gB,C.ix,A.w,v.dQ,S.Ie,T.Ip,T.Vq,d.N8,d.Uo,d._C,d.Om,d.p0,d.$Z,Z.t3,Z.SK,b.bd],styles:[".customer_setting[_ngcontent-%COMP%]{padding:15px 0}nz-form-control[_ngcontent-%COMP%]{margin-bottom:15px}"]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[c.Bz.forChild(Q),c.Bz]}),e})();var y=o(90898),V=o(83877),F=o(47614);let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[g.ez,N,y.q,V.QG,F.P]}),e})()}}]);