"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[9125],{9125:(O,D,s)=>{s.r(D),s.d(D,{ReturnPageModule:()=>Rt});var g=s(24586),d=s(61711),M=s(72408),P=s(90898),p=s(69808),c=s(93075),v=s(60515),H=s(94813),L=s(78372),Y=s(71884),G=s(63900),V=s(37623),t=s(5e3),Z=s(99826),K=s(57267),A=s(8338),q=s(61293),U=s(11047),z=s(76042),w=s(82683),F=s(92643),y=s(90868),T=s(64219),b=s(63677),k=s(92905),_=s(50939),S=s(77484),N=s(73433);const $=["createReturn"],j=["searchInput"],B=["searchForm"];function W(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"li",19),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.onVendorSelect(i))}),t._uU(1),t.qZA()}if(2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function X(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.clearDateFilter())}),t.qZA()()}if(2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.dateRangeFilter?e.dateRangeFilter:e.dateRangeCalFilter," ")}}function tt(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.clearVendorFilter())}),t.qZA()()}if(2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.vendorFilter," ")}}function et(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.clearSortFilter())}),t.qZA()()}if(2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.sortFilter," ")}}function nt(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"span",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.clearAllFilters())}),t._uU(1," Clear All "),t.qZA()}}const at=function(r){return["../../","invoice",r]},rt=function(r){return["../../","order",r]};function it(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",39),t.NdJ("nzCheckedChange",function(n){const u=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.onItemChecked(u.id,n))}),t.qZA(),t.TgZ(2,"td")(3,"a",38),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.onReturnDetailsChanged(u.event,i.returnId))}),t._uU(4),t.TgZ(5,"h5"),t._uU(6),t.ALo(7,"date"),t.qZA()()(),t.TgZ(8,"td"),t._uU(9,"SUPERADMIN"),t.qZA(),t.TgZ(10,"td")(11,"a",40),t._uU(12),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"orderStatus"),t.qZA(),t.TgZ(16,"td")(17,"a",40),t._uU(18),t.qZA()(),t.TgZ(19,"td"),t._uU(20,"Pending"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26,"0"),t.qZA()()}if(2&r){const e=o.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("nzChecked",a.setOfCheckedId.has(e.id)),t.xp6(3),t.hij(" ",e.returnId," "),t.xp6(2),t.Oqu(t.xi3(7,10,e.createdAt,"short")),t.xp6(5),t.Q6J("routerLink",t.VKq(15,at,e.invoiceId)),t.xp6(1),t.Oqu(e.invoiceId),t.xp6(2),t.Oqu(t.lcZ(15,13,null==e?null:e.deliveryStatus)),t.xp6(3),t.Q6J("routerLink",t.VKq(17,rt,e.orderNumber)),t.xp6(1),t.hij(" ",e.orderNumber," "),t.xp6(4),t.Oqu(a.totalRecieved(e)),t.xp6(2),t.Oqu(e.subTotal)}}const st=function(){return{boxShadow:"none"}};function ot(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"nz-tab",8)(1,"div",9)(2,"form",null,10)(4,"input",11,12),t.NdJ("focus",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.handleFocus(n))}),t.qZA()(),t.TgZ(6,"ul")(7,"li")(8,"button",13),t._uU(9," Set Date "),t._UZ(10,"i",14),t.qZA(),t.TgZ(11,"nz-dropdown-menu",15,16)(13,"div",17)(14,"ul",18)(15,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.todayFilter())}),t._uU(16,"Today"),t.qZA(),t.TgZ(17,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.yesterdayFilter())}),t._uU(18,"Yesterday"),t.qZA(),t.TgZ(19,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.lastWeekFilter())}),t._uU(20,"Last 7 days"),t.qZA(),t.TgZ(21,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.lastThirtyDaysFilter())}),t._uU(22," Last 30 days "),t.qZA(),t.TgZ(23,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.lastThreeMonthFilter())}),t._uU(24," Last 90 days "),t.qZA(),t.TgZ(25,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.lastMonthFilter())}),t._uU(26,"Last month"),t.qZA(),t.TgZ(27,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.lastYearFilter())}),t._uU(28,"Last year"),t.qZA(),t.TgZ(29,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.weekToDateFilter())}),t._uU(30,"Week to date"),t.qZA(),t.TgZ(31,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.monthToDateFilter())}),t._uU(32," Month to date "),t.qZA(),t.TgZ(33,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.yearToDateFilter())}),t._uU(34,"Year to date"),t.qZA()(),t.TgZ(35,"div",20)(36,"nz-card",4)(37,"nz-range-picker",21),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.onDateChange(n[0],n[1]))})("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filterDate=n)}),t.qZA(),t._UZ(38,"br"),t.TgZ(39,"button",22),t._uU(40,"Apply"),t.qZA()()()()()(),t.TgZ(41,"li")(42,"button",23),t._uU(43," Vendor "),t._UZ(44,"i",24),t.qZA(),t.TgZ(45,"nz-dropdown-menu",null,25)(47,"ul",18),t.YNc(48,W,2,1,"li",26),t.qZA()()(),t.TgZ(49,"li")(50,"button",23),t._uU(51," Sort "),t._UZ(52,"i",27),t.qZA(),t.TgZ(53,"nz-dropdown-menu",null,28)(55,"ul",18)(56,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData({returnId:-1},1,"Return Number(High to low)"))}),t._uU(57," Return Number(High to low) "),t.qZA(),t.TgZ(58,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData({returnId:1},2,"Return Number(Low to High)"))}),t._uU(59," Return Number(Low to High) "),t.qZA(),t.TgZ(60,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData({createdAt:1},3,"Created (oldest first)"))}),t._uU(61," Created (oldest first) "),t.qZA(),t.TgZ(62,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData({createdAt:-1},4,"Created (newest first)"))}),t._uU(63," Created (newest first) "),t.qZA(),t.TgZ(64,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData({subTotal:-1},5,"Amount(High to low)"))}),t._uU(65," Amount(High to low) "),t.qZA(),t.TgZ(66,"li",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData({subTotal:1},6,"Amount (Low to High)"))}),t._uU(67," Amount (Low to High) "),t.qZA()()()()()(),t.TgZ(68,"div",29)(69,"ul"),t.YNc(70,X,3,1,"li",30),t.YNc(71,tt,3,1,"li",30),t.YNc(72,et,3,1,"li",30),t.qZA(),t.YNc(73,nt,2,0,"span",31),t.qZA(),t.TgZ(74,"div",32)(75,"nz-table",33,34),t.NdJ("nzCurrentPageDataChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.onCurrentPageDataChange(n))}),t.TgZ(77,"thead")(78,"tr")(79,"th",35),t.NdJ("nzCheckedChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.checked=n)})("nzCheckedChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.onAllChecked(n))}),t.qZA(),t.TgZ(80,"th"),t._uU(81,"Return ID & Date"),t.qZA(),t.TgZ(82,"th"),t._uU(83,"Initiated By"),t.qZA(),t.TgZ(84,"th"),t._uU(85,"Invoice ID"),t.qZA(),t.TgZ(86,"th"),t._uU(87,"Return Status"),t.qZA(),t.TgZ(88,"th"),t._uU(89,"Sales Order"),t.qZA(),t.TgZ(90,"th"),t._uU(91,"Customer"),t.qZA(),t.TgZ(92,"th"),t._uU(93,"Received Qty"),t.qZA(),t.TgZ(94,"th"),t._uU(95,"Return (TK)"),t.qZA(),t.TgZ(96,"th"),t._uU(97,"Refund (TK)"),t.qZA()()(),t.TgZ(98,"tbody"),t.YNc(99,it,27,19,"tr",36),t.qZA()()()()}if(2&r){const e=o.$implicit,a=t.MAs(12),n=t.MAs(46),i=t.MAs(54),u=t.MAs(76),l=t.oxw();t.Q6J("nzTitle",e),t.xp6(8),t.Q6J("nzDropdownMenu",a),t.xp6(29),t.Q6J("ngModel",l.filterDate)("nzPopupStyle",t.DdM(18,st))("nzDisabledDate",l.disabledDate),t.xp6(5),t.Q6J("nzDropdownMenu",n),t.xp6(6),t.Q6J("ngForOf",l.vendorOptions),t.xp6(2),t.Q6J("nzDropdownMenu",i),t.xp6(20),t.Q6J("ngIf",l.dateRangeFilter||l.dateRangeCalFilter),t.xp6(1),t.Q6J("ngIf",l.vendorFilter),t.xp6(1),t.Q6J("ngIf",l.sortFilter),t.xp6(1),t.Q6J("ngIf",l.vendorFilter||l.sortFilter||l.dateRangeFilter||l.dateRangeCalFilter||l.clearAllFilter),t.xp6(2),t.Q6J("nzLoading",l.isLoading)("nzData",l.returns),t.xp6(4),t.Q6J("nzChecked",l.checked)("nzIndeterminate",l.indeterminate)("nzLoading",l.isLoading),t.xp6(20),t.Q6J("ngForOf",u.data)}}function lt(r,o){if(1&r&&(t.TgZ(0,"a",41),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("Total : ",e.totalNumbers?e.totalNumbers:0,"")}}let ut=(()=>{class r{constructor(e,a,n,i,u){this.router=e,this.activatedRoute=a,this.utilsService=n,this.returnService=i,this.reloadService=u,this.tabs=["All Return","Returning","Recived"],this.checked=!1,this.indeterminate=!1,this.listOfCurrentPageData=[],this.setOfCheckedId=new Set,this.returns=[],this.sortQuery={createdAt:-1},this.holdPrevData=[],this.searchReturn=[],this.vendorOptions=["Care Me","Global","Intimate Star","Thirdstep"],this.returnsPerPage=50,this.currentPage=1,this.totalNumbers=0,this.today=new Date,this.dataFormDateRange=new c.cw({start:new c.NI,end:new c.NI}),this.clearAllFilter=!1,this.disabledDate=l=>(0,V.Z)(l,this.today)>0}ngOnInit(){this.subAcRoute=this.activatedRoute.queryParams.subscribe(e=>{console.log("QeryParams",e),e&&e.page?(this.currentPage=e.page,this.sortQueryParam=e.sortQueryParam,this.startDateParam=e.startDateParam,this.endDateParam=e.endDateParam,this.dateRangeParam=e.dateRangeParam,this.filterSortCheck()):this.currentPage=1}),this.queryParamsVar={page:1,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},this.startDateParam&&this.dateRangeParam&&this.onDateChange(this.startDateParam,this.endDateParam,!0,this.dateRangeParam),this.startDateParam&&this.endDateParam&&this.dateRangeParam&&this.onDateChange(this.startDateParam,this.endDateParam,!0,this.dateRangeParam),this.startDateParam&&null!==this.endDateParam&&(this.filter=Object.assign(Object.assign({},this.filter),{dateTime:{$gte:this.startDateParam,$lt:new Date}})),this.reloadService.refreshReturns$.subscribe(()=>{this.getAllReturns()}),this.getAllReturns()}filterSortCheck(){if(this.startDateParam&&this.onDateChange(this.startDateParam,this.endDateParam),this.sortQueryParam){let e;switch(this.sortQueryParam){case"1":e={name:1},this.sortFilter="Product Title (A-Z)";break;case"2":e={createdAt:1},this.sortFilter="Created (Oldest First)";break;case"3":e={quantity:-1},this.sortFilter="High Inventory";break;case"4":e={categoryName:-1},this.sortFilter="Product Type (A-Z)";break;case"4":e={vendor:1},this.sortFilter="Vendor (A-Z)";break;default:this.sortQuery=null}this.sortQuery=e}this.reloadService.needRefreshReturns$()}getAllReturns(){this.isLoading=!0;const e={pageSize:this.returnsPerPage.toString(),currentPage:this.currentPage.toString()};this.returnService.getAllReturns(e,this.sortQuery,this.filter).subscribe(a=>{var n;this.returns=a.data,console.log("returns",this.returns),this.totalNumbers=null===(n=this.returns)||void 0===n?void 0:n.length,this.isLoading=!1},a=>{console.log(a)})}createReturnPopUp(){this.createReturn.createReturnShow()}updateCheckedSet(e,a){a?this.setOfCheckedId.add(e):this.setOfCheckedId.delete(e)}onItemChecked(e,a){this.updateCheckedSet(e,a),this.refreshCheckedStatus()}onAllChecked(e){this.listOfCurrentPageData.forEach(a=>this.updateCheckedSet(a.id,e)),this.refreshCheckedStatus()}onCurrentPageDataChange(e){this.listOfCurrentPageData=e,this.refreshCheckedStatus()}refreshCheckedStatus(){this.checked=this.listOfCurrentPageData.every(e=>this.setOfCheckedId.has(e.id)),this.indeterminate=this.listOfCurrentPageData.some(e=>this.setOfCheckedId.has(e.id))&&!this.checked}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,H.j)("searchTerm"),(0,L.b)(200),(0,Y.x)(),(0,G.w)(a=>{if(this.searchQuery=a.trim(),console.log(this.searchQuery),""===this.searchQuery||null===this.searchQuery)return this.overlay=!1,this.searchReturn=[],this.searchQuery=null,this.getAllReturns(),v.E;this.isLoading=!0;const n={currentPage:this.currentPage.toString(),pageSize:this.returnsPerPage.toString()};return this.returnService.getSearchData(this.searchQuery,n,this.sortQuery)})).subscribe(a=>{this.isLoading=!1,console.log(a.data),this.returns=a.data,this.searchReturn=a.data,this.searchReturn.length>0&&(this.isOpen=!0,this.overlay=!0)},()=>{this.isLoading=!1})}handleFocus(e){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchReturn.length>0&&this.setPanelState(e),this.isFocused=!0)}setPanelState(e){e&&e.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchReturn.length>0&&(this.isOpen=!0,this.overlay=!0)}sortData(e,a,n){let i;switch(this.router.navigate([],{queryParams:this.queryParamsVar}),n){case"Return Number(High to low)":i="1";break;case"Return Number(Low to High)":i="2";break;case"Created (oldest first)":i="3";break;case"Created (newest first)":i="4";break;case"Amount(High to low)":i="5";break;case"Amount (Low to High)":i="6";break;default:i=null}this.sortQueryParam=i,this.sortFilter=n,this.sortQuery=e,this.searchQuery?this.returnService.getSearchData(this.searchQuery,{currentPage:"1",pageSize:"10"},this.sortQuery).subscribe(l=>{this.isLoading=!1,this.returns=l.data,this.searchReturn=l.data,this.searchReturn.length>0&&(this.isOpen=!0,this.overlay=!0)},l=>{this.isLoading=!1}):this.getAllReturns()}totalRecieved(e){let a=0;return e.products.forEach(n=>{a+=n.recievedQty}),a}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.dateRangeParam="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.startDateParam=this.startDate,this.filter=Object.assign(Object.assign({},this.filter),{returnDate:{$gte:this.startDate,$lt:this.today}}),this.reloadService.needRefreshReturns$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.dateRangeParam="Yesterday",this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshReturns$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 7 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshReturns$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 30 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshReturns$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 90 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshReturns$()}lastMonthFilter(){const e=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),a=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=e,this.endDate=a,this.dateRangeParam="Last month",this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshReturns$()}lastYearFilter(){const e=new Date((new Date).getFullYear()-1,0,1),a=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),11,31,23,59,59,999);this.startDate=a,this.endDate=n,this.dateRangeParam="Last Year",this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshReturns$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.dateRangeParam="Week to date",this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshReturns$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshReturns$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshReturns$()}onDateChange(e,a,n,i){const u=this.utilsService.getDateString(e,"DD MMM-YYYY"),l=this.utilsService.getDateString(a,"DD MMM-YYYY");!0===n?(this.dateRangeCalFilter=null,this.dateRangeFilter=i):(this.dateRangeFilter=null,this.dateRangeCalFilter=u+" - "+l),this.startDateParam=e,this.endDateParam=a,this.filter=Object.assign(Object.assign({},this.filter),a?{returnDate:{$gte:e,$lte:a}}:{returnDate:{$eq:e}}),this.reloadService.needRefreshReturns$()}clearDateFilter(){var e;null===(e=this.filter)||void 0===e||delete e.returnDate,this.dateRangeFilter=null,this.dateRangeCalFilter=null,this.queryParamsVar.startDateParam&&delete this.queryParamsVar.startDateParam,this.queryParamsVar.endDateParam&&delete this.queryParamsVar.endDateParam,this.queryParamsVar.dateRangeParam&&delete this.queryParamsVar.dateRangeParam,this.reloadService.needRefreshReturns$()}clearVendorFilter(){this.vendorFilter=null,this.reloadService.needRefreshReturns$()}clearSortFilter(){this.sortQuery=null,this.sortFilter=null,this.queryParamsVar.sortQueryParam&&delete this.queryParamsVar.sortQueryParam,this.router.navigate([],{queryParams:{page:1}}),this.reloadService.needRefreshReturns$()}clearAllFilters(){this.queryParamsVar.sortQueryParam&&delete this.queryParamsVar.sortQueryParam,this.queryParamsVar.startDateParam&&delete this.queryParamsVar.startDateParam,this.queryParamsVar.endDateParam&&delete this.queryParamsVar.endDateParam,this.queryParamsVar.dateRangeParam&&delete this.queryParamsVar.dateRangeParam,this.sortFilter=null,this.sortQuery=null,this.vendorFilter=null,this.filter=null,this.dateRangeFilter=null,this.dateRangeCalFilter&&(this.dateRangeCalFilter=null),this.clearAllFilter=!1,this.reloadService.needRefreshReturns$()}onReturnDetailsChanged(e,a){this.router.navigate(["/admin/return/details",a],{queryParams:{page:1,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},queryParamsHandling:"merge"})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Z.F0),t.Y36(Z.gz),t.Y36(K.F),t.Y36(A.x),t.Y36(q.f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-return-page"]],viewQuery:function(e,a){if(1&e&&(t.Gf($,5),t.Gf(j,5),t.Gf(B,5)),2&e){let n;t.iGM(n=t.CRH())&&(a.createReturn=n.first),t.iGM(n=t.CRH())&&(a.searchInput=n.first),t.iGM(n=t.CRH())&&(a.searchForm=n.first)}},decls:14,vars:2,consts:[[1,"page-header"],[1,"header-action"],["type","button"],[1,"table-samary"],["nzSize","small"],[3,"nzTabBarExtraContent"],[3,"nzTitle",4,"ngFor","ngForOf"],["extraTemplate",""],[3,"nzTitle"],[1,"table-filter-area"],["searchForm","ngForm"],["nz-input","","id","searchInput","type","text","placeholder","Filter Returns","name","searchTerm","nzSize","large","autocomplete","off","ngModel","","required","",1,"tw",3,"focus"],["searchInput",""],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-calendar"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","nzDisabledDate","ngModelChange"],["nz-button","","nzType","primary"],["nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-angle-down"],["vendorMenu","nzDropdownMenu"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"las","la-sort"],["sortMenu","nzDropdownMenu"],[1,"entry_query_filter"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"table-data-area"],["nzSize","small","nzShowSizeChanger","",3,"nzLoading","nzData","nzCurrentPageDataChange"],["rowSelectionTable",""],[2,"width","50px",3,"nzChecked","nzIndeterminate","nzLoading","nzCheckedChange"],[4,"ngFor","ngForOf"],[1,"las","la-times",3,"click"],[3,"click"],[2,"width","50px",3,"nzChecked","nzCheckedChange"],[3,"routerLink"],[2,"text-decoration","none","color","black"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"All Return"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t._uU(5,"Export"),t.qZA(),t.TgZ(6,"button",2),t._uU(7,"Import"),t.qZA()()(),t.TgZ(8,"div",3)(9,"nz-card",4)(10,"nz-tabset",5),t.YNc(11,ot,100,19,"nz-tab",6),t.qZA()()(),t.YNc(12,lt,2,1,"ng-template",null,7,t.W1O)),2&e){const n=t.MAs(13);t.xp6(10),t.Q6J("nzTabBarExtraContent",n),t.xp6(1),t.Q6J("ngForOf",a.tabs)}},dependencies:[p.sg,p.O5,Z.yS,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.On,c.F,U.Zp,z.ix,w.w,F.dQ,y.xH,y.xw,T.wO,T.r9,b.cm,b.RR,b.wA,k.uw,k.wS,_.N8,_.Uo,_._C,_.h7,_.Om,_.p0,_.$Z,_.g6,S.bd,p.uU,N.M],styles:[".page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:30px 0 15px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]{display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;margin-left:25px}.date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #ddd}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.entry_query_filter[_ngcontent-%COMP%]{margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.table-samary[_ngcontent-%COMP%]{margin-bottom:30px}.table-filter-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.table-filter-area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:50%}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;list-style:none;border:1px solid #ddd;min-height:45px!important}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#1b75bb;padding:10px 20px;color:#ebebeb;border:1px solid #1b75bb;transition:.3s}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#589b00;border:1px solid #589b00}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.date_filter[_ngcontent-%COMP%]{background:none!important;border:1px solid none!important}@media (max-width: 768px){.table-filter-area[_ngcontent-%COMP%]{flex-direction:column}.table-filter-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:10px 0 0}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px}}"]}),r})();var dt=s(48966),ct=s(66082),gt=s(49727),Q=s(63640),R=s(14573),I=s(78054),J=s(41894),_t=s(55737),ht=s(92124);const mt=["menuTrigger"];function pt(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"li",28),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onReturnDetailsChanged(u.event,i.returnId))}),t.TgZ(1,"div",29)(2,"h4",30),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onReturnDetailsChanged(u.event,i.returnId))}),t._uU(3),t.qZA(),t.TgZ(4,"h5"),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"div",31)(8,"h4"),t._uU(9,"Pending"),t.qZA(),t.TgZ(10,"h5")(11,"span"),t._uU(12),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA()()()()}if(2&r){const e=o.$implicit,a=t.oxw();t.ekj("active",(null==e?null:e._id)===a.id),t.xp6(3),t.Oqu(null==e?null:e.returnId),t.xp6(2),t.Oqu(t.lcZ(6,7,null==e?null:e.returnDate)),t.xp6(7),t.AsE("",null==e?null:e.products.length," / ",e.products.length," "),t.xp6(2),t.hij(" ",e.subTotal," TK")}}function ft(r,o){1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Refund Way"),t.qZA(),t.TgZ(3,"td"),t._uU(4,":"),t.qZA(),t.TgZ(5,"td"),t._uU(6,"bKash ( 01934548454 )"),t.qZA()())}function Ct(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",50),t._UZ(2,"img",51),t.qZA(),t.TgZ(3,"td")(4,"h3"),t._uU(5),t.qZA(),t.TgZ(6,"h5"),t._uU(7),t.qZA(),t.TgZ(8,"h5"),t._uU(9),t.qZA()(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17,"0"),t.qZA(),t.TgZ(18,"td")(19,"button",52),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.showSerials(null==i?null:i.serials))}),t._uU(20,"View"),t.qZA()(),t.TgZ(21,"td")(22,"button",53),t.NdJ("click",function(){const n=t.CHM(e),i=n.index,u=n.$implicit,l=t.oxw(2);return t.KtG(l.markRecieved(i,u.quantity))}),t._uU(23,"Mark As Recieved"),t.qZA()()()}if(2&r){const e=o.$implicit;t.xp6(5),t.Oqu(e.name),t.xp6(2),t.Oqu(e.variant),t.xp6(2),t.hij("SKU: ",e.sku,""),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(e.price),t.xp6(2),t.Oqu(e.recievedQty?e.recievedQty:"0"),t.xp6(7),t.Q6J("disabled",e.quantity===e.recievedQty)}}const x=function(){return{span:24}},E=function(){return{span:12}};function Pt(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"nz-tab",32)(1,"div",33)(2,"div",34)(3,"div",35)(4,"h2"),t._uU(5,"Return Details"),t.qZA(),t.TgZ(6,"table")(7,"tbody")(8,"tr")(9,"td"),t._uU(10,"Return Status"),t.qZA(),t.TgZ(11,"td"),t._uU(12,":"),t.qZA(),t.TgZ(13,"td")(14,"span"),t._uU(15),t.ALo(16,"orderStatus"),t.qZA()()(),t.TgZ(17,"tr")(18,"td"),t._uU(19,"Refund"),t.qZA(),t.TgZ(20,"td"),t._uU(21,":"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA()(),t.TgZ(24,"tr")(25,"td"),t._uU(26,"Amount"),t.qZA(),t.TgZ(27,"td"),t._uU(28,":"),t.qZA(),t.TgZ(29,"td")(30,"b"),t._uU(31,"120 TK"),t.qZA()()(),t.YNc(32,ft,7,0,"tr",36),t.TgZ(33,"tr")(34,"td"),t._uU(35,"Customer"),t.qZA(),t.TgZ(36,"td"),t._uU(37,":"),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA()(),t.TgZ(40,"tr")(41,"td"),t._uU(42,"Reason"),t.qZA(),t.TgZ(43,"td"),t._uU(44,":"),t.qZA(),t.TgZ(45,"td"),t._uU(46),t.qZA()(),t.TgZ(47,"tr")(48,"td"),t._uU(49,"Notes"),t.qZA(),t.TgZ(50,"td"),t._uU(51,":"),t.qZA(),t.TgZ(52,"td"),t._uU(53),t.qZA()()()()(),t.TgZ(54,"div",35)(55,"table")(56,"tbody")(57,"tr")(58,"td"),t._uU(59,"Invoice#"),t.qZA(),t.TgZ(60,"td"),t._uU(61,":"),t.qZA(),t.TgZ(62,"td")(63,"a"),t._uU(64),t.qZA()()(),t.TgZ(65,"tr")(66,"td"),t._uU(67,"Sales Order"),t.qZA(),t.TgZ(68,"td"),t._uU(69,":"),t.qZA(),t.TgZ(70,"td")(71,"a"),t._uU(72),t.qZA()()(),t.TgZ(73,"tr")(74,"td"),t._uU(75,"Created By"),t.qZA(),t.TgZ(76,"td"),t._uU(77,":"),t.qZA(),t.TgZ(78,"td"),t._uU(79,"SUPERADMIN"),t.qZA()()()()()(),t.TgZ(80,"nz-card",37)(81,"nz-table",38,39)(83,"thead")(84,"tr")(85,"th",40),t._uU(86,"Image"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"Item"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Return Initiated"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Amount (TK)"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"Received QTY"),t.qZA(),t.TgZ(95,"th"),t._uU(96,"Refund Amount (TK)"),t.qZA(),t.TgZ(97,"th"),t._uU(98,"Serials"),t.qZA(),t.TgZ(99,"th"),t._uU(100,"Recieved"),t.qZA()()(),t.TgZ(101,"tbody"),t.YNc(102,Ct,24,7,"tr",41),t.qZA()(),t.TgZ(103,"div",34)(104,"div",35)(105,"nz-card",42)(106,"div",43)(107,"h4"),t._uU(108,"Sub-Total"),t.qZA(),t.TgZ(109,"span"),t._uU(110,"1200 TK"),t.qZA()(),t.TgZ(111,"div",43)(112,"h4"),t._uU(113,"Shipping"),t.qZA(),t.TgZ(114,"span"),t._uU(115,"120 TK"),t.qZA()(),t._UZ(116,"nz-divider",44),t.TgZ(117,"div",43),t._UZ(118,"h4"),t.TgZ(119,"span"),t._uU(120," Refundable Amount = 1200 TK"),t.qZA()(),t.TgZ(121,"div",45)(122,"h4"),t._uU(123,"Refund Amount"),t.qZA(),t.TgZ(124,"span"),t._UZ(125,"input",46),t._uU(126,"TK "),t.qZA()(),t._UZ(127,"nz-divider",44),t.TgZ(128,"div",43),t._UZ(129,"h4"),t.TgZ(130,"span"),t._uU(131," Refundable Amount = 0 TK"),t.qZA()()()(),t.TgZ(132,"div",35)(133,"div",47)(134,"button",48),t._uU(135,"Reject"),t.qZA(),t.TgZ(136,"button",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.updateReturn())}),t._uU(137,"Save"),t.qZA()()()()()()()}if(2&r){const e=o.$implicit,a=t.MAs(82),n=t.oxw();t.Q6J("nzTitle",e),t.xp6(2),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzXs",t.DdM(25,x))("nzLg",t.DdM(26,E)),t.xp6(12),t.hij(" ",t.lcZ(16,23,null==n.return?null:n.return.deliveryStatus)," "),t.xp6(8),t.Oqu(null!=n.return&&n.return.refundEligible?"Yes":"No"),t.xp6(9),t.Q6J("ngIf",null==n.return?null:n.return.refundEligible),t.xp6(7),t.Oqu(null==(null==n.return?null:n.return.customerName)?"01917632421":null==n.return?null:n.return.customerName),t.xp6(7),t.Oqu(null==n.return?null:n.return.reason),t.xp6(7),t.Oqu(null==n.return?null:n.return.notes),t.xp6(1),t.Q6J("nzXs",t.DdM(27,x))("nzLg",t.DdM(28,E)),t.xp6(10),t.Oqu(null==n.return?null:n.return.invoiceId),t.xp6(8),t.Oqu(null==n.return?null:n.return.orderNumber),t.xp6(9),t.Q6J("nzData",n.listOfData),t.xp6(21),t.Q6J("ngForOf",a.data),t.xp6(1),t.Q6J("nzGutter",0),t.xp6(1),t.Q6J("nzXs",t.DdM(29,x))("nzLg",t.DdM(30,x)),t.xp6(28),t.Q6J("nzXs",t.DdM(31,x))("nzLg",t.DdM(32,x)),t.xp6(4),t.Q6J("disabled",n.saveButtonDisable)("nzType",n.saveButtonDisable?"default":"primary")}}function Zt(r,o){if(1&r&&t._UZ(0,"nz-option",59),2&r){const e=o.$implicit;t.Q6J("nzLabel",e)("nzValue",e)}}function bt(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"nz-select",57),t.NdJ("ngModelChange",function(n){const u=t.CHM(e).$implicit;return t.KtG(u.serials=n)}),t.YNc(9,Zt,1,2,"nz-option",58),t.qZA()()()}if(2&r){const e=o.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.sku),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Q6J("ngModel",e.serials)("nzMaxMultipleCount",e.quantity),t.xp6(1),t.Q6J("ngForOf",e.serials)}}function Dt(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"form",54)(2,"nz-table",55,56)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Sku"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Qty"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Serial"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,bt,10,6,"tr",41),t.qZA()()(),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("dataForm",e.invoiceForm),t.xp6(1),t.Q6J("nzData",null==e.return?null:e.return.products),t.xp6(13),t.Q6J("ngForOf",null==e.return?null:e.return.products)}}function xt(r,o){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function yt(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",60),t.YNc(2,xt,2,1,"span",41),t.qZA(),t.BQk()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.serialNumbers)}}const Tt=[{path:"",component:ut},{path:"details/:id",component:(()=>{class r{constructor(e,a,n,i,u,l,Ot){this.router=e,this.dialog=a,this.returnService=n,this.productService=i,this.msg=u,this.activatedRoute=l,this.reloadService=Ot,this.checked=[!1],this.tabs=["Overview","Edit","Received","Refund"],this.listOfColumn=[{title:"Name",compare:(f,C)=>{var h,m;return null===(h=f.productData)||void 0===h?void 0:h.name.localeCompare(null===(m=C.productData)||void 0===m?void 0:m.name)},priority:!1},{title:"Sku",compare:null,priority:!1},{title:"Shipped",compare:(f,C)=>{var h,m;return(null===(h=f.productData)||void 0===h?void 0:h.quantity)-(null===(m=C.productData)||void 0===m?void 0:m.quantity)},priority:2},{title:"Amount",compare:(f,C)=>{var h,m;return(null===(h=f.productData)||void 0===h?void 0:h.costPrice)-(null===(m=C.productData)||void 0===m?void 0:m.costPrice)},priority:1},{title:"Recieved Qty",compare:(f,C)=>f.damageQuantity-C.damageQuantity,priority:1},{title:"Refunded",compare:(f,C)=>f.damageAmount-C.damageAmount,priority:1}],this.dataSet=[],this.itemsPerPage=10,this.currentPage=1,this.totalItems=1,this.query=null,this.sortQuery={createdAt:-1},this.saveButtonDisable=!0,this.serialVisible=!1,this.showSerial=!1,this.serialNumbers=[]}ngOnInit(){this.subRouteOne=this.activatedRoute.paramMap.subscribe(e=>{this.id=e.get("id"),this.id&&this.getDataById(this.id)}),this.subRouteTwo=this.activatedRoute.queryParams.subscribe(e=>{console.log("QeryParams",e),e&&(this.sortQueryParam=e.sortQueryParam,this.startDateParam=e.startDateParam,this.endDateParam=e.endDateParam,this.dateRangeParam=e.dateRangeParam,this.filterSortCheck())}),this.reloadService.refreshReturns$.subscribe(()=>{this.getAllData()}),this.getAllData()}getAllData(){const e={currentPage:this.currentPage.toString(),pageSize:this.itemsPerPage.toString()};this.returnService.getAllReturns(e,this.sortQuery,this.filter).subscribe(a=>{console.log("DETAILS",a.data),this.dataSet=a.data},a=>{console.log(a)})}getDataById(e){this.returnService.getReturnById(e).subscribe(a=>{var n;this.return=a.data,console.log(this.return),this.listOfData=null===(n=this.return)||void 0===n?void 0:n.products},a=>{console.log(a)})}startEdit(e){this.editSku=e}stopEdit(){this.editSku=null}updateReturn(){this.showSerialSelect()}viewReturn(){let e=7;this.return.products.forEach(a=>{0===a.recievedQty&&(e=8)}),this.return.deliveryStatus=e,console.log(this.return.deliveryStatus),this.returnService.recieveReturnById(this.return._id,this.return).subscribe(a=>{this.msg.create("success",a.message),this.saveButtonDisable=!0},a=>{this.msg.create("error",a.message)})}markRecieved(e,a){a?(this.listOfData[e].recievedQty=a,this.listOfData[e].returnedQty=a,this.saveButtonDisable=!1):(this.listOfData[e].returnedQty=0,this.listOfData[e].recievedQty=0,this.saveButtonDisable=!1)}getRecievedStatus(e,a){return e===a}filterSortCheck(){if(this.startDateParam&&this.onDateChange(this.startDateParam,this.endDateParam),this.sortQueryParam){let e;switch(this.sortQueryParam){case"1":e={name:1},this.sortFilter="Product Title (A-Z)";break;case"2":e={createdAt:1},this.sortFilter="Created (Oldest First)";break;case"3":e={quantity:-1},this.sortFilter="High Inventory";break;case"4":e={categoryName:-1},this.sortFilter="Product Type (A-Z)";break;case"4":e={vendor:1},this.sortFilter="Vendor (A-Z)";break;default:this.sortQuery=null}this.sortQuery=e}this.reloadService.needRefreshReturns$()}onDateChange(e,a,n){this.filter=Object.assign(Object.assign({},this.filter),a?{returnDate:{$gte:e,$lte:a}}:{returnDate:{$gte:e,$lt:new Date}}),this.reloadService.needRefreshReturns$()}onBackButton(){this.router.navigate(["/admin/return"],{queryParams:{page:1,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},queryParamsHandling:"preserve"})}onReturnDetailsChanged(e,a){this.router.navigate(["/admin/return/details",a],{queryParams:{page:1,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},queryParamsHandling:"merge"})}showSerialSelect(){this.serialVisible=!0}handleSerialCancel(){this.serialVisible=!1}handleSerialOk(){this.serialVisible=!1,this.updateReturnSerials(this.return.products)}updateReturnSerials(e){this.productService.returnSerials(e).subscribe(a=>{this.viewReturn(),this.msg.success(a.message)},a=>{this.msg.error(a.message)})}showSerials(e){this.serialNumbers=e,this.showSerial=!0}handleViewOk(){this.serialNumbers=[],console.log("Button ok clicked!"),this.showSerial=!1}handleViewCancel(){this.serialNumbers=[],console.log("Button cancel clicked!"),this.showSerial=!1}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Z.F0),t.Y36(dt.uw),t.Y36(A.x),t.Y36(ct.M),t.Y36(gt.dD),t.Y36(Z.gz),t.Y36(q.f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-details"]],viewQuery:function(e,a){if(1&e&&t.Gf(mt,5),2&e){let n;t.iGM(n=t.CRH())&&(a.menuTrigger=n.first)}},decls:56,vars:11,consts:[[1,"page-header"],[1,"las","la-arrow-left",3,"click"],[1,"header-action"],["type","button"],[1,"table-samary"],["nzSize","small"],[1,"main-layout",2,"min-height","50vh"],[1,"left_navbar"],[1,"inner_nav_header"],[1,"header_action"],["nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-angle-down"],["statusMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item",""],["nz-button","","nz-dropdown","","nzPlacement","bottomRight",3,"nzDropdownMenu"],["nz-icon","","nzType","ellipsis"],["actionMenu","nzDropdownMenu"],["nz-input","","placeholder","Basic usage"],["nz-menu","","nzTheme","light","nzMode","inline",1,"refund_list"],["nz-menu-item","",3,"active","click",4,"ngFor","ngForOf"],[1,"refund_body_main",2,"background","#fff"],[1,"refund_details_header"],[1,"return_action"],[3,"nzTitle",4,"ngFor","ngForOf"],["nzTitle","Select Serial Numbers",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nzTitle","Serials",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],["nz-menu-item","",3,"click"],[1,"left"],[3,"click"],[1,"right"],[3,"nzTitle"],[1,"refund_details_body"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzLg"],[4,"ngIf"],["nzSize","small",1,"refund_details_body-product"],["nzSize","small","nzShowPagination","false",3,"nzData"],["returnItemsTable",""],[1,"thumb_img"],[4,"ngFor","ngForOf"],["nzSize","small",1,"ammount_summary"],[1,"ammount_summary_single"],["nzType","horizontal",2,"margin","10px 0"],[1,"ammount_summary_single","mt15"],["nz-input","","value","1200"],[1,"action_btn"],["nzSize","large","nz-button","","nzType","default"],["nz-button","","nzSize","large",3,"disabled","nzType","click"],[2,"width","100px"],["src","https://cdn.shopify.com/s/files/1/0464/2281/8974/products/O1CN015QAr4e2Jn1Wi9H9C2__1762329465-0-cib.jpg?v=1662883560","alt","",2,"max-width","100%"],["nz-button","","type","button",3,"click"],["nz-button","",3,"disabled","click"],[3,"dataForm"],[3,"nzData"],["basicTable",""],["name","tag","nzMode","tags","nzPlaceHolder","Select Serials",2,"width","200px",3,"ngModel","nzMaxMultipleCount","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],[1,"serial"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"h2")(2,"i",1),t.NdJ("click",function(){return a.onBackButton()}),t.qZA(),t._uU(3," All Return"),t.qZA(),t.TgZ(4,"div",2)(5,"button",3),t._uU(6,"Export"),t.qZA(),t.TgZ(7,"button",3),t._uU(8,"Import"),t.qZA()()(),t.TgZ(9,"div",4)(10,"nz-card",5)(11,"nz-layout",6)(12,"nz-sider",7)(13,"div",8)(14,"div",9)(15,"a",10),t._uU(16," All Refund "),t._UZ(17,"i",11),t.TgZ(18,"nz-dropdown-menu",null,12)(20,"ul",13)(21,"li",14),t._uU(22,"Close"),t.qZA(),t.TgZ(23,"li",14),t._uU(24,"Pending"),t.qZA(),t.TgZ(25,"li",14),t._uU(26,"Reject"),t.qZA()()()(),t.TgZ(27,"nz-button-group")(28,"button",15),t._UZ(29,"span",16),t.qZA(),t.TgZ(30,"nz-dropdown-menu",null,17)(32,"ul",13)(33,"li",14),t._uU(34,"Delete"),t.qZA(),t.TgZ(35,"li",14),t._uU(36,"Pending"),t.qZA(),t.TgZ(37,"li",14),t._uU(38,"Reject"),t.qZA()()()()(),t._UZ(39,"input",18),t.qZA(),t.TgZ(40,"ul",19),t.YNc(41,pt,15,9,"li",20),t.qZA()(),t.TgZ(42,"nz-content",21)(43,"div",22)(44,"h4"),t._uU(45),t.qZA(),t.TgZ(46,"h5"),t._uU(47),t.ALo(48,"date"),t.qZA()(),t.TgZ(49,"div",23)(50,"nz-tabset"),t.YNc(51,Pt,138,33,"nz-tab",24),t.qZA()()()()()(),t.TgZ(52,"nz-modal",25),t.NdJ("nzVisibleChange",function(i){return a.serialVisible=i})("nzOnCancel",function(){return a.handleSerialCancel()})("nzOnOk",function(){return a.handleSerialOk()}),t.YNc(53,Dt,16,3,"ng-container",26),t.qZA(),t.TgZ(54,"nz-modal",27),t.NdJ("nzVisibleChange",function(i){return a.showSerial=i})("nzOnCancel",function(){return a.handleViewCancel()})("nzOnOk",function(){return a.handleViewOk()}),t.YNc(55,yt,3,1,"ng-container",26),t.qZA()),2&e){const n=t.MAs(19),i=t.MAs(31);t.xp6(15),t.Q6J("nzDropdownMenu",n),t.xp6(13),t.Q6J("nzDropdownMenu",i),t.xp6(13),t.Q6J("ngForOf",a.dataSet),t.xp6(4),t.Oqu(null==a.return?null:a.return.returnId),t.xp6(2),t.Oqu(t.xi3(48,8,null==a.return?null:a.return.returnDate,"short")),t.xp6(4),t.Q6J("ngForOf",a.tabs),t.xp6(1),t.Q6J("nzVisible",a.serialVisible),t.xp6(2),t.Q6J("nzVisible",a.showSerial)}},dependencies:[p.sg,p.O5,c._Y,c.JJ,c.JL,c.On,c.F,Q.du,Q.Hf,U.Zp,R.hw,R.OK,R.t7,z.ix,z.fY,w.w,F.dQ,y.xH,y.xw,T.wO,T.r9,b.cm,b.Ws,b.RR,b.wA,I.Ip,I.Vq,_.N8,_.Uo,_._C,_.Om,_.p0,_.$Z,J.t3,J.SK,_t.g,S.bd,ht.Ls,p.uU,N.M],styles:[".serial[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.serial[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:15px;border:1px solid black;margin:0 10px 10px 0}.editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:15px 0 10px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]{display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;margin-left:25px}.refunt-tab[_ngcontent-%COMP%]{min-height:80vh;margin-bottom:30px}.tab-list[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;min-width:200px;text-align:left;border-bottom:1px solid #ddd;margin-left:-22px;padding:0 0 10px}.tab-list[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px}.tab-list[_ngcontent-%COMP%]   .status-details[_ngcontent-%COMP%]{text-align:right;font-size:14px}.tab-list[_ngcontent-%COMP%]   .status-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:12px}.tab-list[_ngcontent-%COMP%]   .status-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:15px}.ant-tabs-nav-list[_ngcontent-%COMP%]{padding:0}.header_action[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.left_navbar[_ngcontent-%COMP%]{background:#fff;border-right:1px solid #ddd;min-width:230px!important}.inner_nav_header[_ngcontent-%COMP%]{margin-right:10px;border-bottom:1px solid #f0f0f0;padding-bottom:5px}.inner_nav_header[_ngcontent-%COMP%]   .header_action[_ngcontent-%COMP%]{margin-bottom:15px}.refund_list[_ngcontent-%COMP%]{padding:0;margin:0}.refund_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;padding:5px 10px 5px 0!important;justify-content:space-between;align-items:center;text-align:left;border-bottom:1px solid #f0f0f0;height:unset}.refund_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.refund_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .left[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1b75bb}.refund_body_main[_ngcontent-%COMP%]{padding:0 15px}.refund_details_header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:0 0 10px}.refund_details_header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.refund_details_header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:12px}.refund_details_body[_ngcontent-%COMP%]{padding:15px}.refund_details_body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:20px 0}.refund_details_body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{line-height:30px}.refund_details_body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #ff8800;color:#f80;padding:2px 10px}.refund_details_body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child{width:110px}.refund_details_body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:last-child{padding-left:15px}.refund_details_body-product[_ngcontent-%COMP%]{margin:30px 0}.refund_details_body-product[_ngcontent-%COMP%]   .thumb_img[_ngcontent-%COMP%]{width:100px}.ammount_summary[_ngcontent-%COMP%]{margin:15px 0;width:400px;float:right}.ammount_summary_single[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.ammount_summary_single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:70px;border:none;text-align:right;border-bottom:1px solid #e4e4e4}.ammount_summary_single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:none;box-shadow:none}.mt15[_ngcontent-%COMP%]{margin-top:15px}.action_btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.action_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:15px}@media (max-width: 500px){.main-layout[_ngcontent-%COMP%]{flex-direction:column!important}.left_navbar[_ngcontent-%COMP%]{min-width:100%!important;width:100%!important;border:none}.thumb_img[_ngcontent-%COMP%]{width:80px}.ammount_summary[_ngcontent-%COMP%]{margin:10px 0;width:300px}.refund_body_main[_ngcontent-%COMP%]{width:100%!important;margin:20px 0;padding:0}.refund_details_body[_ngcontent-%COMP%]{padding:0}}"]}),r})()}];let Mt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Z.Bz.forChild(Tt),Z.Bz]}),r})();var zt=s(60597);let Rt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,d.uK,Mt,P.q,M.P,zt.m,g.D]}),r})()},31913:(O,D,s)=>{s.d(D,{i:()=>g});var g=(()=>{return(d=g||(g={}))[d.PENDING=0]="PENDING",d[d.CANCEL=1]="CANCEL",d[d.CONFIRM=2]="CONFIRM",d[d.PARTIAL_SHIPPING=3]="PARTIAL_SHIPPING",d[d.SHIPPING=4]="SHIPPING",d[d.DELIVERED=5]="DELIVERED",d[d.RETURNING=6]="RETURNING",d[d.RETURNED=7]="RETURNED",d[d.PARTIAL_RETURNED=8]="PARTIAL_RETURNED",d[d.REFUND=9]="REFUND",d[d.EDIT=10]="EDIT",g;var d})()},73433:(O,D,s)=>{s.d(D,{M:()=>M});var g=s(31913),d=s(5e3);let M=(()=>{class P{transform(c,v){switch(c){case g.i.PENDING:return"Pending";case g.i.CONFIRM:return"Confirmed";case g.i.PARTIAL_SHIPPING:return"Partial Invoiced";case g.i.SHIPPING:return"Invoiced";case g.i.DELIVERED:return"Delivered";case g.i.CANCEL:return"Canceled";case g.i.RETURNING:return"Returning";case g.i.RETURNED:return"Returned";case g.i.PARTIAL_RETURNED:return"Partial Returned";case g.i.REFUND:return"Refund";default:return"-"}}}return P.\u0275fac=function(c){return new(c||P)},P.\u0275pipe=d.Yjl({name:"orderStatus",type:P,pure:!0}),P})()}}]);