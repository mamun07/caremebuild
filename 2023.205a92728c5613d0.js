"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[2023],{12023:(pt,T,a)=>{a.r(T),a.d(T,{MyAccountModule:()=>st});var c=a(93075),y=a(90898),u=a(69808),x=a(99826),D=a(70655),I=a(53039),t=a(5e3),M=a(50072),A=a(48966),Z=a(70162),O=a(73071),E=a(5944),U=a(85314),j=a(61293),F=a(77484),d=a(41894),g=a(50939),f=a(11047),v=a(78054),N=a(76042),L=a(82683),P=a(92643);function k(n,o){1&n&&(t.TgZ(0,"a"),t._uU(1,"Edit"),t.qZA())}const l=function(){return{span:24}},C=function(){return{span:12}};function R(n,o){if(1&n&&(t.TgZ(0,"div",6)(1,"nz-card",38)(2,"table",39)(3,"tr")(4,"th",40),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()(),t.TgZ(8,"tr")(9,"th",40),t._uU(10,"Phone"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()(),t.TgZ(13,"tr")(14,"th",40),t._uU(15,"Email"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA()(),t.TgZ(18,"tr")(19,"th",40),t._uU(20,"Address"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA()()()(),t.YNc(23,k,2,0,"ng-template",null,37,t.W1O),t.qZA()),2&n){const e=o.$implicit,i=t.MAs(24);t.Q6J("nzXs",t.DdM(11,l))("nzLg",t.DdM(12,C)),t.xp6(1),t.MGl("nzTitle","",e.addressType," Address"),t.Q6J("nzExtra",i),t.xp6(6),t.Oqu(e.name),t.xp6(5),t.Oqu(e.phone),t.xp6(5),t.Oqu(e.email),t.xp6(5),t.HOy("",e.address,", ",null==e?null:e.thana.name,", ",null==e?null:e.city.name,", ",null==e?null:e.zila.name,", Bangladesh")}}function J(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSubmit())}),t._uU(1," Update Profile "),t.qZA()}}const _=function(){return{span:8}},z=function(){return{span:6}},w=[{path:"",component:(()=>{class n{constructor(e,i,r,s,p,m,h,S){this.spinner=e,this.dialog=i,this.fileUploadService=r,this.fb=s,this.userService=p,this.userDataService=m,this.uiService=h,this.reloadService=S,this.loading=!1,this.file=null,this.imgBlob=null,this.imgPlaceHolder="/assets/svg/user.svg",this.imageChangedEvent=null,this.addresses=[]}ngOnInit(){this.dataForm=this.fb.group({fullName:[""],username:["",[c.kI.required]],phoneNo:["",[c.kI.required]],gender:[""],age:[""],zilla:[""],city:[""],thana:[""],zipcode:[""],email:["",[c.kI.email]],address:[""],password:["",[c.kI.required]]}),this.reloadService.refreshUser$.subscribe(()=>{this.userStatus=this.userService.getUserStatus(),this.userStatus?this.getUserInfo():this.uiService.createMessage("error","Please Login First")}),this.userStatus=this.userService.getUserStatus(),this.userStatus?(this.getUserInfo(),this.getAllAddress()):this.uiService.createMessage("error","Please Login First")}getAllAddress(){this.userDataService.getAllAddress().subscribe(e=>{this.addresses=e.data},e=>{console.log(e.data)})}getUserInfo(){this.userDataService.getLoggedInUserInfo().subscribe(e=>{console.log(e.data),this.user=e.data,this.dataForm.patchValue(this.user)},e=>{this.uiService.createMessage("error",e)})}onSubmit(){const e=Object.assign(Object.assign(Object.assign({},this.dataForm.value),{_id:this.user._id}),{profileImg:this.url});this.userDataService.editLoginUserInfo(e).subscribe(i=>{this.uiService.createMessage("success","Profile Updated Successfully"),this.reloadService.needRefreshUser$()},i=>{this.uiService.createMessage("error",i)})}fileChangeEvent(e){return(0,D.mG)(this,void 0,void 0,function*(){this.file=e.target.files[0];const i=this.file.name.toLowerCase().split(" ").join("-").split(".").shift(),r=this.file.name.split(".").pop();this.newFileName=`${Date.now().toString()}_${i}.${r}`;const s=new FileReader;s.readAsDataURL(this.file),s.onload=()=>{},e.target.files[0]&&(yield this.openComponentDialog(e)),this.imageChangedEvent=e})}openComponentDialog(e){this.dialog.open(I.a,{data:e,panelClass:["theme-dialog"],autoFocus:!1,disableClose:!0,width:"600px",minHeight:"400px",maxHeight:"600px"}).afterClosed().subscribe(r=>{r&&(r.imgBlob&&(this.imgBlob=r.imgBlob),r.croppedImage&&(this.pickedImage=r.croppedImage,this.imgPlaceHolder=this.pickedImage,this.imageUploadOnServer()))})}imageUploadOnServer(){this.fileUploadService.uploadSingleImage({fileName:this.newFileName,file:this.imgBlob,folderPath:"profile"}).subscribe(i=>{this.url=i.downloadUrl,this.onSubmit()},i=>{console.log(i)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.t2),t.Y36(A.uw),t.Y36(Z.J),t.Y36(c.qu),t.Y36(O.K),t.Y36(E.M),t.Y36(U.F),t.Y36(j.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-my-account"]],decls:87,vars:66,consts:[["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzLg",4,"ngFor","ngForOf"],["nz-col","",3,"nzXs"],["nzSize","default","nzTitle","Manage Profile",3,"nzExtra"],[3,"formGroup","ngSubmit"],["nz-row",""],["nz-col","",3,"nzXs","nzLg"],[1,"manage_account"],[1,"account_form"],[1,"form_group"],["nz-input","","placeholder","Full Name","formControlName","fullName"],[1,"phone"],["nz-input","","placeholder","you@mail.com","formControlName","email"],["ngModel","male","formControlName","gender"],["nzValue","male","nzLabel","Male"],["nzValue","female","nzLabel","Female"],["nz-input","","placeholder","age","formControlName","age","digitOnly",""],["ngModel","zilla","formControlName","zilla"],["nzValue","dhaka","nzLabel","dhaka"],["nzValue","chittagong","nzLabel","chittagong"],["ngModel","city","formControlName","city"],["nzValue","gajipur","nzLabel","gajipur"],["ngModel","thana","formControlName","thana"],["nzValue","cantonment","nzLabel","cantonment"],["nzValue","gulshan","nzLabel","gulshan"],["for","firstname"],["nz-input","","placeholder","Zip Code","formControlName","zipcode"],[3,"nzMaxCharacterCount"],["rows","1","formControlName","address","placeholder","Address","nz-input",""],[1,"account_image"],[2,"width","80%"],[1,"entry-thumb"],[2,"width","200px","height","200px","border-radius","100%",3,"src"],[1,"upload"],["nz-button","","type","button",2,"margin-top","10px",3,"click"],["type","file","accept","image/*",3,"hidden","change"],["profileImagePicker",""],["extraTemplate",""],["nzSize","small",3,"nzTitle","nzExtra"],[2,"margin","0"],[2,"width","15%"],["nz-button","","nzType","primary","nzSize","large",1,"caremebtn",3,"click"]],template:function(e,i){if(1&e){const r=t.EpF();t.TgZ(0,"div",0),t.YNc(1,R,25,13,"div",1),t.qZA(),t._UZ(2,"br"),t.TgZ(3,"div",0)(4,"div",2)(5,"nz-card",3)(6,"form",4),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",0)(13,"div",6)(14,"label"),t._uU(15,"Full Name"),t.qZA(),t._UZ(16,"br")(17,"input",10),t.qZA(),t.TgZ(18,"div",6)(19,"label"),t._uU(20,"Phone Number"),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"div",11),t._uU(23),t.qZA()(),t.TgZ(24,"div",6)(25,"label"),t._uU(26,"E-mail"),t.qZA(),t._UZ(27,"br")(28,"input",12),t.qZA(),t.TgZ(29,"div",6)(30,"label"),t._uU(31,"Gender"),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"nz-select",13),t._UZ(34,"nz-option",14)(35,"nz-option",15),t.qZA()(),t.TgZ(36,"div",6)(37,"label"),t._uU(38,"Age"),t.qZA(),t._UZ(39,"br")(40,"input",16),t.qZA(),t.TgZ(41,"div",6)(42,"label"),t._uU(43,"Zilla"),t.qZA(),t._UZ(44,"br"),t.TgZ(45,"nz-select",17),t._UZ(46,"nz-option",18)(47,"nz-option",19),t.qZA()(),t.TgZ(48,"div",6)(49,"label"),t._uU(50,"Thana"),t.qZA(),t._UZ(51,"br"),t.TgZ(52,"nz-select",20),t._UZ(53,"nz-option",18)(54,"nz-option",21),t.qZA()(),t.TgZ(55,"div",6)(56,"label"),t._uU(57,"City"),t.qZA(),t._UZ(58,"br"),t.TgZ(59,"nz-select",22),t._UZ(60,"nz-option",23)(61,"nz-option",24),t.qZA()(),t.TgZ(62,"div",6)(63,"label",25),t._uU(64,"Zip Code"),t.qZA(),t._UZ(65,"br")(66,"input",26),t.qZA(),t.TgZ(67,"div",6)(68,"label",25),t._uU(69,"Address"),t.qZA(),t._UZ(70,"br"),t.TgZ(71,"nz-textarea-count",27),t._UZ(72,"textarea",28),t.qZA()()()()(),t.TgZ(73,"div",29)(74,"nz-card",30)(75,"div",31)(76,"div",0)(77,"div",6),t._UZ(78,"img",32),t.qZA(),t.TgZ(79,"div",6)(80,"div",33)(81,"button",34),t.NdJ("click",function(){t.CHM(r);const p=t.MAs(84);return t.KtG(p.click())}),t._uU(82),t.qZA(),t.TgZ(83,"input",35,36),t.NdJ("change",function(p){return i.fileChangeEvent(p)}),t.qZA()()()()()()()()()()()(),t.YNc(85,J,2,0,"ng-template",null,37,t.W1O),t.qZA()()}if(2&e){const r=t.MAs(86);t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("ngForOf",i.addresses),t.xp6(2),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzXs",t.DdM(39,l)),t.xp6(1),t.Q6J("nzExtra",r),t.xp6(1),t.Q6J("formGroup",i.dataForm),t.xp6(2),t.Q6J("nzXs",t.DdM(40,l))("nzLg",t.DdM(41,l)),t.xp6(4),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzXs",t.DdM(42,l))("nzLg",t.DdM(43,C)),t.xp6(5),t.Q6J("nzXs",t.DdM(44,l))("nzLg",t.DdM(45,C)),t.xp6(5),t.Oqu(i.dataForm.value.phoneNo),t.xp6(1),t.Q6J("nzXs",t.DdM(46,l))("nzLg",t.DdM(47,_)),t.xp6(5),t.Q6J("nzXs",t.DdM(48,l))("nzLg",t.DdM(49,_)),t.xp6(7),t.Q6J("nzXs",t.DdM(50,l))("nzLg",t.DdM(51,_)),t.xp6(5),t.Q6J("nzXs",t.DdM(52,l))("nzLg",t.DdM(53,z)),t.xp6(7),t.Q6J("nzXs",t.DdM(54,l))("nzLg",t.DdM(55,z)),t.xp6(7),t.Q6J("nzXs",t.DdM(56,l))("nzLg",t.DdM(57,z)),t.xp6(7),t.Q6J("nzXs",t.DdM(58,l))("nzLg",t.DdM(59,z)),t.xp6(5),t.Q6J("nzXs",t.DdM(60,l))("nzLg",t.DdM(61,l)),t.xp6(4),t.Q6J("nzMaxCharacterCount",100),t.xp6(5),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzXs",t.DdM(62,l))("nzLg",t.DdM(63,l)),t.xp6(1),t.Q6J("src",null!=i.user&&i.user.profileImg?null==i.user?null:i.user.profileImg:"/assets/images/avatar/user-young.jpg",t.LSH),t.xp6(1),t.Q6J("nzXs",t.DdM(64,l))("nzLg",t.DdM(65,l)),t.xp6(3),t.hij(" ",null!=i.user&&i.user.profileImg?"Change Image":"Upload Image"," "),t.xp6(1),t.Q6J("hidden",!0)}},dependencies:[u.sg,F.bd,d.t3,d.SK,g.Uo,g._C,g.$Z,f.w,f.Zp,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,v.Ip,v.Vq,N.ix,L.w,P.dQ],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px;text-align:left}table[_ngcontent-%COMP%]{margin-bottom:50px}.phone[_ngcontent-%COMP%]{border:.5px solid #ddd;padding:5px 20px;width:100%;cursor:not-allowed}.login-form[_ngcontent-%COMP%]{max-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}[nz-form][_ngcontent-%COMP%]{max-width:600px}button[_ngcontent-%COMP%]{margin-left:8px}.manage_account[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:50px}.manage_account[_ngcontent-%COMP%]   .account_form[_ngcontent-%COMP%]{width:60%}.manage_account[_ngcontent-%COMP%]   .account_image[_ngcontent-%COMP%]{width:40%}.form_group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:20px}.form_group[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:100%}.account_image[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center}.account_image[_ngcontent-%COMP%]   .entry-thumb[_ngcontent-%COMP%]{text-align:center}.link[_ngcontent-%COMP%]{cursor:pointer;padding:10px}@media (max-width: 500px){.manage_account[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse}.manage_account[_ngcontent-%COMP%]   .account_form[_ngcontent-%COMP%], .manage_account[_ngcontent-%COMP%]   .account_image[_ngcontent-%COMP%]{width:100%}}"]}),n})()}];let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[x.Bz.forChild(w),x.Bz]}),n})();var Q=a(83877),b=a(50226),V=a(95113),q=a(70925),B=a(969),H=a(92124),W=a(404);let nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.vT,u.ez,d.Jb,H.PV,W.cg,V.xu,q.ud,B.T,d.Jb]}),n})(),at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.vT,u.ez]}),n})(),st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,$,F.vh,d.Jb,g.HQ,nt,f.o7,c.UX,c.u5,y.q,Q.QG,at,v.LV,N.sL]}),n})()}}]);