"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[9815],{31913:(A,m,i)=>{i.d(m,{i:()=>d});var d=(()=>{return(n=d||(d={}))[n.PENDING=0]="PENDING",n[n.CANCEL=1]="CANCEL",n[n.CONFIRM=2]="CONFIRM",n[n.PARTIAL_SHIPPING=3]="PARTIAL_SHIPPING",n[n.SHIPPING=4]="SHIPPING",n[n.DELIVERED=5]="DELIVERED",n[n.RETURNING=6]="RETURNING",n[n.RETURNED=7]="RETURNED",n[n.PARTIAL_RETURNED=8]="PARTIAL_RETURNED",n[n.REFUND=9]="REFUND",n[n.EDIT=10]="EDIT",d;var n})()},4602:(A,m,i)=>{i.d(m,{b:()=>d});var d=(()=>{return(n=d||(d={}))[n.PAID=0]="PAID",n[n.UNPAID=1]="UNPAID",n[n.PENDING=2]="PENDING",n[n.PARTIALPAID=3]="PARTIALPAID",n[n.REFUNDED=4]="REFUNDED",n[n.OVERDUE=5]="OVERDUE",n[n.CANCEL=6]="CANCEL",n[n.EXPIRED=7]="EXPIRED",n[n.WRITE_OFF=8]="WRITE_OFF",d;var n})()},62157:(A,m,i)=>{i.r(m),i.d(m,{MyOrdersModule:()=>j});var d=i(93075),n=i(69808),y=i(94813),s=i(78372),_=i(71884),h=i(63900),T=i(60515),r=i(31913),t=i(5e3),a=i(99826),p=i(68132),g=i(73071),E=i(49727),z=i(5944),D=i(66082),I=i(90868),f=i(50939),x=i(87238),v=i(11047),P=i(85249),U=i(73433),Z=i(81197);const N=["searchForm"],R=["searchInput"],F=function(){return{fontSize:"14px",color:"#da5894"}};function b(l,c){if(1&l&&(t.TgZ(0,"div"),t._UZ(1,"nz-countdown",16),t.qZA()),2&l){const e=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("nzValueStyle",t.DdM(2,F))("nzValue",o.startTimer(null==e?null:e.date))}}function L(l,c){if(1&l&&(t.TgZ(0,"a"),t._uU(1," Pay Now "),t.YNc(2,b,2,3,"div",11),t.qZA()),2&l){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("ngIf",o.displayPayNow(null==e?null:e.date)>0)}}function S(l,c){if(1&l&&(t.TgZ(0,"tr")(1,"td",17),t._UZ(2,"img",18),t.qZA(),t.TgZ(3,"td")(4,"h3"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td")(13,"button"),t._uU(14),t.ALo(15,"paymentStatus"),t.qZA()(),t.TgZ(16,"td",19)(17,"h3"),t._uU(18," Estimated Delivery by "),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"date"),t.qZA(),t.TgZ(22,"span"),t._uU(23),t.ALo(24,"date"),t.qZA()()(),t.TgZ(25,"td")(26,"span",20),t._uU(27),t.ALo(28,"orderStatus"),t.qZA()()()),2&l){const e=c.$implicit;t.xp6(2),t.Q6J("src",null==e?null:e.image,t.LSH)("alt",null==e?null:e.name),t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.sku),t.xp6(2),t.hij("Total: ",(null==e?null:e.price)*(null==e?null:e.quantity)," TK"),t.xp6(2),t.hij("Advance: ",null==e?null:e.advanceAmount," TK"),t.xp6(2),t.Tol(0===(null==e?null:e.paymentStatus)?"payment paid":"payment unpaid"),t.xp6(1),t.hij(" ",t.lcZ(15,12,null==e?null:e.paymentStatus)," "),t.xp6(6),t.hij("",t.lcZ(21,14,null==e?null:e.deliveryDateFrom)," - "),t.xp6(3),t.Oqu(t.lcZ(24,16,null==e?null:e.deliveryDateTo)),t.xp6(4),t.Oqu(t.lcZ(28,18,null==e?null:e.deliveryStatus))}}const B=function(l){return["../../order-details",l]};function G(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t.NdJ("nzExpandChange",function(u){const O=t.CHM(e).$implicit;return t.KtG(O.expand=u)}),t.qZA(),t.TgZ(2,"td")(3,"a",9)(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"h5"),t._uU(7),t.ALo(8,"date"),t.qZA()()(),t._UZ(9,"td")(10,"td")(11,"td")(12,"td"),t.TgZ(13,"td",10),t.NdJ("click",function(){const C=t.CHM(e).$implicit,O=t.oxw(2);return t.KtG(O.goToSuccess(null==C?null:C.orderId))}),t.YNc(14,L,3,1,"a",11),t.qZA()(),t.TgZ(15,"tr",12)(16,"nz-table",13,14)(18,"tbody"),t.YNc(19,S,29,20,"tr",15),t.qZA()()()}if(2&l){const e=c.$implicit;t.xp6(1),t.Q6J("nzExpand",e.expand),t.xp6(2),t.Q6J("routerLink",t.VKq(12,B,e.id)),t.xp6(2),t.Oqu(null==e?null:e.orderId),t.xp6(2),t.Oqu(t.xi3(8,9,null==e?null:e.date,"short")),t.xp6(7),t.Q6J("ngIf",e.paidAmount<e.totalAmount),t.xp6(1),t.Q6J("nzExpand",e.expand),t.xp6(1),t.Q6J("nzData",e.products)("nzShowPagination",!1),t.xp6(3),t.Q6J("ngForOf",e.products)}}function J(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"nz-tab",3),t.NdJ("nzClick",function(){const C=t.CHM(e).$implicit,O=t.oxw();return t.KtG(O.onTabSelect(C))}),t.TgZ(1,"nz-table",4,5)(3,"thead")(4,"tr",6),t._UZ(5,"th"),t.TgZ(6,"th"),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Platform"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Version"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Upgraded"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Creator"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Date"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Action"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,G,20,14,"ng-template",7),t.qZA()()()}if(2&l){const e=c.$implicit,o=t.oxw();t.Q6J("nzTitle",e),t.xp6(1),t.Q6J("nzLoading",o.loading)("nzData",o.orders)("nzPageSize",10),t.xp6(20),t.Q6J("ngForOf",o.listOfParentData)}}function V(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"form",21,22)(2,"input",23,24),t.NdJ("focus",function(u){t.CHM(e);const C=t.oxw();return t.KtG(C.handleFocus(u))}),t.qZA()()}}const w=[{path:"",component:(()=>{class l{constructor(e,o,u,C,O,$){this.router=e,this.orderService=o,this.userService=u,this.message=C,this.userDataService=O,this.productService=$,this.isFocused=!1,this.query=null,this.loading=!1,this.overlay=!1,this.searchOrders=[],this.isOpen=!1,this.currentDate=Date.now(),this.timeLeft=60,this.tabs=["All","Canceled","Confirmed","Shipped"],this.listOfParentData=[]}ngOnInit(){this.loading=!0,this.getUser()}handleFocus(e){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchOrders.length>0&&this.setPanelState(e),this.isFocused=!0)}setPanelState(e){e&&e.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.loading||this.searchOrders.length>0&&(this.isOpen=!0,this.overlay=!0)}startTimer(e){return new Date(e).getTime()+108e5}displayPayNow(e){return this.startTimer(e)-Date.now()}setItems(){var e;this.loading=!0,this.listOfParentData=[];for(let o=0;o<(null===(e=this.orders)||void 0===e?void 0:e.length);o++)this.listOfParentData.push({key:o,id:this.orders[o]._id,orderId:this.orders[o].orderId,date:this.orders[o].checkoutDate,products:this.orders[o].orderedItems,paidAmount:this.orders[o].paidAmount,totalAmount:this.orders[o].totalAmount,expand:0===o});this.loading=!1}setThumbnailImage(e){return this.productService.getImages(e.medias,e.images)[0]}getUser(){this.userStatus=this.userService.getUserStatus(),this.userStatus?this.getLoggedInUserInfo():this.message.create("error","Please Login First")}getLoggedInUserInfo(){this.userStatus&&this.userDataService.getLoggedInUserInfo().subscribe(e=>{this.user=e.data,this.id=this.user._id,this.getAllOrders()},e=>{console.log(e)})}getAllOrders(){this.loading=!0,this.orderService.getAllOrdersByUser(null,null,this.id,this.status).subscribe(e=>{this.orders=e.data,this.setItems(),this.startTimer(this.orders[0].checkoutDate),this.loading=!1},e=>{this.loading=!1,console.log(e)})}onTabSelect(e){console.log(e),"All"===e&&(this.status=0,this.getAllOrders()),"Canceled"===e&&(this.status=r.i.CANCEL,this.getAllOrders()),"Confirmed"===e&&(this.status=r.i.CONFIRM,this.getAllOrders()),"Shipped"===e&&(this.status=r.i.SHIPPING,this.getAllOrders())}goToSuccess(e){this.router.navigate(["success/",e])}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,y.j)("searchTerm"),(0,s.b)(200),(0,_.x)(),(0,h.w)(o=>(this.loading=!0,this.query=o.trim(),console.log(this.query),""===this.query||null===this.query?(this.overlay=!1,this.query=null,this.getAllOrders(),T.E):this.orderService.getAllOrdersByUser(o,{currentPage:"1",pageSize:"10"},this.id,this.status)))).subscribe(o=>{this.orders=o.data,this.setItems(),this.startTimer(this.orders[0].checkoutDate),this.searchOrders=o.data,this.searchOrders.length>0&&(this.isOpen=!0,this.overlay=!0),this.loading=!1},()=>{this.loading=!1})}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(a.F0),t.Y36(p.p),t.Y36(g.K),t.Y36(E.dD),t.Y36(z.M),t.Y36(D.M))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-my-orders"]],viewQuery:function(e,o){if(1&e&&(t.Gf(N,5),t.Gf(R,5)),2&e){let u;t.iGM(u=t.CRH())&&(o.searchForm=u.first),t.iGM(u=t.CRH())&&(o.searchInput=u.first)}},decls:4,vars:2,consts:[[3,"nzTabBarExtraContent"],[3,"nzTitle","nzClick",4,"ngFor","ngForOf"],["orderTemplate",""],[3,"nzTitle","nzClick"],["nzSize","small",3,"nzLoading","nzData","nzPageSize"],["nestedTable",""],[2,"display","none"],["ngFor","",3,"ngForOf"],[2,"width","50px",3,"nzExpand","nzExpandChange"],["matTooltip","Click to view order details",1,"order-id",3,"routerLink"],[1,"pay-order",3,"click"],[4,"ngIf"],[3,"nzExpand"],["nzSize","middle",3,"nzData","nzShowPagination"],["innerTable",""],[4,"ngFor","ngForOf"],[3,"nzValueStyle","nzValue"],[2,"width","60px"],[2,"width","60px",3,"src","alt"],[1,"estimated-time","instock"],[1,"order-status","pending"],[1,"search-form"],["searchForm","ngForm"],["name","searchTerm","autocomplete","off","ngModel","","nz-input","","placeholder","Search here",3,"focus"],["searchInput",""]],template:function(e,o){if(1&e&&(t.TgZ(0,"nz-tabset",0),t.YNc(1,J,22,5,"nz-tab",1),t.qZA(),t.YNc(2,V,4,0,"ng-template",null,2,t.W1O)),2&e){const u=t.MAs(3);t.Q6J("nzTabBarExtraContent",u),t.xp6(1),t.Q6J("ngForOf",o.tabs)}},dependencies:[n.sg,n.O5,I.xH,I.xw,f.N8,f.Uo,f._C,f.h7,f.Om,f.p0,f.$Z,f.d3,f.Vk,x.gM,v.Zp,a.yS,P.F6,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,n.uU,U.M,Z.r],styles:["form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]{margin-right:16px;margin-bottom:8px}.estimated-time[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:300}.estimated-time[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#db8700;font-weight:600}.estimated-time.instock[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;color:green}.payment[_ngcontent-%COMP%]{border:1px dashed rgb(56,56,56);border-radius:25px;text-align:center;padding:5px 15px;font-style:italic;font-size:12px}.payment.paid[_ngcontent-%COMP%]{border:1px dashed rgba(0,128,0,.336);color:#008000d1}.order-status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px;width:150px;float:right}.order-status.pending[_ngcontent-%COMP%]{border:1px dashed #f7a103;color:#f7a103}.pay-order[_ngcontent-%COMP%]{width:180px;padding:0!important}.pay-order[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #da5894;text-transform:uppercase;width:100%;min-height:50px;color:#da5894;font-size:14px;display:flex;align-items:center;justify-content:center;text-align:center;padding:5px;transition:.3s}.pay-order[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#da5894;color:#fff}.order-id[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;color:#ec54cb}.order-id[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:12px}"]}),l})()}];let Q=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[a.Bz.forChild(w),a.Bz]}),l})();var H=i(63677),M=i(77484),q=i(90685),Y=i(41894),K=i(24586);let j=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[n.ez,I.we,f.HQ,H.b1,x.AV,M.vh,Y.Jb,E.gR,q.Xo,K.D,v.o7,Q,P.A2,M.vh,d.u5]}),l})()},68132:(A,m,i)=>{i.d(m,{p:()=>_});var d=i(40520),n=i(92340),y=i(5e3);const s=n.N.apiBaseLink+"/api/order/";let _=(()=>{class h{constructor(r){this.httpClient=r}editOrder(r){return this.httpClient.post(s+"edit-order",r)}placeOrder(r){return this.httpClient.post(s+"place-order",r)}updateOrder(r){return this.httpClient.post(s+"update-order",r)}placeOrderRequest(r){return this.httpClient.post(s+"place-order-request",r)}placeTempOrder(r){return this.httpClient.post(s+"place-temp-order",r)}updateOrderSessionKey(r,t){return this.httpClient.post(s+"update-session-key/"+r+"/"+t,{})}getAllOrdersByUser(r,t,a,p){let g=new d.LE;return g=g.append("q",r),g=g.append("status",p),t&&(g=g.append("pageSize",t.pageSize),g=g.append("currentPage",t.currentPage)),this.httpClient.get(s+"get-all-orders-by-user",{params:g})}getAllOrdersByUserId(r){return this.httpClient.get(s+"get-all-orders-by-userId/"+r)}getAllCanceledOrdersByUser(r,t,a){return this.httpClient.get(s+"get-all-canceled-orders-by-user")}getAllOrdersByUserOrderId(r,t){let a=new d.LE;return r&&(console.log("param id ",r),a=a.append("id",r)),t&&(a=a.append("select",t)),this.httpClient.get(s+"get-orders-by-user-orderId",{params:a})}getAllOrdersofyUserByAdmin(r,t,a){let p=new d.LE;return a&&(p=p.append("userId",a)),r?(p=p.append("pageSize",r.pageSize),p=p.append("page",r.currentPage),t&&(p=p.append("select",t)),this.httpClient.get(s+"get-all-orders-of-user-by-admin",{params:p})):(t&&(p=p.append("select",t)),this.httpClient.get(s+"get-all-orders-of-user-by-admin",{params:p}))}getOrderDetails(r){return this.httpClient.get(s+"get-order-details/"+r)}getOrderDetailsByOrderId(r){return this.httpClient.get(s+"get-order-details-by-orderId/"+r)}getrequestOrderDetails(r){return this.httpClient.get(s+"get-request-order-details/"+r)}cancelOrderByUser(r){return this.httpClient.put(s+"cancel-order-by-user/"+r,{})}deleteOrderByAdmin(r){return this.httpClient.delete(s+"delete-order-by-admin/"+r)}getAllTransactionByUser(r,t){let a=new d.LE;return r?(a=a.append("pageSize",r.pageSize),a=a.append("page",r.currentPage),t&&(a=a.append("select",t)),this.httpClient.get(s+"get-all-transactions-by-user",{params:a})):(t&&(a=a.append("select",t)),this.httpClient.get(s+"get-all-transactions-by-user",{params:a}))}getAllOrdersByAdmin(r,t,a,p){return this.httpClient.post(s+"get-all-orders-by-admin",{paginate:r,sort:t,filter:a,select:p})}getOrdersBySearch(r,t,a){let p=new d.LE;return p=p.append("q",r),t&&(p=p.append("pageSize",t.pageSize),p=p.append("currentPage",t.currentPage)),this.httpClient.post(s+"get-order-by-search",{filter:a},{params:p})}getSelectedOrderDetails(r){return this.httpClient.post(s+"get-selected-order-details",{selectedIds:r})}getAllOrdersBySku(r){return this.httpClient.get(s+"get-all-orders-by-sku/"+r)}changeOrderStatus(r){return this.httpClient.put(s+"change-order-status",r)}getAllTransactionByAdmin(r,t){let a=new d.LE;return r?(a=a.append("pageSize",r.pageSize),a=a.append("page",r.currentPage),t&&(a=a.append("select",t)),this.httpClient.get(s+"get-all-transaction-by-admin",{params:a})):(t&&(a=a.append("select",t)),this.httpClient.get(s+"get-all-transaction-by-admin",{params:a}))}testSslSmsApi(){return this.httpClient.get(s+"sent-test-ssl-message")}updateOrderById(r){return this.httpClient.put(s+"update-order-by-id",r)}updateMultipleOrderById(r){return this.httpClient.post(s+"update-multiple-order-by-id",r)}updateRequestOrderById(r){return this.httpClient.put(s+"update-request-order-by-id",r)}payPayment(r){return this.httpClient.post(s+"pay-payment",r)}sendNotification(r){return this.httpClient.post(s+"confirm-notification",r)}addToOrderTimeline(r,t){return this.httpClient.post(s+"add-to-order-timeline",{data:r,orderId:t})}updateTag(r,t){return this.httpClient.post(s+"update-tag",{orderId:r,tag:t})}updateDeliveryAddress(r,t){return this.httpClient.post(s+"update-delivery-address",{orderId:r,address:t})}setFilterVariable(r){this.filterVariable=r}getFilterVariable(){let r=this.filterVariable;return this.clearFilterVariable(),r}clearFilterVariable(){this.filterVariable=void 0}}return h.\u0275fac=function(r){return new(r||h)(y.LFG(d.eN))},h.\u0275prov=y.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},73433:(A,m,i)=>{i.d(m,{M:()=>y});var d=i(31913),n=i(5e3);let y=(()=>{class s{transform(h,T){switch(h){case d.i.PENDING:return"Pending";case d.i.CONFIRM:return"Confirmed";case d.i.PARTIAL_SHIPPING:return"Partial Invoiced";case d.i.SHIPPING:return"Invoiced";case d.i.DELIVERED:return"Delivered";case d.i.CANCEL:return"Canceled";case d.i.RETURNING:return"Returning";case d.i.RETURNED:return"Returned";case d.i.PARTIAL_RETURNED:return"Partial Returned";case d.i.REFUND:return"Refund";default:return"-"}}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275pipe=n.Yjl({name:"orderStatus",type:s,pure:!0}),s})()}}]);