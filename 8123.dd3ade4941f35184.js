"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[8123],{28123:(dt,k,l)=>{l.r(k),l.d(k,{PurchaseModule:()=>pe});var C=l(96120),f=l(69808),_=l(99826),p=l(94813),D=l(78372),x=l(71884),S=l(63900),r=l(93075),u=l(60515),d=(()=>{return(i=d||(d={}))[i.DRAFT=0]="DRAFT",i[i.CANCELED=1]="CANCELED",i[i.PARTIAL_RECIEVED=3]="PARTIAL_RECIEVED",i[i.CLOSED=4]="CLOSED",d;var i})(),t=l(5e3),P=l(66082),B=l(40520),ut=l(92340),N=l(85314);const v=ut.N.apiBaseLink+"/api/purchase/";let I=(()=>{class i{constructor(e,n){this.http=e,this.uiService=n}add(e){return this.http.post(v+"add",e)}edit(e){return this.http.put(v+"edit",e)}editRecieved(e){return this.http.put(v+"edit-recieved",e)}delete(e){return this.http.delete(v+"delete/"+e)}getById(e){return this.http.get(v+"get/"+e)}getAll(e,n,o){return this.http.post(v+"get-all",{paginate:e,filter:n,sort:o})}getBySearch(e,n,o,a){let s=new B.LE;return s=s.append("q",n),e&&(s=s.append("pageSize",e.pageSize),s=s.append("currentPage",e.currentPage)),console.log(s),this.http.post(v+"get-by-search",{filter:a,sort:o},{params:s})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(B.eN),t.LFG(N.F))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Q=l(61293),W=l(64562),X=l(87501),E=l(49727),pt=l(25245),gt=l(67322),ht=l(77531),q=l(11047),F=l(76042),j=l(82683),J=l(92643),h=l(50939),Z=l(41894),tt=l(55737),et=l(98706),L=l(77484);const mt=["searchInput"],ft=["searchForm"];function _t(i,c){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Pt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"td",34)(1,"mat-icon",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,a=t.oxw();return t.KtG(a.delete(o))}),t._UZ(2,"i",40),t.qZA()()}if(2&i){const e=t.oxw().index;t.Q6J("formGroupName",e)}}function bt(i,c){if(1&i&&(t.TgZ(0,"tr",32)(1,"td"),t._UZ(2,"img",33),t.qZA(),t.TgZ(3,"td")(4,"h3"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"td"),t.YNc(9,_t,2,1,"span",23),t.qZA(),t.TgZ(10,"td",34),t._UZ(11,"input",35),t.qZA(),t.TgZ(12,"td",34),t._UZ(13,"input",36),t.qZA(),t.TgZ(14,"td",34),t._UZ(15,"input",37),t.qZA(),t.TgZ(16,"td",34),t._UZ(17,"input",38),t.qZA(),t.TgZ(18,"td",34)(19,"span"),t._uU(20),t.qZA()(),t.YNc(21,Pt,3,1,"td",39),t.qZA()),2&i){const e=c.$implicit,n=c.index,o=t.oxw();t.xp6(2),t.Q6J("nzSrc",o.setThumbnailImage(null==e||null==e.value?null:e.value.productData))("alt",null==e||null==e.value?null:e.value.productData.name),t.xp6(3),t.Oqu(null==e||null==e.value?null:e.value.productData.name),t.xp6(2),t.hij("SKU: ",null==e?null:e.value.sku,""),t.xp6(2),t.Q6J("ngForOf",null==e||null==e.value?null:e.value.productData.supplier),t.xp6(1),t.Q6J("formGroupName",n),t.xp6(2),t.Q6J("formGroupName",n),t.xp6(2),t.Q6J("formGroupName",n),t.xp6(2),t.Q6J("formGroupName",n),t.xp6(2),t.Q6J("formGroupName",n),t.xp6(2),t.hij("",o.calculateAmount(n)," Tk"),t.xp6(1),t.Q6J("ngIf",0===e.value.recieved)}}function Ct(i,c){1&i&&(t.TgZ(0,"div",41),t._UZ(1,"div",42)(2,"div",43)(3,"div",44)(4,"div",45)(5,"div",46)(6,"div",47)(7,"div",48),t.qZA())}function xt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"li",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw();return t.KtG(a.onSelectItem(o))}),t._UZ(1,"img",52),t.TgZ(2,"div",53)(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"h5"),t._uU(6),t.qZA()()()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.images&&e.images.length>0?e.images[0]:"/assets/images/placeholder/test.png",t.LSH)("alt",null==e?null:e.productName),t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(e.sellingPrice)}}function Ot(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"li",51),t.NdJ("click",function(){const a=t.CHM(e).index,s=t.oxw(2).$implicit,m=t.oxw();return t.KtG(m.onSelectItem(s,a))}),t._UZ(1,"img",52),t.TgZ(2,"div",53)(3,"h3"),t._uU(4),t.qZA()(),t.TgZ(5,"div",55)(6,"h5"),t._uU(7),t.qZA(),t._UZ(8,"p",56),t.qZA()()}if(2&i){const e=c.$implicit,n=t.oxw(2).$implicit,o=t.oxw();t.xp6(1),t.Q6J("src",o.setThumbnailImage(n,e.variantSku)?o.setThumbnailImage(n,e.variantSku):"/assets/images/placeholder/test.png",t.LSH)("alt",null==n?null:n.productName),t.xp6(3),t.Oqu(null==n?null:n.name),t.xp6(3),t.Oqu(e.variantSku)}}function Mt(i,c){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ot,9,4,"li",54),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.variantFormArray)}}function yt(i,c){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,xt,7,4,"li",49),t.YNc(2,Mt,2,1,"div",50),t.qZA()),2&i){const e=c.$implicit;t.xp6(1),t.Q6J("ngIf",!e.hasVariant),t.xp6(1),t.Q6J("ngIf",e.hasVariant)}}const vt=function(){return[]},Tt=function(i){return[i]};let U=(()=>{class i{constructor(e,n,o,a,s,m,M,y,T,w){this.fb=e,this.productService=n,this.purchaseService=o,this.uiService=a,this.reloadService=s,this.activatedRoute=m,this.supplierService=M,this.router=y,this.adminService=T,this.msg=w,this.overlay=!1,this.isFocused=!1,this.isOpen=!1,this.isLoading=!1,this.query=null,this.searchProducts=[],this.clickActive=[[]],this.today=new Date,this.ponewVisible=!0,this.notAllowed=!1,this.status=0,this.date=new Date,this.DateToday=new Date,this.selectedIds=[],this.subTotal=0,this.total=0}ngOnInit(){this.initFormValue(),this.getSuppliers(),this.subRouteOne=this.activatedRoute.paramMap.subscribe(e=>{this.id=e.get("id"),this.id&&this.getPurchaseInfo(this.id)}),this.getAdminInfo()}initFormValue(){this.dataForm=this.fb.group({reference:[null],dateTime:[this.today],location:[null],manufacturer:[null],products:this.fb.array([]),adjustmentPrice:[0],purchaseShippingCharge:[0]}),this.products=this.dataForm.get("products")}getPurchaseInfo(e){this.purchaseService.getById(e).subscribe(n=>{this.dataForm.patchValue(n.data),this.status=n.data.status;let o=n.data.products;for(let a=0;a<o.length;a++)this.onSelectItem(o[a].productData,null,o[a])},n=>{console.log(n)})}newProduct(e,n,o){return console.log(e),this.fb.group(o?{productData:e,sku:o.sku,purchasePrice:[o.purchasePrice,r.kI.required],purchaseQuantity:[o.purchaseQuantity,r.kI.required],purchaseTax:[o.purchaseTax,r.kI.required],recieved:[o.recieved],amount:[o.amount],serialNumbers:[o.serialNumbers]}:n>=0?{productData:e,sku:e.variantFormArray[n].variantSku,purchasePrice:[e.costPrice,r.kI.required],purchaseQuantity:[1,r.kI.required],purchaseTax:[e.tax,r.kI.required],recieved:[0],amount:[0]}:{productData:e,sku:e.sku,purchasePrice:[e.costPrice,r.kI.required],purchaseQuantity:[1,r.kI.required],purchaseTax:[e.tax,r.kI.required],recieved:[0],amount:[0]})}addProduct(e,n,o){this.products.push(o?this.newProduct(e,null,o):n>=0?this.newProduct(e,n):this.newProduct(e))}removeSkill(e){this.products.removeAt(e)}onSubmit(){if(this.dataForm.invalid)return void this.uiService.wrong("Please complete all the required fields");if(0===this.dataForm.value.products.length)return void this.uiService.wrong("Please add products");if(this.id&&this.dataForm.value.products.forEach(n=>{n.recieved>n.purchaseQuantity&&(this.msg.warning("Purchase Quantity can not be less than recieved quantity"),this.notAllowed=!0)}),this.notAllowed)return void(this.notAllowed=!1);console.log("Purchase Status",this.dataForm.value);let e={reference:this.dataForm.value.reference,dateTime:this.dataForm.value.dateTime,location:this.dataForm.value.location,manufacturer:this.dataForm.value.manufacturer,products:this.dataForm.value.products,purchaseShippingCharge:this.dataForm.value.purchaseShippingCharge,status:this.status?this.status:d.DRAFT,recieved:0,adjustmentPrice:this.dataForm.value.adjustmentPrice,comments:null,subTotal:this.calculateSubTotal,totalAmount:this.calculateTotal,admin:this.admin};if(this.id){const n=Object.assign(Object.assign({},e),{_id:this.id});this.editPurchase(n)}else this.addPurchase(e)}addPurchase(e){this.purchaseService.add(e).subscribe(n=>{this.uiService.success(n.message),this.reloadService.needRefreshPurchase$(),this.router.navigate(["admin/purchase"])},n=>{this.uiService.wrong(n.message)})}editPurchase(e){this.purchaseService.edit(e).subscribe(n=>{this.uiService.success(n.message),this.reloadService.needRefreshPurchase$(),this.router.navigate(["admin/purchase"])},n=>{this.uiService.wrong(n.message)})}delete(e){this.products.removeAt(e)}calculateAmount(e){var n,o,a,s,m,M;let y=null===(o=null===(n=this.products)||void 0===n?void 0:n.value[e])||void 0===o?void 0:o.purchasePrice,T=y*(null===(s=null===(a=this.products)||void 0===a?void 0:a.value[e])||void 0===s?void 0:s.purchaseTax)/100,w=null===(M=null===(m=this.products)||void 0===m?void 0:m.value[e])||void 0===M?void 0:M.purchaseQuantity;return this.products.value[e].amount=Math.round((y+T)*w),this.products.value[e].amount}handleFocus(e){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchProducts.length>0&&this.setPanelState(e),this.isFocused=!0)}setPanelState(e){e&&e.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0)}onClickSearchArea(e){e.stopPropagation()}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,p.j)("searchTerm"),(0,D.b)(200),(0,x.x)(),(0,S.w)(n=>(console.log(n),this.query=n.trim(),""===this.query||null===this.query?(this.overlay=!1,this.searchProducts=[],this.query=null,u.E):this.productService.getSearchProduct(this.query,{currentPage:"1",pageSize:"10"},{productVisibility:!0})))).subscribe(n=>{this.isLoading=!1,this.searchProducts=n.data,this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0)},()=>{this.isLoading=!1})}onSelectItem(e,n,o){this.clickActive.push([]),console.log("Index : ",n),o?this.addProduct(e,null,o):n>=0?this.addProduct(e,n):this.addProduct(e),this.clickActive.push([]),this.handleCloseAndClear()}handleCloseAndClear(){this.isOpen=!1,this.overlay=!1,this.isFocused=!1,this.isLoading=!1,this.searchProducts=[]}getOptions(e){return e.split(",")}onSelectVariant(e){}setSku(){for(let e=0;e<this.products.length;e++){let n=this.products[e].product.sku+"-";for(let o=0;o<this.clickActive[e].length;o++)n+=this.clickActive[e][o];this.products[e].sku=n}}selectOption(e){}get calculateSubTotal(){let e=0;return this.products.value.forEach(function(n){e+=n.amount}),this.subTotal=e,this.subTotal}get calculateTotal(){return this.total=this.subTotal+this.dataForm.value.purchaseShippingCharge+this.dataForm.value.adjustmentPrice,this.total}getSuppliers(){this.supplierService.getAll().subscribe(e=>{this.suppliers=e.data,this.filteredSupplierList=this.suppliers.slice()},e=>{console.log(e)})}getAdminInfo(){this.adminService.getAdminShortData().subscribe(e=>{this.admin=e.data},e=>{this.msg.error(e.message)})}setThumbnailImage(e,n){if(!n)return this.productService.getImages(e.medias,e.images)[0];{const o=e.variantFormArray;for(let a=0;a<o.length;a++)if(o[a].variantSku===n)return o[a].image}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(P.M),t.Y36(I),t.Y36(N.F),t.Y36(Q.f),t.Y36(_.gz),t.Y36(W.p),t.Y36(_.F0),t.Y36(X.l),t.Y36(E.dD))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-new-purchase"]],viewQuery:function(e,n){if(1&e&&(t.Gf(mt,5),t.Gf(ft,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.searchInput=o.first),t.iGM(o=t.CRH())&&(n.searchForm=o.first)}},decls:100,vars:11,consts:[["nzGutter","16"],["nzXs","24"],["autocomplete","off",3,"formGroup","ngSubmit"],["nzTitle","New Purchase Order"],["nzXs","12"],[1,"header-main"],[1,"purchase_info"],[2,"width","15px","text-align","center"],["nz-input","","formControlName","reference","placeholder","PK-131 INDIA"],["nz-input","","formControlName","manufacturer","placeholder","Bangladesh, China, India"],["nz-input","","formControlName","location","placeholder","Gulistan, Chawkbajar"],[1,"purchase_order_body"],[1,"order-table"],["nzSize","small",3,"nzData"],["nzWidth","100px"],["formArrayName","products",4,"ngFor","ngForOf"],[3,"click"],[1,"form-field"],["searchForm","ngForm"],["nz-input","","id","searchInput","type","text","placeholder","Search in caremebd...","name","searchTerm","autocomplete","off","ngModel","","required","",3,"focus"],["searchInput",""],["class","sk-fading-circle",4,"ngIf"],["id","auto-suggestion",1,"auto-complete-box",2,"width","400px",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"total_summary"],[1,"total_area"],[1,"total-title"],[1,"total-price"],["appearance","outline",1,"form-field"],["matInput","","type","number","formControlName","purchaseShippingCharge","digitOnly",""],["matInput","","type","number","formControlName","adjustmentPrice"],["nzSize","large","nz-button","","nzType","primary","type","submit",1,"po_save"],["formArrayName","products"],["nz-image","",3,"nzSrc","alt"],[3,"formGroupName"],["nz-input","","type","number","formControlName","purchasePrice",2,"width","80px"],["nz-input","","type","number","formControlName","purchaseQuantity",2,"width","80px"],["nz-input","","type","number","formControlName","recieved","readOnly","",2,"width","80px"],["matInput","","type","number","formControlName","purchaseTax","placeholder","percent(%)",2,"width","80px"],[3,"formGroupName",4,"ngIf"],[1,"fa-solid","fa-circle-minus"],[1,"sk-fading-circle"],[1,"sk-circle1","sk-circle"],[1,"sk-circle2","sk-circle"],[1,"sk-circle3","sk-circle"],[1,"sk-circle4","sk-circle"],[1,"sk-circle5","sk-circle"],[1,"sk-circle6","sk-circle"],[1,"sk-circle7","sk-circle"],["class","list-view",3,"click",4,"ngIf"],[4,"ngIf"],[1,"list-view",3,"click"],[1,"img-thumb",3,"src","alt"],[1,"desc"],["class","list-view",3,"click",4,"ngFor","ngForOf"],[1,"price"],[1,"discount"]],template:function(e,n){1&e&&(t._UZ(0,"br"),t.TgZ(1,"nz-row",0)(2,"nz-col",1)(3,"form",2),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(4,"nz-card",3)(5,"nz-row",0)(6,"nz-col",4)(7,"div",5)(8,"table",6)(9,"tbody")(10,"tr")(11,"td"),t._uU(12,"Reference #"),t.qZA(),t.TgZ(13,"td",7),t._uU(14,":"),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"input",8),t.qZA()(),t.TgZ(17,"tr")(18,"td"),t._uU(19,"Manufacturer"),t.qZA(),t.TgZ(20,"td",7),t._uU(21,":"),t.qZA(),t.TgZ(22,"td"),t._UZ(23,"input",9),t.qZA()(),t.TgZ(24,"tr")(25,"td"),t._uU(26,"Location"),t.qZA(),t.TgZ(27,"td",7),t._uU(28,":"),t.qZA(),t.TgZ(29,"td"),t._UZ(30,"input",10),t.qZA()()()()()(),t.TgZ(31,"nz-col",1)(32,"div",11)(33,"div",12)(34,"nz-table",13)(35,"thead")(36,"tr")(37,"th",14),t._uU(38,"Image"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Item Details"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Supplier"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Unit Cost Price"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"PO Quantity"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"PO Recieved"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Tax(%)"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Amount"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Remove"),t.qZA()()(),t.TgZ(55,"tbody"),t.YNc(56,bt,22,12,"tr",15),t.qZA()()(),t.TgZ(57,"div",16),t.NdJ("click",function(a){return n.onClickSearchArea(a)}),t.TgZ(58,"form",17,18)(60,"input",19,20),t.NdJ("focus",function(a){return n.handleFocus(a)}),t.qZA(),t.YNc(62,Ct,8,0,"div",21),t.qZA(),t.TgZ(63,"ul",22),t.YNc(64,yt,3,2,"div",23),t.qZA()(),t.TgZ(65,"nz-card",24)(66,"div",25)(67,"ul")(68,"li")(69,"div",26)(70,"h3"),t._uU(71,"Sub Total"),t.qZA()(),t.TgZ(72,"div",27)(73,"h4"),t._uU(74),t.qZA()()(),t.TgZ(75,"li")(76,"div",26)(77,"h3"),t._uU(78,"Shipping"),t.qZA()(),t.TgZ(79,"div",27)(80,"mat-form-field",28),t._UZ(81,"input",29),t.qZA()()(),t.TgZ(82,"li")(83,"div",26)(84,"h3"),t._uU(85,"Adjustment"),t.qZA()(),t.TgZ(86,"div",27)(87,"mat-form-field",28),t._UZ(88,"input",30),t.qZA()()(),t._UZ(89,"nz-divider"),t.TgZ(90,"li")(91,"div",26)(92,"h3"),t._uU(93,"Total Amount ="),t.qZA()(),t.TgZ(94,"div",27)(95,"h4"),t._uU(96),t.qZA()()()()()()()(),t.TgZ(97,"nz-col",1)(98,"button",31),t._uU(99,"Save Now"),t.qZA()()()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",n.dataForm),t.xp6(31),t.Q6J("nzData",t.VKq(9,Tt,n.products?n.products:t.DdM(8,vt))),t.xp6(22),t.Q6J("ngForOf",n.products.controls),t.xp6(6),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngClass",n.searchProducts.length>0&&n.isOpen?"active":""),t.xp6(1),t.Q6J("ngForOf",n.searchProducts),t.xp6(10),t.hij("",n.calculateSubTotal," TK"),t.xp6(22),t.hij("",n.calculateTotal," TK"))},dependencies:[f.mk,f.sg,f.O5,pt.Hw,gt.KE,ht.Nt,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u,r.x0,r.CE,r.On,r.F,q.Zp,F.ix,j.w,J.dQ,h.N8,h.Uo,h._C,h.Om,h.p0,h.$Z,Z.t3,Z.SK,tt.g,et.Ie,L.bd],styles:[".header-main[_ngcontent-%COMP%]{margin-bottom:40px}.total_summary[_ngcontent-%COMP%]{width:500px;float:right}.total_area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;align-items:center;justify-content:space-between}.total_area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100px}.total_area[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{margin:5px 0}.auto-complete-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;align-items:flex-start;border:1px solid #dddddd;justify-content:flex-start}.auto-complete-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px}.auto-complete-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;padding:15px 0}.purchase_info[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0}.po_save[_ngcontent-%COMP%]{float:right;margin:15px 0}"]}),i})();var g=l(41393),nt=l(29343),wt=l(49111),ot=l(48966),Y=l(57267),it=l(50072),G=l(63640),H=l(14573),R=l(64219),z=l(63677);let rt=(()=>{class i{transform(e,n){switch(e){case d.DRAFT:return"Draft";case d.CANCELED:return"Canceled";case d.PARTIAL_RECIEVED:return"PARTIAL";case d.CLOSED:return"CLOSED";default:return"-"}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"purchaseStatus",type:i,pure:!0}),i})();const Zt=["menuTrigger"],zt=function(i){return["../../","details",i]};function At(i,c){if(1&i&&(t.TgZ(0,"li",44)(1,"div",45)(2,"h4"),t._uU(3),t.qZA(),t.TgZ(4,"h5"),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"div",46)(8,"h4",47),t._uU(9),t.ALo(10,"purchaseStatus"),t.qZA(),t.TgZ(11,"h5")(12,"span"),t._uU(13),t.qZA()()()()),2&i){const e=c.$implicit;t.Q6J("routerLink",t.VKq(9,zt,e._id)),t.xp6(3),t.Oqu(null==e?null:e.purchaseId),t.xp6(2),t.Oqu(t.lcZ(6,5,null==e?null:e.dateTime)),t.xp6(4),t.Oqu(t.lcZ(10,7,null==e?null:e.status)),t.xp6(4),t.hij("",null==e?null:e.totalAmount," TK")}}function kt(i,c){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.xp6(1),t.Oqu(e.name)}}function Dt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",48),t.qZA(),t.TgZ(3,"td")(4,"a",49),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"td"),t.YNc(9,kt,2,1,"p",32),t.qZA(),t.TgZ(10,"td")(11,"p"),t._uU(12),t.qZA()(),t.TgZ(13,"td")(14,"p"),t._uU(15),t.qZA()(),t.TgZ(16,"td")(17,"p"),t._uU(18),t.qZA()(),t.TgZ(19,"td")(20,"button",50),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.showSerials(null==a?null:a.serialNumbers))}),t._uU(21,"View"),t.qZA()(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td")(25,"div",51)(26,"p"),t._uU(27),t.qZA(),t.TgZ(28,"i",52),t.NdJ("click",function(){const o=t.CHM(e),a=o.$implicit,s=o.index,m=t.oxw();return t.KtG(m.showModal(a,s))}),t.qZA()()(),t.TgZ(29,"td")(30,"b"),t._uU(31),t.qZA()()()}if(2&i){const e=c.$implicit,n=t.oxw();t.xp6(2),t.Q6J("nzSrc",n.setThumbnailImage(e.productData,null==e?null:e.sku)?n.setThumbnailImage(e.productData,null==e?null:e.sku):"/assets/images/placeholder/test.png")("alt",e.productData.name),t.xp6(3),t.Oqu(null==e||null==e.productData?null:e.productData.name),t.xp6(2),t.hij("sku: ",null==e?null:e.sku,""),t.xp6(2),t.Q6J("ngForOf",null==e?null:e.productData.supplier),t.xp6(3),t.Oqu(null==e?null:e.purchasePrice),t.xp6(3),t.hij(" ",e.purchaseTax,"%"),t.xp6(3),t.Oqu(null==e?null:e.purchaseQuantity),t.xp6(5),t.hij("",n.getAmount(e)," \u09f3"),t.xp6(4),t.Oqu(e.recieved?e.recieved:0),t.xp6(4),t.hij("",n.getRecievedAmount(e),"\u09f3")}}function St(i,c){if(1&i&&(t.ynx(0),t.TgZ(1,"form",53)(2,"nz-form-item",54)(3,"nz-form-label",55),t._uU(4," Product Quantity "),t.qZA(),t.TgZ(5,"nz-form-control",56),t._UZ(6,"input",57),t.qZA()(),t.TgZ(7,"nz-form-item")(8,"nz-form-label",58),t._uU(9,"Comment"),t.qZA(),t.TgZ(10,"nz-form-control",56),t._UZ(11,"textarea",59),t.qZA()()(),t.TgZ(12,"div",60)(13,"p"),t._UZ(14,"i",61),t._uU(15),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.dataForm2),t.xp6(2),t.Q6J("nzSpan",24),t.xp6(2),t.Q6J("nzSpan",24),t.xp6(3),t.Q6J("nzSpan",24),t.xp6(2),t.Q6J("nzSpan",24),t.xp6(5),t.hij(" ",e.receiveErrorMsg,"")}}function qt(i,c){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.xp6(1),t.Oqu(e.serial)}}function Ft(i,c){if(1&i&&(t.ynx(0),t.TgZ(1,"div",62),t.YNc(2,qt,2,1,"span",32),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.serialNumbers)}}const Ut=function(i){return["../../edit",i]},Rt=function(){return{padding:"0px"}},A=function(){return{span:24}},at=function(){return{span:12}};let Nt=(()=>{class i{constructor(e,n,o,a,s,m,M,y,T,w,V,K,$){this.activatedRoute=e,this.purchaseService=n,this.invoiceService=o,this.dialog=a,this.uiService=s,this.fb=m,this.adminService=M,this.utilsService=y,this.productService=T,this.reloadService=w,this.router=V,this.spinner=K,this.msg=$,this.recivedQty=!1,this.data=null,this.index=null,this.products=[],this.clickActive=[],this.commentEmpty="",this.total=0,this.selectedDiv=!1,this.ordersPerPage=10,this.currentPage=1,this.totalOrders=0,this.totalOrdersStore=0,this.purchases=[],this.sortQuery={createdAt:-1},this.activeSort=null,this.productEnum=nt.P,this.productOrderStatus=[{value:g.T.PENDING,viewValue:"Pending"},{value:g.T.CANCEL,viewValue:"Cancel"},{value:g.T.CONFIRM,viewValue:"Confirm"},{value:g.T.PARTIAL_SHIPPING,viewValue:"Partial Invoiced"},{value:g.T.SHIPPING,viewValue:"Shipping"},{value:g.T.DELIVERED,viewValue:"Delivered"},{value:g.T.PARTIAL_DELIVERED,viewValue:"Partial Delivered"},{value:g.T.RETURN,viewValue:"Return"},{value:g.T.PARTIAL_RETURN,viewValue:"Partial Return"}],this.selectedIds=[],this.showSerial=!1,this.serialNumbers=[]}ngOnInit(){this.subRouteOne=this.activatedRoute.paramMap.subscribe(e=>{this.id=e.get("id"),this.id&&this.getPurchaseInfo(this.id)}),this.subAcRoute=this.activatedRoute.queryParams.subscribe(e=>{e&&e.page?(this.currentPage=e.page,this.sortQueryParam=e.sortQueryParam,this.startDateParam=e.startDateParam,this.endDateParam=e.endDateParam,this.dateRangeParam=e.dateRangeParam,this.filterSortCheck()):this.currentPage=1}),this.queryParamsVar={page:1,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},this.reloadService.refreshPurchase$.subscribe(()=>{this.getPurchaseInfo(this.id)}),this.clickActive[0]=!0,this.initFormValue(),this.getAdminData(),this.getAllPurchase()}initFormValue(){this.dataForm=this.fb.group({selected:[null],comment:[null],statusNote:[null]})}filterSortCheck(){if(this.startDateParam&&this.onDateChange(this.startDateParam,this.endDateParam),this.sortQueryParam){let e;switch(this.sortQueryParam){case"1":e={purchaseId:-1};break;case"2":e={purchaseId:1};break;case"3":e={createdAt:1};break;case"4":e={createdAt:-1};break;case"5":e={totalAmount:-1};break;case"6":e={totalAmount:1};break;default:this.sortQuery=null}this.sortQuery=e}this.reloadService.needRefreshPurchase$(),this.getAllPurchase()}onDateChange(e,n,o){this.filter=Object.assign(Object.assign({},this.filter),n?{createdAt:{$gte:e,$lte:n}}:{createdAt:{$gte:e,$lt:new Date}}),this.reloadService.needRefreshPurchase$()}editPurchase(e){console.log(),this.dialog.open(U,{restoreFocus:!1}).afterClosed().subscribe(()=>this.menuTrigger.focus()),this.router.navigate(["../edit",e])}showPurchaseDetails(e,n){this.selectedDiv[n]=!0,this.spinner.show(),this.getPurchaseInfo(e),this.spinner.hide()}getAdminData(){this.adminService.getAdminShortData().subscribe(e=>{this.admin=e.data})}getPurchaseInfo(e){this.purchaseService.getById(e).subscribe(n=>{this.purchase=n.data,this.products=this.purchase.products,console.log(this.products)},n=>{console.log(n)})}getImages(e,n){let o=[];if(e&&e.length>0){for(let a=0,s=0;a<e.length;a++)null!==e[a]&&""!==e[a]&&(o.push(e[a]),s++);o=[...o,...n]}else o=n;return o}getPurchaseDetails(){this.clickActive=[],this.clickActive[0]=!0}Edit(){this.clickActive=[],this.clickActive[2]=!0}sortData(e,n){this.sortQuery=e,this.activeSort=n,this.getAllPurchase()}getAllPurchase(){const e={pageSize:this.ordersPerPage.toString(),currentPage:this.currentPage.toString()};this.purchaseService.getAll(e,this.filter,this.sortQuery).subscribe(n=>{this.purchases=n.data},n=>{console.log(n)})}getStatusColor(e){switch(e){case g.T.PENDING:return"pending";case g.T.CONFIRM:return"confirm";case g.T.DELIVERED:return"delivered";case g.T.CANCEL:return"cancel";case g.T.SHIPPING:case g.T.PARTIAL_SHIPPING:case g.T.PARTIAL_DELIVERED:return"processing";case g.T.PARTIAL_RETURN:case g.T.RETURN:return"refund";case g.T.SHIPPING:return"shipping";default:return"-"}}addNewComment(){this.purchase.comments.push(this.dataForm.value.comment),this.purchaseService.edit(this.purchase).subscribe(e=>{console.log(e.message)},e=>{console.log(e)}),this.commentEmpty=null}onCheckChange(e,n){if(e.checked){const o=this.selectedIds.findIndex(a=>a===n);o>=0?this.selectedIds.splice(o,1):this.selectedIds.push(n)}else this.selectedIds.splice(n,1)}getAmount(e){let n=null==e?void 0:e.purchasePrice,o=Math.round(n*(null==e?void 0:e.purchaseTax)/100);return Math.round((n+o)*(null==e?void 0:e.purchaseQuantity))}getRecievedAmount(e){let n=null==e?void 0:e.purchasePrice,o=Math.round(n*(null==e?void 0:e.purchaseTax)/100);return Math.round((n+o)*(null!=e&&e.recieved?null==e?void 0:e.recieved:0))}showModal(e,n){this.recivedQty=!0,this.data=e,this.index=n,this.initRecieved()}recivedCancel(){this.recivedQty=!1,this.data=null,this.index=null}initRecieved(){this.dataForm2=this.fb.group({recieved:[0],message:[null]})}onSubmit(){(this.data.recieved?this.data.recieved+this.dataForm2.value.recieved:this.dataForm2.value.recieved)>this.data.purchaseQuantity?this.receiveErrorMsg="Cannot recieve more than purchase quantity":this.editPurchaseRecieved({_id:this.id,productId:this.data.productData._id,serialNumbers:this.data.serialNumbers,index:this.index,recieved:this.dataForm2.value.recieved,message:this.dataForm2.value.message})}editPurchaseRecieved(e){this.purchaseService.editRecieved(e).subscribe(n=>{this.msg.success(n.message),this.reloadService.needRefreshPurchase$(),this.recivedQty=!1},n=>{this.uiService.wrong(n.message)})}get getTotalTax(){let e=0;return this.products.forEach(n=>{e+=Number(n.purchaseTax*n.purchasePrice/100)}),e}setThumbnailImage(e,n){if(!n)return this.productService.getImages(e.medias,e.images)[0];{const o=e.variantFormArray;for(let a=0;a<o.length;a++)if(o[a].variantSku===n)return o[a].image}}onBackButton(){this.router.navigate(["/admin/purchase"],{queryParams:{page:1,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},queryParamsHandling:"preserve"})}showSerials(e){this.serialNumbers=e,this.showSerial=!0}handleOk(){this.serialNumbers=[],console.log("Button ok clicked!"),this.showSerial=!1}handleCancel(){this.serialNumbers=[],console.log("Button cancel clicked!"),this.showSerial=!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.gz),t.Y36(I),t.Y36(wt.q),t.Y36(ot.uw),t.Y36(N.F),t.Y36(r.qu),t.Y36(X.l),t.Y36(Y.F),t.Y36(P.M),t.Y36(Q.f),t.Y36(_.F0),t.Y36(it.t2),t.Y36(E.dD))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-details"]],viewQuery:function(e,n){if(1&e&&t.Gf(Zt,5),2&e){let o;t.iGM(o=t.CRH())&&(n.menuTrigger=o.first)}},decls:182,vars:54,consts:[[1,"page-header"],[1,"las","la-arrow-left",3,"click"],[1,"header-action"],[1,"create_btn",3,"routerLink"],[1,"table-samary"],["nzSize","small",3,"nzBodyStyle"],[1,"left_navbar"],[1,"inner_nav_header"],[1,"header_action"],["nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-angle-down"],["statusMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item",""],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomRight",1,"action_btn",3,"nzDropdownMenu"],[1,"las","la-ellipsis-v"],["actionMenu","nzDropdownMenu"],["nz-input","","placeholder","Use Purchase Order id"],["nz-menu","","nzTheme","light","nzMode","inline",1,"refund_list"],["nz-menu-item","",3,"routerLink",4,"ngFor","ngForOf"],[1,"refund_body_main",2,"background","#fff",3,"formGroup"],[1,"refund_details_header"],[1,"refund_details_body"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzLg"],[2,"text-transform","uppercase"],[1,"lar","la-lg","la-clock"],["nzSize","small",1,"refund_details_body-product"],["nzSize","small","nzShowPagination","false",3,"nzData"],["tableData",""],["nzWidth","120px"],["nzWidth","100px"],[4,"ngFor","ngForOf"],["nzSize","small",1,"ammount_summary"],[1,"ammount_summary_single"],["nzType","horizontal",2,"margin","5px 0"],[1,"summary_total"],["nz-row","",1,"purchase_edit",3,"nzGutter"],["nz-col","",3,"nzXs"],[1,"purchase_edit_btn"],["nz-button","","nzSize","large","nzType","primary"],["nzTitle","Recived Quantity","nzWidth","300px","nzSize","small",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nzTitle","Recieved Serial Numbers",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],["nz-menu-item","",3,"routerLink"],[1,"left"],[1,"right"],[2,"color","#ff8800"],["nz-image","",2,"max-width","50px",3,"nzSrc","alt"],[1,"text"],["nz-button","","type","button",3,"click"],[1,"recived_qt"],[1,"lar","la-plus-square",3,"click"],["nz-form","",3,"formGroup"],[1,"mb"],["nzFor","proqty",3,"nzSpan"],[3,"nzSpan"],["nz-input","","name","proqty","type","number","formControlName","recieved","id","proqty"],["nzFor","comment",3,"nzSpan"],["formControlName","message","nz-input","","rows","2","placeholder","write any thing"],[1,"rcvQtyError"],["aria-hidden","true",1,"fa","fa-exclamation-circle"],[1,"serial"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h2")(2,"i",1),t.NdJ("click",function(){return n.onBackButton()}),t.qZA(),t._uU(3," Purchase Order"),t.qZA(),t.TgZ(4,"div",2)(5,"button",3),t._uU(6,"Edit"),t.qZA()()(),t.TgZ(7,"div",4)(8,"nz-card",5)(9,"nz-layout")(10,"nz-sider",6)(11,"div",7)(12,"div",8)(13,"a",9),t._uU(14," All Purchase "),t._UZ(15,"i",10),t.TgZ(16,"nz-dropdown-menu",null,11)(18,"ul",12)(19,"li",13),t._uU(20,"Close"),t.qZA(),t.TgZ(21,"li",13),t._uU(22,"Pending"),t.qZA(),t.TgZ(23,"li",13),t._uU(24,"Reject"),t.qZA()()()(),t.TgZ(25,"nz-button-group")(26,"span",14),t._UZ(27,"i",15),t.qZA(),t.TgZ(28,"nz-dropdown-menu",null,16)(30,"ul",12)(31,"li",13),t._uU(32,"Delete"),t.qZA(),t.TgZ(33,"li",13),t._uU(34,"Pending"),t.qZA(),t.TgZ(35,"li",13),t._uU(36,"Reject"),t.qZA()()()()(),t._UZ(37,"input",17),t.qZA(),t.TgZ(38,"ul",18),t.YNc(39,At,14,11,"li",19),t.qZA()(),t.TgZ(40,"nz-content",20)(41,"div",21)(42,"h4"),t._uU(43),t.qZA(),t.TgZ(44,"h5"),t._uU(45),t.ALo(46,"date"),t.qZA()(),t.TgZ(47,"div",22)(48,"div",23)(49,"div",24)(50,"h2"),t._uU(51,"Purchase Details"),t.qZA(),t.TgZ(52,"table")(53,"tbody")(54,"tr")(55,"td"),t._uU(56,"PO ID #"),t.qZA(),t.TgZ(57,"td"),t._uU(58,":"),t.qZA(),t.TgZ(59,"td")(60,"b"),t._uU(61),t.qZA()()(),t.TgZ(62,"tr")(63,"td"),t._uU(64,"Purchase Status"),t.qZA(),t.TgZ(65,"td"),t._uU(66,":"),t.qZA(),t.TgZ(67,"td")(68,"span"),t._uU(69),t.ALo(70,"purchaseStatus"),t.qZA()()(),t.TgZ(71,"tr")(72,"td"),t._uU(73,"Date & Time"),t.qZA(),t.TgZ(74,"td"),t._uU(75,":"),t.qZA(),t.TgZ(76,"td",25),t._uU(77),t.ALo(78,"date"),t._UZ(79,"i",26),t.qZA()(),t.TgZ(80,"tr")(81,"td"),t._uU(82,"Total Amount"),t.qZA(),t.TgZ(83,"td"),t._uU(84,":"),t.qZA(),t.TgZ(85,"td"),t._uU(86),t.qZA()(),t.TgZ(87,"tr")(88,"td"),t._uU(89,"Created By"),t.qZA(),t.TgZ(90,"td"),t._uU(91,":"),t.qZA(),t.TgZ(92,"td"),t._uU(93),t.qZA()()()()(),t.TgZ(94,"div",24)(95,"table")(96,"tbody")(97,"tr")(98,"td"),t._uU(99,"Refrence"),t.qZA(),t.TgZ(100,"td"),t._uU(101,":"),t.qZA(),t.TgZ(102,"td"),t._uU(103),t.qZA()(),t.TgZ(104,"tr")(105,"td"),t._uU(106,"Manufacturer"),t.qZA(),t.TgZ(107,"td"),t._uU(108,":"),t.qZA(),t.TgZ(109,"td"),t._uU(110),t.qZA()(),t.TgZ(111,"tr")(112,"td"),t._uU(113,"Location"),t.qZA(),t.TgZ(114,"td"),t._uU(115,":"),t.qZA(),t.TgZ(116,"td")(117,"p"),t._uU(118),t.qZA()()()()()()(),t.TgZ(119,"nz-card",27)(120,"nz-table",28,29)(122,"thead")(123,"tr")(124,"th"),t._uU(125,"Image"),t.qZA(),t.TgZ(126,"th",30),t._uU(127,"Item"),t.qZA(),t.TgZ(128,"th"),t._uU(129,"Suppliers"),t.qZA(),t.TgZ(130,"th"),t._uU(131,"Unit Price"),t.qZA(),t.TgZ(132,"th"),t._uU(133,"Tax"),t.qZA(),t.TgZ(134,"th"),t._uU(135,"Qty"),t.qZA(),t.TgZ(136,"th"),t._uU(137,"Serials"),t.qZA(),t.TgZ(138,"th"),t._uU(139,"Amount"),t.qZA(),t.TgZ(140,"th"),t._uU(141,"Recieved Qty"),t.qZA(),t.TgZ(142,"th",31),t._uU(143,"Recieved Amount"),t.qZA()()(),t.TgZ(144,"tbody"),t.YNc(145,Dt,32,11,"tr",32),t.qZA()(),t.TgZ(146,"div",23)(147,"div",24)(148,"nz-card",33)(149,"div",34)(150,"h4"),t._uU(151,"Sub Total"),t.qZA(),t.TgZ(152,"span"),t._uU(153),t.qZA()(),t.TgZ(154,"div",34)(155,"span"),t._uU(156,"Tax (10%)"),t.qZA(),t.TgZ(157,"span"),t._uU(158),t.qZA()(),t.TgZ(159,"div",34)(160,"span"),t._uU(161,"Shipping Cost"),t.qZA(),t.TgZ(162,"span"),t._uU(163),t.qZA()(),t.TgZ(164,"div",34)(165,"span"),t._uU(166,"Adjustment"),t.qZA(),t.TgZ(167,"span"),t._uU(168),t.qZA()(),t._UZ(169,"nz-divider",35),t.TgZ(170,"div",36)(171,"h2"),t._uU(172),t.qZA()()()()(),t.TgZ(173,"div",37)(174,"div",38)(175,"div",39)(176,"button",40),t._uU(177," Save "),t.qZA()()()()()()()()()(),t.TgZ(178,"nz-modal",41),t.NdJ("nzVisibleChange",function(a){return n.recivedQty=a})("nzOnCancel",function(){return n.recivedCancel()})("nzOnOk",function(){return n.onSubmit()}),t.YNc(179,St,16,6,"ng-container",42),t.qZA(),t.TgZ(180,"nz-modal",43),t.NdJ("nzVisibleChange",function(a){return n.showSerial=a})("nzOnCancel",function(){return n.handleCancel()})("nzOnOk",function(){return n.handleOk()}),t.YNc(181,Ft,3,1,"ng-container",42),t.qZA()),2&e){const o=t.MAs(17),a=t.MAs(29),s=t.MAs(121);t.xp6(5),t.Q6J("routerLink",t.VKq(44,Ut,null==n.purchase?null:n.purchase._id)),t.xp6(3),t.Q6J("nzBodyStyle",t.DdM(46,Rt)),t.xp6(5),t.Q6J("nzDropdownMenu",o),t.xp6(13),t.Q6J("nzDropdownMenu",a),t.xp6(13),t.Q6J("ngForOf",n.purchases),t.xp6(1),t.Q6J("formGroup",n.dataForm),t.xp6(3),t.Oqu(null==n.purchase?null:n.purchase.purchaseId),t.xp6(2),t.Oqu(t.xi3(46,36,null==n.purchase?null:n.purchase.dateTime,"short")),t.xp6(3),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("nzXs",t.DdM(47,A))("nzLg",t.DdM(48,at)),t.xp6(12),t.Oqu(null==n.purchase?null:n.purchase.purchaseId),t.xp6(8),t.hij(" ",t.lcZ(70,39,null==n.purchase?null:n.purchase.status)," "),t.xp6(8),t.hij(" ",t.xi3(78,41,null==n.purchase?null:n.purchase.dateTime,"short")," "),t.xp6(9),t.hij("",null==n.purchase?null:n.purchase.totalAmount," TK"),t.xp6(7),t.AsE("",null==n.purchase||null==n.purchase.admin?null:n.purchase.admin.name," (",null==n.purchase||null==n.purchase.admin?null:n.purchase.admin.role,")"),t.xp6(1),t.Q6J("nzXs",t.DdM(49,A))("nzLg",t.DdM(50,at)),t.xp6(9),t.Oqu(null==n.purchase?null:n.purchase.reference),t.xp6(7),t.Oqu(null==n.purchase?null:n.purchase.manufacturer),t.xp6(8),t.Oqu(null==n.purchase?null:n.purchase.location),t.xp6(2),t.Q6J("nzData",n.products),t.xp6(25),t.Q6J("ngForOf",s.data),t.xp6(1),t.Q6J("nzGutter",0),t.xp6(1),t.Q6J("nzXs",t.DdM(51,A))("nzLg",t.DdM(52,A)),t.xp6(6),t.hij("",null==n.purchase?null:n.purchase.subTotal," TK"),t.xp6(5),t.hij("",n.getTotalTax," TK"),t.xp6(5),t.hij("",null==n.purchase?null:n.purchase.purchaseShippingCharge," TK"),t.xp6(5),t.hij("",null==n.purchase?null:n.purchase.adjustmentPrice," TK"),t.xp6(4),t.hij("Total = ",null==n.purchase?null:n.purchase.totalAmount," TK"),t.xp6(1),t.Q6J("nzGutter",0),t.xp6(1),t.Q6J("nzXs",t.DdM(53,A)),t.xp6(4),t.Q6J("nzVisible",n.recivedQty),t.xp6(2),t.Q6J("nzVisible",n.showSerial)}},dependencies:[f.sg,_.rH,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,G.du,G.Hf,q.Zp,H.hw,H.OK,H.t7,F.ix,F.fY,j.w,J.dQ,R.wO,R.r9,z.cm,z.Ws,z.RR,h.N8,h.Uo,h._C,h.Om,h.p0,h.$Z,Z.t3,Z.SK,tt.g,et.Ie,L.bd,f.uU,rt],styles:['.serial[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.serial[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:15px;border:1px solid black;margin:0 10px 10px 0}.text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.w100[_ngcontent-%COMP%]{width:100px}.mb[_ngcontent-%COMP%]{margin-bottom:15px!important}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:30px 0 15px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]{display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;margin-left:25px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   .create_btn[_ngcontent-%COMP%]{background:#1b75bb;color:#fff;border:1px solid #1b75bb;padding:10px 20px;transition:.3s;border-radius:3px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   .create_btn[_ngcontent-%COMP%]:hover{background:#8bc53f;border:1px solid #8bc53f}.refunt-tab[_ngcontent-%COMP%]{min-height:80vh;margin-bottom:30px}.tab-list[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;min-width:200px;text-align:left;border-bottom:1px solid #ddd;margin-left:-22px;padding:0 0 10px}.tab-list[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px}.tab-list[_ngcontent-%COMP%]   .status-details[_ngcontent-%COMP%]{text-align:right;font-size:14px}.tab-list[_ngcontent-%COMP%]   .status-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:12px}.tab-list[_ngcontent-%COMP%]   .status-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:15px}.ant-tabs-nav-list[_ngcontent-%COMP%]{padding:0}.header_action[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.left_navbar[_ngcontent-%COMP%]{background:#fff;border-right:1px solid #ddd;min-width:230px!important}.inner_nav_header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #f0f0f0}.inner_nav_header[_ngcontent-%COMP%]   .header_action[_ngcontent-%COMP%]{margin-bottom:15px}.refund_list[_ngcontent-%COMP%]{padding:0;margin:0}.refund_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;padding:5px 10px!important;justify-content:space-between;align-items:center;text-align:left;border-bottom:1px solid #f0f0f0;height:unset}.refund_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.refund_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-transform:uppercase;font-size:14px}.refund_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .left[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1b75bb}.refund_body_main[_ngcontent-%COMP%]{padding:0 15px}.refund_details_header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:8px 0}.refund_details_header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px}.refund_details_header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:12px;color:#585858}.refund_details_body[_ngcontent-%COMP%]{padding:15px}.refund_details_body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:20px 0}.refund_details_body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{line-height:30px}.refund_details_body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #ff8800;color:#f80;padding:2px 10px}.refund_details_body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child{width:110px}.refund_details_body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:last-child{padding-left:15px}.refund_details_body-product[_ngcontent-%COMP%]{margin:30px 0}.ammount_summary[_ngcontent-%COMP%]{margin:15px 0;width:400px;float:right}.ammount_summary_single[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.ammount_summary_single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:70px;border:none;text-align:right;border-bottom:1px solid #e4e4e4}.ammount_summary_single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:none;box-shadow:none}.mt15[_ngcontent-%COMP%]{margin-top:15px}.action_btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.action_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:15px}.table-samary[_ngcontent-%COMP%]{height:auto;border:1px solid #1b75bb;margin-bottom:20px}.action_btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px;color:#585858}.summary_total[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:right;font-size:14px}.recived_qt[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.recived_qt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;line-height:19px}.recived_qt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:green;font-size:25px;line-height:25px;margin-left:10px!important}tbody[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50px;border:none;text-align:center;background:transparent;border-bottom:1px solid #ddd}.purchase_edit_btn[_ngcontent-%COMP%]{text-align:right}@media (max-width: 768px){.table-samary[_ngcontent-%COMP%]   nz-layout[_ngcontent-%COMP%]{max-height:unset;flex-direction:column}.main-layout[_ngcontent-%COMP%]{flex-direction:column!important}.left_navbar[_ngcontent-%COMP%]{min-width:100%!important;width:100%!important;border:none}.thumb_img[_ngcontent-%COMP%]{width:80px}.ammount_summary[_ngcontent-%COMP%]{margin:10px 0;width:300px}.refund_body_main[_ngcontent-%COMP%]{width:100%!important;margin:20px 0;padding:0}.refund_details_body[_ngcontent-%COMP%]{padding:0}tbody[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px}.w100[_ngcontent-%COMP%]{width:140px}}.price[_ngcontent-%COMP%]{display:block;width:30px}.price[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;background-color:#004ede;padding:10px}.edit-button[_ngcontent-%COMP%]{background-color:#0058ff;color:#fff}.info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:#383838;padding:10px 20px;width:max-content}.info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-weight:700px}.details[_ngcontent-%COMP%]{padding:20px}.details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:16px}.details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;font-style:bold;font-weight:800px}.order-header-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:15px;width:100%;padding-top:20px}.order-title[_ngcontent-%COMP%]{display:block}.order-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:600;font-style:normal;font-size:24px;line-height:30px;margin:0}[_ngcontent-%COMP%]::placeholder{color:#989eaf}.order-btn-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.order-btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;text-align:right}.order-btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;margin-bottom:10px}.order-btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin:0}.order-btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000;font-family:Roboto,sans-serif;font-weight:500;font-style:normal;font-size:16px;display:block;background-color:transparent;border:1px solid transparent;outline:none;padding:8px 15px;box-sizing:border-box;border-radius:5px;cursor:pointer}.order-btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active-btn[_ngcontent-%COMP%]{background-color:#0058ff;color:#fff;box-shadow:0 2px 5px #0000001a}@media (max-width: 500px){.order-header-top[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;justify-content:flex-end}}.order_details[_ngcontent-%COMP%]{display:grid;grid-template-columns:350px 1fr;gap:15px;margin-top:40px}.order_details_left-sidebar[_ngcontent-%COMP%]{display:block}.order-details-left-top-dotted[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;color:#404041;font-family:Roboto,sans-serif;font-weight:500;font-size:16px;display:flex;align-items:center;justify-content:flex-start;gap:5px;border:1px solid transparent}.dotted[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #eee;color:#404041;font-family:Roboto,sans-serif;font-size:25px;width:50px;height:30px;display:flex;align-items:center;justify-content:center;box-sizing:border-box;border-radius:5px}.order-details-left-sidebar-top[_ngcontent-%COMP%]{padding-bottom:10px;position:relative}.order-details-left-top-dotted[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:20px}.top-search-area[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;width:100%;margin-top:3px}.top-search-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f5f5f5;width:40px;height:40px;border:1px solid #b2b2b2;color:#000;display:flex;align-items:center;justify-content:center;border-right:none;font-size:18px}.search-input[_ngcontent-%COMP%]{display:block;width:100%}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#f5f5f5;width:100%;height:40px;border:1px solid #b2b2b2;outline:none;font-family:Roboto,sans-serif;font-size:15px;border-left:none;color:#131523;font-weight:400;padding:0 10px;box-sizing:border-box}.order-details-left-side-bar-main[_ngcontent-%COMP%]{display:block;max-height:600px;overflow-y:auto;padding:0 10px 0 0;width:100%;box-sizing:border-box}.order-details-sidebar-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;cursor:pointer}.order-details-sidebar-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 8px;border-bottom:1px solid #eee}.order-details-sidebar-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#dee9ff}.order-details-sidebar-ul-li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 0;border-bottom:1px solid rgb(242,3,3)}.order-details-sidebar-ul-li-inactive[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 0;border-bottom:1px solid #eee}.sidebar-info-left[_ngcontent-%COMP%]{display:block}.mat-check[_ngcontent-%COMP%]{display:block;color:#191818;font-family:Roboto,sans-serif;font-weight:500;font-size:16px;margin-bottom:10px}.sidebar-info-left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#383838;font-family:Roboto,sans-serif;font-style:normal;font-weight:400;font-size:15px;line-height:18px;margin-left:21px}.sidebar-info-right[_ngcontent-%COMP%]{display:block}.sidebar-info-right[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#191818;font-family:Roboto,sans-serif;font-weight:500;font-size:16px;margin-bottom:10px!important}.sidebar-info-right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f6954b;font-family:Roboto,sans-serif;font-weight:500;font-size:16px}.table-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-right:20px;padding-bottom:10px;border-bottom:1px solid rgb(173,173,173);cursor:pointer}.table_data_name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:14px;font-weight:600;line-height:30px}.table_data_id[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#404041;font-family:Roboto,sans-serif;font-style:normal;font-size:13px;font-weight:400;line-height:30px;display:flex;align-items:center;justify-content:flex-start;padding-right:10px}.table_data_id[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-size:10px;font-weight:400;line-height:30px;padding-left:5px}.table_data_amount[_ngcontent-%COMP%]{text-align:right}.table_data_amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-style:normal;font-size:14px;font-weight:500;line-height:30px;padding-left:5px}.pending[_ngcontent-%COMP%]{background-color:gray!important}.confirm[_ngcontent-%COMP%]{background-color:#00ff2a!important}.delivered[_ngcontent-%COMP%]{background-color:#5277ff!important}.cancel[_ngcontent-%COMP%]{background-color:#ff0909!important}.processing[_ngcontent-%COMP%]{background-color:#f9e106!important}.refund[_ngcontent-%COMP%]{background-color:#faa906!important}.shipping[_ngcontent-%COMP%]{background-color:#a108f9!important}.customer-comment-main[_ngcontent-%COMP%]{display:flex;align-items:start;justify-content:space-between}.customer-comment-main[_ngcontent-%COMP%]     mat-form-field{width:100%}.customer-comment-main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:20px}.order-details-container[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box;margin-bottom:200px}.order-id-area[_ngcontent-%COMP%]{background-color:#f8f8f8;display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 15px;box-sizing:border-box}.order-details-main[_ngcontent-%COMP%]{display:block}.order-details-left[_ngcontent-%COMP%]{display:block;width:100%}.req-id-title[_ngcontent-%COMP%]{display:block}.req-id-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:700;font-size:20px;display:block;line-height:25px;margin-bottom:3px!important}.req-id-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#5b5757;font-family:Roboto,sans-serif;font-weight:500;font-size:16px;display:block}.xmarks[_ngcontent-%COMP%]{display:block}.xmarks[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;font-size:22px}.order-table[_ngcontent-%COMP%]{display:block;width:100%;overflow:auto;background-color:#fff;box-sizing:border-box;box-shadow:0 4px 5px #0000000d;margin-bottom:30px}.table-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;box-sizing:border-box;border-bottom:1px solid #efefef}.table-head-left[_ngcontent-%COMP%]{display:block}.table-head-left[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.table-head-left[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.table-head-left[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin:0}.table-head-left[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:500;padding:15px;box-sizing:border-box;border:none;display:block;border-bottom:2px solid transparent;outline:none;font-size:14px;background-color:transparent;position:relative;bottom:-1px;cursor:pointer}.table-head-left[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-active[_ngcontent-%COMP%]{border-color:#0058ff}.table-head-right[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.edit[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;margin-right:5px}.edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b1b7c1;font-size:24px;font-weight:500}.status-invoice-btn[_ngcontent-%COMP%]{display:block}.status-invoice-btn[_ngcontent-%COMP%]     .mat-form-field-flex>.mat-form-field-infix{padding:.4em 0!important}.status-invoice-btn[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-1.5em}.status-invoice-btn[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}.status-invoice-btn[_ngcontent-%COMP%]     .mat-form-field{width:120px;height:40px;padding:5px}.status-invoice-btn[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;align-items:center}.status-invoice-btn[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}.status-invoice-btn[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 15px;height:33px;box-sizing:border-box;border:1px solid transparent;color:#fff;font-family:Roboto,sans-serif;font-style:normal;font-weight:500;outline:none}.status-invoice-btn[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#0c8ff9}.status-invoice-btn[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{background-color:#959595}.send-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.send-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #edf0fa;border-left:none;border-right:none;background-color:#fff;height:33px;padding:0 5px;box-sizing:border-box;outline:none;font-family:Roboto,sans-serif;font-weight:400;font-size:14px}.send-btn[_ngcontent-%COMP%]{display:block}.send-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:33px;background-color:#0058ff;color:#fff;padding:0 10px;border:1px solid transparent;box-sizing:border-box;outline:none;font-family:Roboto,sans-serif;font-weight:400;font-size:13px}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;table-layout:fixed;border-collapse:collapse}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;min-width:1090px;padding-top:30px}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;font-weight:700;font-family:Roboto,sans-serif;color:#131523;box-sizing:border-box;min-height:60px;display:flex;align-items:center;justify-content:center;width:100%;text-align:center;text-transform:capitalize;min-width:100px}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 0;box-sizing:border-box;text-align:center;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;min-width:100px}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#131523;font-family:Roboto,sans-serif;font-weight:500;font-size:15px;line-height:20px}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px;color:#131523}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]{padding:0}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#ecff9f;padding:20px 10px;box-sizing:border-box;width:100%;height:auto;text-align:center;display:flex;align-items:center;justify-content:center}.product[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:flex-start;gap:10px;text-align:center}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%], .order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%]{width:40px;max-width:40px;min-width:40px;text-align:center}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{min-width:340px}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .vendor[_ngcontent-%COMP%]{min-width:130px;padding:15px 5px;box-sizing:border-box}.order-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]{min-width:130px}.product-img[_ngcontent-%COMP%]{display:block}.product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:10px}.product-info[_ngcontent-%COMP%]{display:block;text-align:left}.product-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:600;font-style:normal;font-size:18px;display:block;margin-bottom:5px!important;display:-webkit-box;-webkit-box-orient:vertical;max-height:70px;overflow:hidden;-webkit-line-clamp:2}.product-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:500;font-size:14px;display:flex;align-items:center;gap:5px;margin-bottom:2px!important}.product-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block!important}.product-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:30px}.product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:500;font-size:14px;display:block;margin-bottom:2px!important}  .order-table .mat-checkbox-frame,   .order-table .mat-checkbox-background{border-color:#c3daff;background-color:#c3daff}  .order-table .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#3b86ff!important}.order-pay-details[_ngcontent-%COMP%]{width:100%;margin:auto}.payment-summery-area[_ngcontent-%COMP%]{display:block}.modift-btn-area[_ngcontent-%COMP%]{width:100%}.btn-area[_ngcontent-%COMP%]{display:block}.btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:15px}.btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin:0}.btn-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;grid-gap:5px;gap:5px;border:1px solid transparent;background-color:#0058ff;color:#fff;padding:7px 15px;box-sizing:border-box;font-size:15px;font-weight:500;font-family:Open Sans,sans-serif;border-radius:5px;margin-bottom:20px}.paid-by[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;width:100%;gap:10px;margin-right:20px}.paid-by[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;object-fit:contain}.paid-by[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:15px;font-weight:500;line-height:22px}.customer-msg[_ngcontent-%COMP%]{display:block;margin-right:30px}.customer-msg[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Poppins,sans-serif;font-style:normal;display:block;font-size:18px;font-weight:700;line-height:30px;margin-bottom:10px!important}.customer-msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:20px;background-color:#fff;box-shadow:0 5px 4px #0000001a;max-width:500px;width:100%;color:#131523;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:13px;font-weight:500;line-height:24px}.order-details-right[_ngcontent-%COMP%]{display:block;padding:30px;box-sizing:border-box;background-color:#fff;box-shadow:0 3px 5px #0000001a;width:100%;height:auto}.delivery-data[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:20px}.delivery-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.delivery-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:15px;width:100%;margin-bottom:15px}.delivery-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{max-width:110px;width:100%}.delivery-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:17px;font-weight:700;line-height:24px}.delivery-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:15px;font-weight:500;line-height:22px;text-align:left}.customer-info-area[_ngcontent-%COMP%]{display:block;margin-bottom:30px}.customer-title[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin-bottom:20px}.customer-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:17px;font-weight:700;line-height:25px;border-bottom:1px solid #3b86ff;padding-bottom:5px;box-sizing:border-box}.customer-info[_ngcontent-%COMP%]{display:block}.customer-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.customer-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start;gap:20px;margin-bottom:20px}.customer-info-left[_ngcontent-%COMP%]{max-width:75px;width:100%}@media (max-width: 450px){.delivery-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .customer-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:flex-start}.customer-info-left[_ngcontent-%COMP%]{max-width:100%}}.customer-info-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:16px;font-weight:700;line-height:24px}.customer-info-right[_ngcontent-%COMP%]{text-align:left;white-space:pre-wrap;word-wrap:break-word;width:230px}.customer-info-right[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:15px;font-weight:500;line-height:22px;text-align:left}.customer-info-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0058ff;font-family:Roboto,sans-serif;font-weight:500;font-size:15px}.customer-comment[_ngcontent-%COMP%]{display:block;margin-bottom:30px}.customer-comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%;background-color:#fff;border:1px solid #dae1f5;font-size:15px;font-weight:500;font-family:Roboto,sans-serif;border-radius:5px;padding:7px 10px;box-sizing:border-box;outline:none}.customer-comment[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1581ed;padding:7px 10px;font-size:15px;font-weight:600;font-family:Roboto,sans-serif;border-radius:5px;outline:none;box-sizing:border-box;border:none;color:#fff;text-transform:capitalize}.order-confirm-status[_ngcontent-%COMP%]{display:block;margin-bottom:20px;box-sizing:border-box}.status-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:15px;justify-content:flex-start;padding-bottom:20px;box-sizing:border-box;position:relative;z-index:3;overflow:hidden}.status-info[_ngcontent-%COMP%]:after{content:"";display:block;width:2px;height:100%;background-color:#86bef5;position:absolute;bottom:-5%;left:13px;z-index:1}.status-info[_ngcontent-%COMP%]:last-child:after{display:none}.status-info[_ngcontent-%COMP%]:first-child:after{display:none}.status-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#d7e7ff;color:#fff;border:1px solid #c3daff;font-size:15px;border-radius:50%;width:26px;height:26px;position:relative;top:1px;z-index:2}.status-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none}.active-status[_ngcontent-%COMP%]{background-color:#0058ff!important;border-color:#0058ff!important}.active-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block!important}.status-type[_ngcontent-%COMP%]{display:block;width:100%}.status-type[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:600;font-size:15px;display:block;margin-bottom:5px!important;line-height:18px;text-transform:capitalize}.status-type[_ngcontent-%COMP%]   .admin_name[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:600;font-size:11px;display:block;line-height:12px}.status-type[_ngcontent-%COMP%]   .admin_massage[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:500;font-size:14px;display:block;margin-bottom:5px!important;line-height:18px}.time-line-area[_ngcontent-%COMP%]{display:block;margin-top:60px;box-sizing:border-box;width:100%;margin-bottom:40px}.time-line-title[_ngcontent-%COMP%]{display:block;margin-bottom:30px;padding-left:20px;box-sizing:border-box}.time-line-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;font-family:Roboto,sans-serif;font-weight:700;font-style:normal;font-size:25px;display:block}.timeline-main[_ngcontent-%COMP%]{padding:30px;box-sizing:border-box;background-color:#f8f8f8;width:100%;color:#131523}.timeline-main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.timeline-main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start;gap:15px;padding-bottom:25px;position:relative;z-index:4;overflow:hidden;padding-left:170px}.timeline-main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";width:1px;height:80%;background-color:#5691ff;position:absolute;bottom:-14%;left:15px;z-index:-4}.timeline-main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:after{display:none}.time-check[_ngcontent-%COMP%]{display:block}.time-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:35px;height:35px;display:flex;align-items:center;justify-content:center;border:1px solid #c4c4c4;color:#78d012;font-size:14px;padding:0;margin:0;border-radius:50%;background-color:#fff}.active-check[_ngcontent-%COMP%]{background-color:#0058ff!important;color:#fff!important;border-color:#0058ff!important}.timeline-info[_ngcontent-%COMP%]{display:block;width:100%}.timeline-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#131523;font-family:Roboto,sans-serif;font-weight:700;font-size:17px;display:block;margin-bottom:5px!important;line-height:18px;text-transform:capitalize}.timeline-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#131523;font-family:Poppins,sans-serif;font-weight:500;font-size:14px;display:block;margin-bottom:5px!important;line-height:18px}.timeline-info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{position:absolute;top:12px;left:0;color:#b1b1b1}@media (max-width: 1500px){.order-details-main[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}.order-details-right[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;box-sizing:border-box}.customer-comment[_ngcontent-%COMP%], .customer-info[_ngcontent-%COMP%]{margin:0}}@media (min-width: 1500px) and (max-width: 1800px){.table-head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;justify-content:flex-end;padding-bottom:10px}}@media (max-width: 1450px){.table-head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;justify-content:flex-end;padding-bottom:10px}}@media (max-width: 1250px){.order_details[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}@media (max-width: 600px){.timeline-main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}.date[_ngcontent-%COMP%]{position:relative}}@media (max-width: 500px){.table-head-right[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;justify-content:flex-end;gap:10px;width:100%}.send-input[_ngcontent-%COMP%], .send-area[_ngcontent-%COMP%]{width:100%}.send-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-left:1px solid #edf0fa;width:100%}}@media (max-width: 750px){.order-details-right[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr);grid-gap:10px}.customer-comment[_ngcontent-%COMP%]{margin-bottom:20px}}.total-area[_ngcontent-%COMP%]{display:block;max-width:400px;width:100%;margin-left:auto;padding:20px;box-sizing:border-box;box-shadow:0 2px 5px #0000000d;border:1px solid #d1d1d1;border-radius:5px}.total-area[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:block;margin:0!important;background-color:#d1d1d1;width:100%;height:2px}.total-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.total-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:0px 10px;padding:5px 0}.total-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .total-price[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#574d4d;font-family:Roboto,sans-serif;font-weight:400;font-size:15px;display:block}.color-red[_ngcontent-%COMP%]{color:red!important;font-weight:500}.rcvQtyError[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f80;font-size:12px;line-height:18px;padding:11px 0}.form-field[_ngcontent-%COMP%]{display:block;width:100%;min-width:0px}  .form-field.mat-form-field .mat-form-field-label{color:#74777e;font-family:Roboto,sans-serif}  .form-field mat-select{color:#000;font-family:Roboto,sans-serif}  .form-field .mat-form-field-appearance-outline .mat-form-field-outline{color:#a1a5a9}  .form-field.mat-form-field-appearance-outline .mat-form-field-outline-thick{color:#0058ff}  .form-field.mat-form-field.mat-focused .mat-form-field-label{color:#0058ff!important}  .form-field.mat-form-field-appearance-outline .mat-form-field-wrapper{padding-bottom:0}  .form-field.mat-form-field-infix{min-width:0px;width:auto}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:#74777e;font-family:Roboto,sans-serif;font-size:16px}[_ngcontent-%COMP%]::placeholder{color:#74777e}  .form-field.mat-form-field-appearance-outline .mat-form-field-outline{color:#0058ff}  .radio .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#0058ff}  .radio .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#0058ff}  .radio .mat-radio-outer-circle{border-color:#c3c3c3}  .radio .mat-radio-label{white-space:pre-wrap}  .mat-check .mat-checkbox-inner-container-no-side-margin{background-color:#d7e7ff}  .mat-check .mat-checkbox-frame{border-color:#b0ceff}  .mat-check.mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#0058ff}  .mat-check.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element{background-color:#0058ff}']}),i})();var b=l(12943),O=l(80574),It=l(37623),st=l(90868),lt=l(92905),Qt=l(68132),ct=l(79814);function Et(i,c){if(1&i&&(t.TgZ(0,"mat-radio-button",14),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(null==e?null:e.viewValue)}}function jt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),t._uU(5,"Export Products"),t.qZA()(),t.TgZ(6,"div")(7,"span",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportPOpUpHide())}),t._UZ(8,"i",5),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"h3"),t._uU(12,"Export"),t.qZA(),t.TgZ(13,"mat-radio-group",8),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedAmount=o)}),t.YNc(14,Et,2,2,"mat-radio-button",9),t.qZA()(),t.TgZ(15,"div",7)(16,"h3"),t._uU(17,"Export as"),t.qZA(),t.TgZ(18,"mat-radio-group",8),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedType=o)}),t.TgZ(19,"mat-radio-button",10),t._uU(20,"CSV for Excel, Numbers, or other spreadsheet programs"),t.qZA(),t.TgZ(21,"mat-radio-button",11),t._uU(22,"Plain CSV file"),t.qZA()()()(),t.TgZ(23,"div",12)(24,"ul")(25,"li")(26,"button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportPOpUpHide())}),t._uU(27,"Cancel "),t.qZA()(),t.TgZ(28,"li")(29,"button"),t._uU(30,"Export transaction histories"),t.qZA()(),t.TgZ(31,"li")(32,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onExport())}),t._uU(33,"Export Products"),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(13),t.Q6J("ngModel",e.selectedAmount),t.xp6(1),t.Q6J("ngForOf",e.exportTypes),t.xp6(4),t.Q6J("ngModel",e.selectedType)}}let Jt=(()=>{class i{constructor(e,n){this.utilsService=e,this.orderService=n,this.export=!1,this.valueChange=new t.vpe,this.exportTypes=[{value:b.t.CURRENT_PAGE,viewValue:"Current Page"},{value:b.t.ALL_ORDERS,viewValue:"All Products"},{value:b.t.SELECTED,viewValue:"Selected Data : "},{value:b.t.BY_SEARCH_RESULT,viewValue:"Results matching your search"},{value:b.t.BY_DATE,viewValue:"By Date"}]}ngOnInit(){}getAllOrders(){this.orderService.getAllOrdersByAdmin().subscribe(e=>{this.orders=e.data})}exportPOpUpHide(){this.export=!1}exportPOpUpShow(){this.export=!0}exportToExcel(){const e=this.utilsService.getDateString(new Date),n=O.P6.json_to_sheet(this.orders),o=O.P6.book_new();O.P6.book_append_sheet(o,n,"products"),O.NC(o,`Products_${e}.xlsx`)}onExport(){this.valueChange.emit({selectedAmount:this.selectedAmount,SelectedType:this.selectedType})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.F),t.Y36(Qt.p))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-export-popup"]],outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[["class","export-order-area",4,"ngIf"],[1,"export-order-area"],[1,"export-order-main"],[1,"export-order-header"],[3,"click"],[1,"fa-solid","fa-xmark"],[1,"export-order-body"],[1,"export"],[3,"ngModel","ngModelChange"],["class","radio-box",3,"value",4,"ngFor","ngForOf"],["value","1",1,"radio-box"],["value","2",1,"radio-box"],[1,"export-footer-area"],[1,"export-btn-active",3,"click"],[1,"radio-box",3,"value"]],template:function(e,n){1&e&&t.YNc(0,jt,34,3,"div",0),2&e&&t.Q6J("ngIf",1==n.export)},dependencies:[f.sg,f.O5,ct.VQ,ct.U0,r.JJ,r.On],styles:[".export-order-area[_ngcontent-%COMP%]{background-color:#0000004d;position:fixed;height:100vh;overflow-y:auto;top:0;left:0;z-index:1500!important;display:flex;align-items:center;justify-content:center;padding:80px 20px 30px;box-sizing:border-box;width:100%;overflow-x:hidden}.export-order-main[_ngcontent-%COMP%]{display:block;max-width:600px;width:100%;margin:auto;background-color:#fff;border-radius:15px;border:1px solid #0058ff;box-shadow:0 5px 10px #0000004d}.export-order-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;width:100%;padding:20px;box-sizing:border-box;border-bottom:1px solid #eaebed}.export-order-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5b5d5d;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:18px;line-height:25px;font-weight:500}.export-order-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding:4px;box-sizing:border-box;color:#5b5d5d;font-family:Roboto,sans-serif;font-size:18px}.export-order-body[_ngcontent-%COMP%]{display:block;padding:20px 15px;box-sizing:border-box}.fa-xmark[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}.export[_ngcontent-%COMP%]{display:block;margin-bottom:20px}.export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5b5d5d;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:19px;line-height:25px;font-weight:500;margin-bottom:20px!important}.export[_ngcontent-%COMP%]   .radio-box[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:15px;color:#5b5d5d;font-family:Roboto,sans-serif;font-weight:400;font-size:16px;font-style:normal}.export[_ngcontent-%COMP%]   .radio-box[_ngcontent-%COMP%]:last-child{margin:0}.export-footer-area[_ngcontent-%COMP%]{display:block;padding:20px;box-sizing:border-box;border-top:1px solid #eaebed}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;text-align:right}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;margin-bottom:15px}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#5b5d5d;font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:15px;display:block;background-color:#fff;outline:none;border:1px solid #eaebed;padding:6px 10px;box-sizing:border-box;border-radius:4px;transition:all .3s linear}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0058ff;border-color:#0058ff;color:#fff}.export-btn-active[_ngcontent-%COMP%]{background-color:#0058ff!important;border-color:#0058ff!important;color:#fff!important}  .radio-box.mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#0058ff}  .radio-box.mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#0058ff}"]}),i})();const Lt=["export"],Yt=["menuTrigger"],Gt=["matCheckbox"],Ht=["searchForm"],Vt=["productSearchForm"],Kt=["searchInput"],$t=["productSearchInput"];function Bt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.clearDateFilter())}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.dateRangeFilter?e.dateRangeFilter:e.dateRangeCalFilter," ")}}function Wt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"i",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.clearSortFilter())}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.sortFilter," ")}}function Xt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"span",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.clearAllFilters())}),t._uU(1," Clear All "),t.qZA()}}function te(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.showDeleteConfirm(null==o?null:o._id))}),t._UZ(1,"i",48),t.qZA()}}const ee=function(i){return["edit",i]};function ne(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",42),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onPurchaseDetailsChanged(s.event,a._id))}),t.TgZ(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"p",43),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"purchaseStatus"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t.YNc(17,te,2,0,"button",44),t.TgZ(18,"button",45),t._UZ(19,"i",46),t.qZA()()()}if(2&i){const e=c.$implicit;t.xp6(3),t.hij(" ",null==e?null:e.purchaseId," "),t.xp6(2),t.hij(" ",t.xi3(6,8,null==e?null:e.dateTime,"short")," "),t.xp6(3),t.hij(" ",t.lcZ(9,11,null==e?null:e.status)," "),t.xp6(3),t.hij(" ",null==e?null:e.reference," "),t.xp6(2),t.hij(" ",null==e||null==e.supplier?null:e.supplier.name," "),t.xp6(2),t.hij(" ",null==e||null==e.products?null:e.products.length," "),t.xp6(2),t.Q6J("ngIf",0===(null==e?null:e.status)),t.xp6(1),t.Q6J("routerLink",t.VKq(13,ee,e._id))}}const oe=function(){return{boxShadow:"none"}},ie=function(){return{x:"750px"}};function re(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"nz-tab",14),t.NdJ("nzSelect",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onFilterSelectChange(a))}),t.TgZ(1,"div",15)(2,"form",null,16)(4,"input",17,18),t.NdJ("focus",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.handleFocus(o))}),t.qZA()(),t.TgZ(6,"div",19)(7,"nz-input-group",20)(8,"button",21),t._uU(9," Set Date "),t._UZ(10,"i",22),t.qZA(),t.TgZ(11,"button",21),t._uU(12," Sort "),t._UZ(13,"i",23),t.qZA()(),t.TgZ(14,"nz-dropdown-menu",24,25)(16,"div",26)(17,"ul",27)(18,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.todayFilter())}),t._uU(19,"Today"),t.qZA(),t.TgZ(20,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.yesterdayFilter())}),t._uU(21,"Yesterday"),t.qZA(),t.TgZ(22,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.lastWeekFilter())}),t._uU(23,"Last 7 days"),t.qZA(),t.TgZ(24,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.lastThirtyDaysFilter())}),t._uU(25," Last 30 days "),t.qZA(),t.TgZ(26,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.lastThreeMonthFilter())}),t._uU(27," Last 90 days "),t.qZA(),t.TgZ(28,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.lastMonthFilter())}),t._uU(29,"Last month"),t.qZA(),t.TgZ(30,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.lastYearFilter())}),t._uU(31,"Last year"),t.qZA(),t.TgZ(32,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.weekToDateFilter())}),t._uU(33,"Week to date"),t.qZA(),t.TgZ(34,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.monthToDateFilter())}),t._uU(35," Month to date "),t.qZA(),t.TgZ(36,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.yearToDateFilter())}),t._uU(37,"Year to date"),t.qZA()(),t.TgZ(38,"div",29)(39,"nz-card",7)(40,"nz-range-picker",30),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onDateChange(o[0],o[1]))})("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.filterDate=o)}),t.qZA(),t._UZ(41,"br"),t.TgZ(42,"button",31),t._uU(43,"Apply"),t.qZA()()()()(),t.TgZ(44,"nz-dropdown-menu",null,32)(46,"ul",27)(47,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortData({purchaseId:-1},1,"Purchase Number(High to low)"))}),t._uU(48," Purchase Number(High to low) "),t.qZA(),t.TgZ(49,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortData({purchaseId:1},2,"Purchase Number(Low to High)"))}),t._uU(50," Purchase Number(Low to High) "),t.qZA(),t.TgZ(51,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortData({createdAt:1},3,"Created (oldest first)"))}),t._uU(52," Created (oldest first) "),t.qZA(),t.TgZ(53,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortData({createdAt:-1},4,"Created (newest first)"))}),t._uU(54," Created (newest first) "),t.qZA(),t.TgZ(55,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortData({totalAmount:-1},5,"Amount(High to low)"))}),t._uU(56," Amount(High to low) "),t.qZA(),t.TgZ(57,"li",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortData({totalAmount:1},6,"Amount (Low to High)"))}),t._uU(58," Amount (Low to High) "),t.qZA()()()()(),t.TgZ(59,"div",33)(60,"ul"),t.YNc(61,Bt,3,1,"li",34),t.YNc(62,Wt,3,1,"li",34),t.qZA(),t.YNc(63,Xt,2,0,"span",35),t.qZA(),t.TgZ(64,"div",36)(65,"nz-table",37,38)(67,"thead")(68,"tr")(69,"th"),t._uU(70,"ID & Date"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Status"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"Reference"),t.qZA(),t.TgZ(75,"th"),t._uU(76,"Supplier Name"),t.qZA(),t.TgZ(77,"th"),t._uU(78,"Items"),t.qZA(),t.TgZ(79,"th"),t._uU(80,"Action"),t.qZA()()(),t.TgZ(81,"tbody"),t.YNc(82,ne,20,15,"tr",39),t.qZA()()()()}if(2&i){const e=c.$implicit,n=t.MAs(15),o=t.MAs(45),a=t.MAs(66),s=t.oxw();t.Q6J("nzTitle",e),t.xp6(8),t.Q6J("nzDropdownMenu",n),t.xp6(3),t.Q6J("nzDropdownMenu",o),t.xp6(29),t.Q6J("ngModel",s.filterDate)("nzPopupStyle",t.DdM(12,oe))("nzDisabledDate",s.disabledDate),t.xp6(21),t.Q6J("ngIf",s.dateRangeFilter||s.dateRangeCalFilter),t.xp6(1),t.Q6J("ngIf",s.sortFilter),t.xp6(1),t.Q6J("ngIf",s.sortFilter||s.dateRangeFilter||s.dateRangeCalFilter||s.clearAllFilter),t.xp6(2),t.Q6J("nzData",s.purchases)("nzScroll",t.DdM(13,ie)),t.xp6(17),t.Q6J("ngForOf",a.data)}}function ae(i,c){if(1&i&&(t.TgZ(0,"a",49),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("Total : ",e.totalNumbers?e.totalNumbers:0,"")}}const se=[{path:"",component:(()=>{class i{constructor(e,n,o,a,s,m,M,y,T,w,V,K){this.activatedRoute=e,this.modal=n,this.spinner=o,this.reloadService=a,this.supplierService=s,this.purchaseService=m,this.productService=M,this.router=y,this.utilsService=T,this.dialog=w,this.msg=V,this.fb=K,this.tabs=["All PO","Draft","Partial","Closed"],this.allChecked=!1,this.checkOptionsOne=!1,this.ponewVisible=!1,this.status=0,this.currentPage=1,this.productsPerPage=10,this.totalProductsStore=0,this.query=null,this.activeSort=null,this.holdPrevData=[],this.searchProducts=[],this.purchases=[],this.selectedIds=[],this.overlay=!1,this.isOpen=!1,this.isFocused=!1,this.isLoading=!1,this.isSelect=!1,this.checked=!1,this.indeterminate=!1,this.productEnum=nt.P,this.suppliers=[],this.filteredSupplierList=[],this.today=new Date,this.dataFormDateRange=new r.cw({start:new r.NI,end:new r.NI}),this.clearAllFilter=!1,this.totalNumbers=0,this.disabledDate=$=>(0,It.Z)($,this.today)>0}ngOnInit(){this.subAcRoute=this.activatedRoute.queryParams.subscribe(e=>{e&&e.page?(this.currentPage=e.page,this.sortQueryParam=e.sortQueryParam,this.startDateParam=e.startDateParam,this.endDateParam=e.endDateParam,this.dateRangeParam=e.dateRangeParam,this.filterSortCheck()):this.currentPage=1}),this.queryParamsVar={page:1,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},this.startDateParam&&this.dateRangeParam&&this.onDateChange(this.startDateParam,this.endDateParam,!0,this.dateRangeParam),this.startDateParam&&this.endDateParam&&this.dateRangeParam&&this.onDateChange(this.startDateParam,this.endDateParam,!0,this.dateRangeParam),this.startDateParam&&null!==this.endDateParam&&(this.filter=Object.assign(Object.assign({},this.filter),{createdAt:{$gte:this.startDateParam,$lt:new Date}})),this.reloadService.refreshPurchase$.subscribe(()=>{this.getAllPurchase(),this.getSuppliers()}),this.initModule(),this.getSuppliers(),this.getAllPurchase()}filterSortCheck(){if(this.sortQueryParam){let e;switch(this.sortQueryParam){case"1":e={purchaseId:-1},this.sortFilter="Purchase Number(High to low)";break;case"2":e={purchaseId:1},this.sortFilter="Purchase Number(Low to High)";break;case"3":e={createdAt:1},this.sortFilter="Created (oldest first)";break;case"4":e={createdAt:-1},this.sortFilter="Created (newest first)";break;case"5":e={totalAmount:-1},this.sortFilter="Amount(High to low)";break;case"6":e={totalAmount:1},this.sortFilter="Amount (Low to High)";break;default:this.sortQuery=null}this.sortQuery=e}this.getAllPurchase()}initModule(){this.dataForm=this.fb.group({reference:[null],dateTime:[this.today],supplier:[null,r.kI.required],supplier_link:[null],manufacturer:[null],supplier_reference:[null],products:this.fb.array([]),adjustmentPrice:[0],purchaseShippingCharge:[0]})}getSuppliers(){this.supplierService.getAll().subscribe(e=>{this.suppliers=e.data,this.filteredSupplierList=this.suppliers.slice()},e=>{this.msg.error(e.message)})}get products(){return this.dataForm.get("products")}newProduct(e,n,o){return this.fb.group(o?{productData:e,sku:o.sku,purchaseQuantity:[o.purchaseQuantity,r.kI.required],purchasePrice:[o.purchasePrice,r.kI.required],purchaseTax:[o.purchaseTax,r.kI.required],recieved:[o.recieved],amount:[o.amount]}:n>=0?{productData:e,sku:e.variantFormArray[n].variantSku,purchaseQuantity:[1,r.kI.required],purchasePrice:[e.costPrice,r.kI.required],purchaseTax:[0,r.kI.required],recieved:[0],amount:[0]}:{productData:e,sku:e.sku,purchaseQuantity:[1,r.kI.required],purchasePrice:[e.costPrice,r.kI.required],purchaseTax:[0,r.kI.required],recieved:[0],amount:[0]})}addProduct(e,n,o){this.products.push(o?this.newProduct(e,null,o):n>=0?this.newProduct(e,n):this.newProduct(e))}removeSkill(e){this.products.removeAt(e)}calculateSubTotal(){let e=0;return this.products.value.forEach(function(n){e+=n.amount}),e}calculateTotal(){return this.calculateSubTotal()+this.dataForm.value.purchaseShippingCharge+this.dataForm.value.adjustmentPrice}addPurchase(e){this.purchaseService.add(e).subscribe(n=>{this.msg.success(n.message),this.reloadService.needRefreshPurchase$()},n=>{this.msg.error(n.message)})}editPurchase(e){this.purchaseService.edit(e).subscribe(n=>{this.msg.success(n.message),this.reloadService.needRefreshPurchase$()},n=>{this.msg.error(n.message)})}getAllPurchase(){this.spinner.show();const e={currentPage:this.currentPage.toString(),pageSize:this.productsPerPage.toString()};this.pagination=e,this.subProduct=this.purchaseService.getAll(this.pagination,this.filter,this.sortQuery).subscribe(n=>{var o;this.purchases=n.data,this.holdPrevData=this.purchases,this.totalNumbers=null===(o=this.purchases)||void 0===o?void 0:o.length,this.spinner.hide()},n=>{this.spinner.hide(),console.log(n)})}setThumbnailImage(e){return this.productService.getImages(e.medias,e.images)[0]}getVariantName(e,n,o,a){return 0!==a?"/"+o.variantDataArray[e][n]:o.variantDataArray[e][n]}exportPopUpShow(){this.exportStock.exportPOpUpShow()}exportToExcel(e){e.selectedAmount===b.t.ALL_STOCK?this.purchaseService.getAll(null).subscribe(n=>{this.exportData(n.data,e.SelectedType)}):e.selectedAmount===b.t.CURRENT_PAGE?this.exportData(this.purchases,e.SelectedType):e.selectedAmount===b.t.SELECTED?this.purchaseService.getAll(null).subscribe(n=>{this.exportData(n.data,e.SelectedType)}):e.selectedAmount===b.t.BY_SEARCH_RESULT&&this.exportData(this.searchProducts,e.SelectedType)}exportData(e,n){this.spinner.show();const o=this.utilsService.getDateString(new Date),a=O.P6.json_to_sheet(e),s=O.P6.book_new();O.P6.book_append_sheet(s,a,"STOCK"),O.NC(s,"2"===n?`STOCK${o}.csv`:`STOCK${o}.xlsx`),this.spinner.hide()}onFilterSelectChange(e){switch(console.log(e),e){case"All PO":this.filter=null,delete this.filter,console.log(this.filter);break;case"Draft":this.filter={status:0};break;case"Partial":this.filter={status:3};break;case"Closed":this.filter={status:4}}e||delete this.filter,this.getAllPurchase()}sortData(e,n,o){let a;switch(this.router.navigate([],{queryParams:this.queryParamsVar}),o){case"Purchase Number(High to low)":a="1";break;case"Purchase Number(Low to High)":a="2";break;case"Created (oldest first)":a="3";break;case"Created (newest first)":a="4";break;case"Amount(High to low)":a="5";break;case"Amount (Low to High)":a="6";break;default:a=null}this.sortFilter=o,this.sortQueryParam=a,this.sortQuery=e,this.activeSort=n,this.searchQuery?this.purchaseService.getBySearch(this.pagination,this.searchQuery,this.sortQuery,this.filter).subscribe(s=>{this.purchases=s.data},()=>{this.isLoading=!1}):this.getAllPurchase()}onAllSelectChange(e){const n=this.purchases.map(o=>o._id);e.checked?(this.selectedIds=this.utilsService.mergeArrayString(this.selectedIds,n),this.purchases.forEach(o=>{o.select=!0})):n.forEach(o=>{this.purchases.find(s=>s._id===o).select=!1;const a=this.selectedIds.findIndex(s=>s===o);this.selectedIds.splice(a,1)})}onPageChanged(e){this.router.navigate([],{queryParams:{page:e}})}onClickSearchArea(e){e.stopPropagation()}handleFocus(e){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchProducts.length>0&&this.setPanelState(e),this.isFocused=!0)}handleFocus2(e){this.productSearchInput.nativeElement.focus(),!this.isFocused&&(this.isFocused=!0)}setPanelState(e){e&&e.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchProducts.length>0&&(this.isOpen=!0,this.overlay=!0)}handleOutsideClick(){!this.isOpen||(this.isOpen=!1,this.overlay=!1,this.isFocused=!1)}handleCloseOnly(){this.isOpen?(this.isOpen=!1,this.overlay=!1,this.isFocused=!1):this.isFocused=!1}handleCloseAndClear(){this.isOpen?(this.isOpen=!1,this.overlay=!1,this.searchProducts=[],this.isFocused=!1):this.isFocused=!1}openDialog(){this.dialog.open(U,{restoreFocus:!1,data:{order:{},canceledOrderSku:"sku001",canceledOrderAmount:"100tk",selectedIds:this.selectedIds}}).afterClosed().subscribe(()=>this.menuTrigger.focus())}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,p.j)("searchTerm"),(0,D.b)(200),(0,x.x)(),(0,S.w)(n=>(this.searchQuery=n.trim(),console.log(this.searchQuery),this.searchQuery?this.purchaseService.getBySearch(this.pagination,this.searchQuery,this.sortQuery,this.filter):(this.purchases=this.holdPrevData,this.searchQuery=null,u.E)))).subscribe(n=>{this.purchases=n.data},()=>{this.isLoading=!1})}showNewPurchase(){this.ponewVisible=!0}purchaseCancel(){this.ponewVisible=!1}showDeleteConfirm(e){this.modal.confirm({nzTitle:"Are you sure delete this task?",nzContent:'<b style="color: red;">All the related datas will be deleted</b>',nzOkText:"Yes",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>{this.delete(e)},nzCancelText:"No",nzOnCancel:()=>console.log("Cancel")})}delete(e){this.purchaseService.delete(e).subscribe(n=>{this.msg.success(n.message)},n=>{this.msg.error(n)})}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.dateRangeParam="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.startDateParam=this.startDate,this.filter=Object.assign(Object.assign({},this.filter),{createdAt:{$gte:this.startDate,$lt:this.today}}),this.reloadService.needRefreshPurchase$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.dateRangeParam="Yesterday",this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshPurchase$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 7 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshPurchase$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 30 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshPurchase$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 90 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshPurchase$()}lastMonthFilter(){const e=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),n=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=e,this.endDate=n,this.dateRangeParam="Last month",this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshPurchase$()}lastYearFilter(){const e=new Date((new Date).getFullYear()-1,0,1),n=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),11,31,23,59,59,999);this.startDate=n,this.endDate=o,this.dateRangeParam="Last Year",this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshPurchase$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.dateRangeParam="Week to date",this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshPurchase$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshPurchase$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshPurchase$()}onDateChange(e,n,o,a){const s=this.utilsService.getDateString(e,"DD MMM-YYYY"),m=this.utilsService.getDateString(n,"DD MMM-YYYY");!0===o?(this.dateRangeCalFilter=null,this.dateRangeFilter=a):(this.dateRangeFilter=null,this.dateRangeCalFilter=s+" - "+m),this.startDateParam=e,this.endDateParam=n,this.filter=Object.assign(Object.assign({},this.filter),n?{createdAt:{$gte:e,$lte:n}}:{createdAt:{$eq:e}}),this.reloadService.needRefreshPurchase$()}clearDateFilter(){var e;null===(e=this.filter)||void 0===e||delete e.createdAt,this.dateRangeFilter=null,this.dateRangeCalFilter=null,this.reloadService.needRefreshPurchase$()}clearSortFilter(){this.sortQuery=null,this.sortFilter=null,this.router.navigate([],{queryParams:{page:1}}),this.reloadService.needRefreshPurchase$()}clearAllFilters(){this.sortFilter=null,this.sortQuery=null,this.filter=null,this.dateRangeFilter=null,this.dateRangeCalFilter&&(this.dateRangeCalFilter=null),this.clearAllFilter=!1,this.reloadService.needRefreshPurchase$()}onPurchaseDetailsChanged(e,n){this.router.navigate(["/admin/purchase/details",n],{queryParams:{page:this.currentPage,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},queryParamsHandling:"merge"})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.gz),t.Y36(G.Sf),t.Y36(it.t2),t.Y36(Q.f),t.Y36(W.p),t.Y36(I),t.Y36(P.M),t.Y36(_.F0),t.Y36(Y.F),t.Y36(ot.uw),t.Y36(E.dD),t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Lt,5),t.Gf(Yt,5),t.Gf(Gt,5),t.Gf(Ht,5),t.Gf(Vt,5),t.Gf(Kt,5),t.Gf($t,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.exportStock=o.first),t.iGM(o=t.CRH())&&(n.menuTrigger=o.first),t.iGM(o=t.CRH())&&(n.matCheckbox=o.first),t.iGM(o=t.CRH())&&(n.searchForm=o.first),t.iGM(o=t.CRH())&&(n.productSearchForm=o.first),t.iGM(o=t.CRH())&&(n.searchInput=o.first),t.iGM(o=t.CRH())&&(n.productSearchInput=o.first)}},decls:20,vars:2,consts:[[1,"page-header"],[1,"header-action"],["type","button",3,"click"],["type","button"],["routerLink","create",1,"create_btn"],["nzGutter","16"],["nzXs","24"],["nzSize","small"],[3,"nzTabBarExtraContent"],[3,"nzTitle","nzSelect",4,"ngFor","ngForOf"],["extraTemplate",""],[1,"export-popup-area"],[3,"valueChange"],["export",""],[3,"nzTitle","nzSelect"],[1,"table_filter"],["searchForm","ngForm"],["name","searchTerm","autocomplete","off","ngModel","","nz-input","","placeholder","Search here","nzSize","large",3,"focus"],["searchInput",""],[1,"filter_btn"],["nzCompact",""],["nzSize","large","nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-calendar"],[1,"las","la-sort"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","nzDisabledDate","ngModelChange"],["nz-button","","nzType","primary"],["sortMenu","nzDropdownMenu"],[1,"entry_query_filter"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"table-data-area"],["nzSize","small",3,"nzData","nzScroll"],["bodyData",""],[4,"ngFor","ngForOf"],[1,"las","la-times",3,"click"],[3,"click"],[2,"cursor","pointer",3,"click"],[2,"color","#838383"],["nz-button","",3,"click",4,"ngIf"],["nz-button","",3,"routerLink"],[1,"las","la-edit"],["nz-button","",3,"click"],[1,"las","la-trash"],[2,"text-decoration","none","color","black"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Purchase Order"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return n.exportPopUpShow()}),t._uU(5,"Export"),t.qZA(),t.TgZ(6,"button",3),t._uU(7,"Import"),t.qZA(),t.TgZ(8,"button",4),t._uU(9,"New Purchase"),t.qZA()()(),t.TgZ(10,"nz-row",5)(11,"nz-col",6)(12,"nz-card",7)(13,"nz-tabset",8),t.YNc(14,re,83,14,"nz-tab",9),t.qZA()()()(),t.YNc(15,ae,2,1,"ng-template",null,10,t.W1O),t.TgZ(17,"div",11)(18,"app-export-popup",12,13),t.NdJ("valueChange",function(a){return n.exportToExcel(a)}),t.qZA()()),2&e){const o=t.MAs(16);t.xp6(13),t.Q6J("nzTabBarExtraContent",o),t.xp6(1),t.Q6J("ngForOf",n.tabs)}},dependencies:[f.sg,f.O5,_.rH,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,q.Zp,q.gB,F.ix,j.w,J.dQ,st.xH,st.xw,R.wO,R.r9,z.cm,z.RR,z.wA,lt.uw,lt.wS,h.N8,h.Uo,h._C,h.Om,h.p0,h.$Z,Z.t3,Z.SK,L.bd,Jt,f.uU,rt],styles:[".page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:30px 0 15px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]{display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;margin-left:25px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   .create_btn[_ngcontent-%COMP%]{background:#1b75bb;color:#fff;border:1px solid #1b75bb;padding:10px 20px;transition:.3s;border-radius:3px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   .create_btn[_ngcontent-%COMP%]:hover{background:#8bc53f;border:1px solid #8bc53f}.mb40[_ngcontent-%COMP%]{margin-bottom:30px!important}.table_filter[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.table_filter[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], .table_filter[_ngcontent-%COMP%]   .filter_btn[_ngcontent-%COMP%]{width:100%}.date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #ddd}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.entry_query_filter[_ngcontent-%COMP%]{margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.invoice_status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10px}nz-select[_ngcontent-%COMP%]{width:100%}.purchase_info[_ngcontent-%COMP%]{width:100%}.purchase_info[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:40px}.purchase_product[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;border:none;background:transparent;border-bottom:1px solid #ddd;text-align:center}.add_product[_ngcontent-%COMP%], .order_summery[_ngcontent-%COMP%]{padding:15px 0 0}.add_product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%}.order_summery[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{margin:5px 0}.order_summery[_ngcontent-%COMP%]   nz-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;color:#585858}.order_summery[_ngcontent-%COMP%]   nz-list-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;font-size:16px;text-align:right}.search_items[_ngcontent-%COMP%]{margin:0;padding:0}.search_items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;list-style:none;display:flex;align-items:flex-start;justify-content:space-between}.search_items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.search_items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .left_details[_ngcontent-%COMP%]{margin-left:10px}.search_items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .left_details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px}.search_items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .left_details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase}@media (max-width: 768px){.add_product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-filter-area[_ngcontent-%COMP%]{flex-direction:column}.table-filter-area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:10px 0 0}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px}}.main_create_invoice[_ngcontent-%COMP%]{background-color:#fff;position:fixed;height:100vh;overflow-y:auto;top:0;left:0;z-index:1500!important;align-items:center;justify-content:center;padding:80px 20px 30px;box-sizing:border-box;width:100%;overflow-x:hidden}"]}),i})()},{path:"create",component:U},{path:"details/:id",component:Nt},{path:"edit/:id",component:U}];let le=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[_.Bz.forChild(se),_.Bz]}),i})();var ce=l(19966),de=l(90898),ue=l(24586);let pe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.ez,le,de.q,r.u5,C.P,ce.JX,ue.D]}),i})()},68132:(dt,k,l)=>{l.d(k,{p:()=>D});var C=l(40520),f=l(92340),_=l(5e3);const p=f.N.apiBaseLink+"/api/order/";let D=(()=>{class x{constructor(r){this.httpClient=r}editOrder(r){return this.httpClient.post(p+"edit-order",r)}placeOrder(r){return this.httpClient.post(p+"place-order",r)}updateOrder(r){return this.httpClient.post(p+"update-order",r)}placeOrderRequest(r){return this.httpClient.post(p+"place-order-request",r)}placeTempOrder(r){return this.httpClient.post(p+"place-temp-order",r)}updateOrderSessionKey(r,u){return this.httpClient.post(p+"update-session-key/"+r+"/"+u,{})}getAllOrdersByUser(r,u,d,t){let P=new C.LE;return P=P.append("q",r),P=P.append("status",t),u&&(P=P.append("pageSize",u.pageSize),P=P.append("currentPage",u.currentPage)),this.httpClient.get(p+"get-all-orders-by-user",{params:P})}getAllOrdersByUserId(r){return this.httpClient.get(p+"get-all-orders-by-userId/"+r)}getAllCanceledOrdersByUser(r,u,d){return this.httpClient.get(p+"get-all-canceled-orders-by-user")}getAllOrdersByUserOrderId(r,u){let d=new C.LE;return r&&(console.log("param id ",r),d=d.append("id",r)),u&&(d=d.append("select",u)),this.httpClient.get(p+"get-orders-by-user-orderId",{params:d})}getAllOrdersofyUserByAdmin(r,u,d){let t=new C.LE;return d&&(t=t.append("userId",d)),r?(t=t.append("pageSize",r.pageSize),t=t.append("page",r.currentPage),u&&(t=t.append("select",u)),this.httpClient.get(p+"get-all-orders-of-user-by-admin",{params:t})):(u&&(t=t.append("select",u)),this.httpClient.get(p+"get-all-orders-of-user-by-admin",{params:t}))}getOrderDetails(r){return this.httpClient.get(p+"get-order-details/"+r)}getOrderDetailsByOrderId(r){return this.httpClient.get(p+"get-order-details-by-orderId/"+r)}getrequestOrderDetails(r){return this.httpClient.get(p+"get-request-order-details/"+r)}cancelOrderByUser(r){return this.httpClient.put(p+"cancel-order-by-user/"+r,{})}deleteOrderByAdmin(r){return this.httpClient.delete(p+"delete-order-by-admin/"+r)}getAllTransactionByUser(r,u){let d=new C.LE;return r?(d=d.append("pageSize",r.pageSize),d=d.append("page",r.currentPage),u&&(d=d.append("select",u)),this.httpClient.get(p+"get-all-transactions-by-user",{params:d})):(u&&(d=d.append("select",u)),this.httpClient.get(p+"get-all-transactions-by-user",{params:d}))}getAllOrdersByAdmin(r,u,d,t){return this.httpClient.post(p+"get-all-orders-by-admin",{paginate:r,sort:u,filter:d,select:t})}getOrdersBySearch(r,u,d){let t=new C.LE;return t=t.append("q",r),u&&(t=t.append("pageSize",u.pageSize),t=t.append("currentPage",u.currentPage)),this.httpClient.post(p+"get-order-by-search",{filter:d},{params:t})}getSelectedOrderDetails(r){return this.httpClient.post(p+"get-selected-order-details",{selectedIds:r})}getAllOrdersBySku(r){return this.httpClient.get(p+"get-all-orders-by-sku/"+r)}changeOrderStatus(r){return this.httpClient.put(p+"change-order-status",r)}getAllTransactionByAdmin(r,u){let d=new C.LE;return r?(d=d.append("pageSize",r.pageSize),d=d.append("page",r.currentPage),u&&(d=d.append("select",u)),this.httpClient.get(p+"get-all-transaction-by-admin",{params:d})):(u&&(d=d.append("select",u)),this.httpClient.get(p+"get-all-transaction-by-admin",{params:d}))}testSslSmsApi(){return this.httpClient.get(p+"sent-test-ssl-message")}updateOrderById(r){return this.httpClient.put(p+"update-order-by-id",r)}updateMultipleOrderById(r){return this.httpClient.post(p+"update-multiple-order-by-id",r)}updateRequestOrderById(r){return this.httpClient.put(p+"update-request-order-by-id",r)}payPayment(r){return this.httpClient.post(p+"pay-payment",r)}sendNotification(r){return this.httpClient.post(p+"confirm-notification",r)}addToOrderTimeline(r,u){return this.httpClient.post(p+"add-to-order-timeline",{data:r,orderId:u})}updateTag(r,u){return this.httpClient.post(p+"update-tag",{orderId:r,tag:u})}updateDeliveryAddress(r,u){return this.httpClient.post(p+"update-delivery-address",{orderId:r,address:u})}setFilterVariable(r){this.filterVariable=r}getFilterVariable(){let r=this.filterVariable;return this.clearFilterVariable(),r}clearFilterVariable(){this.filterVariable=void 0}}return x.\u0275fac=function(r){return new(r||x)(_.LFG(C.eN))},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()}}]);