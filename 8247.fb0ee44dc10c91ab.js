"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[8247],{48247:(Fe,b,s)=>{s.r(b),s.d(b,{RegularOrdersModule:()=>Ie});var g=s(50939),A=s(90898),f=s(69808),k=s(94813),Z=s(78372),F=s(71884),z=s(63900),w=s(60515),u=s(93075),h=s(12943),m=s(80574),d=s(31913),p=s(4602),U=s(22863),c=(()=>{return(n=c||(c={})).COD="COD",n.ADVANCE="ADVANCE",n.PAID="PAID",n.UNPAID="UNPAID",n.PENDING="PENDING",n.PARTIAL_SHIPPING="PARTIAL_SHIPPING",n.REFUNDED="REFUNDED",n.SHIPPING="SHIPPING",n.CANCEL="CANCEL",n.CONFIRM="CONFIRM",n.HIGHTOLOW="HIGHTOLOW",n.LOWTOHIGH="LOWTOHIGH",n.OLDESTFIRST="OLDESTFIRST",n.NEWESTFIRST="NEWESTFIRST",n.ZTOA="ZTOA",n.ATOZ="ATOZ",n.AMOUNTHIGHTOLOW="AMOUNTHIGHTOLOW",n.AMOUNTLOWTOHIGH="AMOUNTLOWTOHIGH",c;var n})(),H=s(37623),e=s(5e3),x=s(68132),D=s(57267),P=s(99826),q=s(50072),E=s(48966),L=s(49727),J=s(61293),G=s(71188),Q=s(56719),$=s(85314),V=s(11047),Y=s(76042),j=s(82683),W=s(92643),M=s(90868),C=s(64219),O=s(63677),S=s(92905),B=s(24401),R=s(34147),K=s(77484),X=s(83610),I=s(79814);function ee(n,o){if(1&n&&(e.TgZ(0,"mat-radio-button",14),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(null==t?null:t.viewValue)}}function te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),e._uU(5,"Export Orders"),e.qZA()(),e.TgZ(6,"div")(7,"span",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportPOpUpHide())}),e._UZ(8,"i",5),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"h3"),e._uU(12,"Export"),e.qZA(),e.TgZ(13,"mat-radio-group",8),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedAmount=a)}),e.YNc(14,ee,2,2,"mat-radio-button",9),e.qZA()(),e.TgZ(15,"div",7)(16,"h3"),e._uU(17,"Export as"),e.qZA(),e.TgZ(18,"mat-radio-group",8),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedType=a)}),e.TgZ(19,"mat-radio-button",10),e._uU(20,"CSV for Exchel, Numbers, or other spreadsheet programs"),e.qZA(),e.TgZ(21,"mat-radio-button",11),e._uU(22,"Plain CSV file"),e.qZA()()()(),e.TgZ(23,"div",12)(24,"ul")(25,"li")(26,"button",4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportPOpUpHide())}),e._uU(27,"Cancel "),e.qZA()(),e.TgZ(28,"li")(29,"button"),e._uU(30,"Export transaction histories"),e.qZA()(),e.TgZ(31,"li")(32,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onExport())}),e._uU(33,"Export Orders"),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(13),e.Q6J("ngModel",t.selectedAmount),e.xp6(1),e.Q6J("ngForOf",t.exportTypes),e.xp6(4),e.Q6J("ngModel",t.selectedType)}}let re=(()=>{class n{constructor(t,r){this.utilsService=t,this.orderService=r,this.export=!1,this.valueChange=new e.vpe,this.exportTypes=[{value:h.t.CURRENT_PAGE,viewValue:"Current Page"},{value:h.t.ALL_ORDERS,viewValue:"All Orders"},{value:h.t.SELECTED,viewValue:"Selected Data : "},{value:h.t.BY_SEARCH_RESULT,viewValue:"Results matching your search"},{value:h.t.BY_DATE,viewValue:"By Date"}]}ngOnInit(){}getAllOrders(){this.orderService.getAllOrdersByAdmin().subscribe(t=>{this.orders=t.data})}exportPOpUpHide(){this.export=!1}exportPOpUpShow(){this.export=!0}exportToExcel(){const t=this.utilsService.getDateString(new Date),r=m.P6.json_to_sheet(this.orders),a=m.P6.book_new();m.P6.book_append_sheet(a,r,"products"),m.NC(a,`Products_${t}.xlsx`)}onExport(){this.valueChange.emit({selectedAmount:this.selectedAmount,SelectedType:this.selectedType})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D.F),e.Y36(x.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-export-popup"]],outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[["class","export-order-area",4,"ngIf"],[1,"export-order-area"],[1,"export-order-main"],[1,"export-order-header"],[3,"click"],[1,"fa-solid","fa-xmark"],[1,"export-order-body"],[1,"export"],[3,"ngModel","ngModelChange"],["class","radio-box",3,"value",4,"ngFor","ngForOf"],["value","1",1,"radio-box"],["value","2",1,"radio-box"],[1,"export-footer-area"],[1,"export-btn-active",3,"click"],[1,"radio-box",3,"value"]],template:function(t,r){1&t&&e.YNc(0,te,34,3,"div",0),2&t&&e.Q6J("ngIf",!0===r.export)},dependencies:[f.sg,f.O5,I.VQ,I.U0,u.JJ,u.On],styles:[".export-order-area[_ngcontent-%COMP%]{background-color:#0000004d;position:fixed;height:100vh;overflow-y:auto;top:0;left:0;z-index:1500!important;display:flex;align-items:center;justify-content:center;padding:80px 20px 30px;box-sizing:border-box;width:100%;overflow-x:hidden}.export-order-main[_ngcontent-%COMP%]{display:block;max-width:600px;width:100%;margin:auto;background-color:#fff;border-radius:15px;border:1px solid #0058ff;box-shadow:0 5px 10px #0000004d}.export-order-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;width:100%;padding:20px;box-sizing:border-box;border-bottom:1px solid #eaebed}.export-order-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5b5d5d;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:18px;line-height:25px;font-weight:500}.export-order-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding:4px;box-sizing:border-box;color:#5b5d5d;font-family:Roboto,sans-serif;font-size:18px}.export-order-body[_ngcontent-%COMP%]{display:block;padding:20px 15px;box-sizing:border-box}.fa-xmark[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}.export[_ngcontent-%COMP%]{display:block;margin-bottom:20px}.export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#5b5d5d;font-family:Roboto,sans-serif;font-style:normal;display:block;font-size:19px;line-height:25px;font-weight:500;margin-bottom:20px!important}.export[_ngcontent-%COMP%]   .radio-box[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:15px;color:#5b5d5d;font-family:Roboto,sans-serif;font-weight:400;font-size:16px;font-style:normal}.export[_ngcontent-%COMP%]   .radio-box[_ngcontent-%COMP%]:last-child{margin:0}.export-footer-area[_ngcontent-%COMP%]{display:block;padding:20px;box-sizing:border-box;border-top:1px solid #eaebed}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;text-align:right}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;margin-bottom:15px}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#5b5d5d;font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:15px;display:block;background-color:#fff;outline:none;border:1px solid #eaebed;padding:6px 10px;box-sizing:border-box;border-radius:4px;transition:all .3s linear}.export-footer-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0058ff;border-color:#0058ff;color:#fff}.export-btn-active[_ngcontent-%COMP%]{background-color:#0058ff!important;border-color:#0058ff!important;color:#fff!important}  .radio-box.mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#0058ff}  .radio-box.mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#0058ff}"]}),n})();var ae=s(73433);const ne=["export"],ie=["searchForm"],se=["searchInput"],oe=["matCheckbox"];function le(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"nz-tab",56),e.NdJ("nzClick",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.filterByPaymentStatus(i))}),e.qZA()}2&n&&e.Q6J("nzTitle",o.$implicit)}function de(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",23),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.bulkAddCustomTag(i))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.tagname," ")}}function ce(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",23),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.filterByOrderStatus(i))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.viewValue," ")}}function ue(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearDateFilter())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.dateRangeFilter?t.dateRangeFilter:t.dateRangeCalFilter," ")}}function he(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearcustomTagFilter())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.customTagFilter," ")}}function ge(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearStatusFilter())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.statusFilter," ")}}function me(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearPaymentTypeFilter())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.paymentTypeFilter," ")}}function pe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"i",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearSort())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.sortFilter," ")}}function _e(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearAllFilters())}),e._uU(1," Clear All "),e.qZA()}}function fe(n,o){if(1&n&&e._UZ(0,"i",63),2&n){const t=e.oxw().$implicit;e.Q6J("nzPopoverContent",t.orderNotes?t.orderNotes:"No Notes")}}function Pe(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Note"),e.qZA())}const Ce=function(n){return["/admin/customer",n]};function Oe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",58),e.NdJ("nzCheckedChange",function(a){const l=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.onItemChecked(l._id,a))}),e.qZA(),e.TgZ(2,"td")(3,"h4")(4,"a",2),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onOrderDetailsChanged(l.event,i._id))}),e._uU(5),e.qZA()(),e.TgZ(6,"h5"),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.TgZ(9,"td",59),e._UZ(10,"spam"),e.TgZ(11,"nz-badge",60),e._uU(12),e.ALo(13,"orderStatus"),e.qZA()(),e.TgZ(14,"td")(15,"a",61),e._uU(16),e.qZA()(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e.YNc(22,fe,1,1,"i",62),e.YNc(23,Pe,2,0,"span",42),e.qZA()()}if(2&n){const t=o.$implicit,r=e.oxw();e.xp6(1),e.Q6J("nzChecked",r.setOfCheckedId.has(t._id)),e.xp6(4),e.hij(" ",t.orderId," "),e.xp6(2),e.Oqu(e.xi3(8,11,t.checkoutDate,"dd/MM/yyyy")),e.xp6(4),e.Q6J("nzStatus",r.getInvoiceStatusIcon(t)),e.xp6(1),e.hij("",e.lcZ(13,14,r.getInvoiceStatus(t))," "),e.xp6(3),e.Q6J("routerLink",e.VKq(16,Ce,null==t||null==t.userId?null:t.userId._id)),e.xp6(1),e.hij(" ",null!=t&&null!=t.userId&&t.userId.fullName?null==t||null==t.userId?null:t.userId.fullName:null==t||null==t.userId?null:t.userId.phoneNo," "),e.xp6(2),e.Oqu(t.totalAmount),e.xp6(2),e.Oqu(t.advanceTotal),e.xp6(2),e.Q6J("ngIf",t.orderNotes),e.xp6(1),e.Q6J("ngIf",!t.orderNotes)}}function Te(n,o){if(1&n&&(e.TgZ(0,"a",64),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Total : ",t.totalNumbers,"")}}function ye(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",23),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.filterByCustomTag(i))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.tagname," ")}}function ve(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"ul",65)(2,"li",30)(3,"ul"),e.YNc(4,ye,2,1,"li",32),e.qZA()()(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.customTags)}}const be=function(){return{boxShadow:"none"}},Ae=function(){return{padding:0}};let N=(()=>{class n{constructor(t,r,a,i,l,_,T,y,v,Ne,ke){this.orderService=t,this.utilsService=r,this.activatedRoute=a,this.router=i,this.spinner=l,this.dialog=_,this.msg=T,this.reloadService=y,this.storageService=v,this.customTagService=Ne,this.uiService=ke,this.tabs=["All Order","Unpaid","Partial Paid","Paid"],this.productOrderStatus=[{value:d.i.PENDING,viewValue:"Pending"},{value:d.i.CANCEL,viewValue:"Cancel"},{value:d.i.CONFIRM,viewValue:"Confirm"},{value:d.i.PARTIAL_SHIPPING,viewValue:"Partial Shipping"},{value:d.i.SHIPPING,viewValue:"Shipping"}],this.moreAction=!1,this.filterDate=new Date,this.checked=!1,this.indeterminate=!1,this.listOfCurrentPageData=[],this.listOfData=[],this.filterList=[],this.sortList=[],this.setOfCheckedId=new Set,this.today=new Date,this.dataFormDateRange=new u.cw({start:new u.NI,end:new u.NI}),this.sortQuery={createdAt:-1},this.activeSort=null,this.overlay=!1,this.isOpen=!1,this.isFocused=!1,this.isLoading=!1,this.isSelect=!1,this.query=null,this.status=0,this.searchOrders=[],this.ordersPerPage=50,this.currentPage=1,this.totalNumbers=0,this.totalOrdersStore=0,this.loading=!1,this.paymentOrderStatus=[{value:p.b.PAID,viewValue:"Paid"},{value:p.b.UNPAID,viewValue:"Unpaid"},{value:p.b.PENDING,viewValue:"Pending"},{value:p.b.PARTIALPAID,viewValue:"Partial Paid"},{value:p.b.REFUNDED,viewValue:"Refunded"},{value:p.b.OVERDUE,viewValue:"Overdue"},{value:p.b.CANCEL,viewValue:"Cancel"},{value:p.b.EXPIRED,viewValue:"Expired"}],this.selectedIds=[],this.spin=!1,this.clearAllFilter=!1,this.filterArr=[],this.customTags=[],this.disabledDate=Ze=>(0,H.Z)(Ze,this.today)>0}ngOnInit(){this.subAcRoute=this.activatedRoute.queryParams.subscribe(t=>{console.log("QeryParams",t),t&&t.page?(this.currentPage=t.page,this.advancedTypeParam=t.advancedTypeParam,this.orderStatusParam=t.orderStatusParam,this.sortQueryParam=t.sortQueryParam,this.customTagParam=t.customTagParam,this.customTagNameParam=t.customTagNameParam,this.startDateParam=t.startDateParam,this.endDateParam=t.endDateParam,this.dateRangeParam=t.dateRangeParam,this.filterSortCheck()):this.currentPage=1}),this.queryParamsVar={page:1,customTagParam:this.customTagParam,customTagNameParam:this.customTagFilter,advancedTypeParam:this.advancedTypeParam,orderStatusParam:this.orderStatusParam,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},this.orderStatusParam&&this.filterFromOrderStatusParam(this.orderStatusParam),this.advancedTypeParam&&(this.paymentTypeFilter=this.advancedTypeParam),this.sortQueryParam&&this.filterFromSortQueryParam(this.sortQueryParam),this.customTagParam&&this.customTagNameParam&&this.filterFromcCustomTagParam(this.customTagParam,this.customTagNameParam),this.startDateParam&&this.dateRangeParam&&this.onDateChange(this.startDateParam,this.endDateParam,!0,this.dateRangeParam),this.startDateParam&&this.endDateParam&&this.dateRangeParam&&this.onDateChange(this.startDateParam,this.endDateParam,!0,this.dateRangeParam),this.startDateParam&&null!==this.endDateParam&&(this.filter=Object.assign(Object.assign({},this.filter),{checkoutDate:{$gte:this.startDateParam,$lt:new Date}})),this.reloadService.refreshOrder$.subscribe(()=>{this.getAllOrders()}),this.getAllOrders(),this.getAllCustomTags()}filterFromOrderStatusParam(t){switch(t){case"PAID":this.statusFilter=this.paymentOrderStatus[0].viewValue;break;case"UNPAID":this.statusFilter=this.paymentOrderStatus[1].viewValue;break;case"PENDING":this.statusFilter=this.paymentOrderStatus[2].viewValue;break;case"PARTIAL_SHIPPING":this.statusFilter="Partial Shipping";break;case"REFUNDED":this.statusFilter=this.paymentOrderStatus[4].viewValue;break;case"SHIPPING":this.statusFilter="Shipping";break;case"CANCEL":this.statusFilter=this.paymentOrderStatus[6].viewValue;break;case"CONFIRM":this.statusFilter="Confirm";break;default:this.statusFilter=null}}filterFromSortQueryParam(t){switch(t){case"HIGHTOLOW":this.sortFilter="Order Number(High to low)";break;case"LOWTOHIGH":this.sortFilter="Order Number(Low to High)";break;case"OLDESTFIRST":this.sortFilter="Created (oldest first)";break;case"NEWESTFIRST":this.sortFilter="Created (newest first)";break;case"ATOZ":this.sortFilter="Customer Name (A-Z)";break;case"ZTOA":this.sortFilter="Customer Name (Z-A)";break;case"AMOUNTHIGHTOLOW":this.sortFilter="Amount(High to low)";break;case"AMOUNTLOWTOHIGH":this.sortFilter="Amount (Low to High)";break;default:this.sortFilter=null}}filterFromcCustomTagParam(t,r){this.customTagFilter=r}filterSortCheck(){if(this.sortQueryParam){let r;switch(this.sortQueryParam){case"HIGHTOLOW":r={orderId:-1};break;case"LOWTOHIGH":r={orderId:1};break;case"OLDESTFIRST":r={createdAt:1};break;case"NEWESTFIRST":r={createdAt:-1};break;case"ATOZ":r={fullName:-1};break;case"ZTOA":r={fullName:1};break;case"AMOUNTHIGHTOLOW":r={totalAmount:-1};break;case"AMOUNTLOWTOHIGH":r={totalAmount:1};break;default:this.sortQuery=null}this.sortQuery=r}if(this.customTagParam&&(this.filter=Object.assign(Object.assign({},this.filter),{customTag:this.customTagParam})),this.advancedTypeParam)switch(this.advancedTypeParam){case"COD":this.filter=Object.assign(Object.assign({},this.filter),{advanceTotal:0});break;case"Advance":this.filter=Object.assign(Object.assign({},this.filter),{advanceTotal:{$gt:0}});break;default:this.filter=null}let t;if(this.orderStatusParam){switch(this.orderStatusParam){case"PENDING":t=0;break;case"PARTIAL_SHIPPING":t=3;break;case"SHIPPING":t=4;break;case"CANCEL":t=1;break;case"CONFIRM":t=2;break;default:t=null}this.statusFilterQuery={orderedItems:{$all:[{$elemMatch:{deliveryStatus:t}}]}},this.filter=Object.assign(Object.assign({},this.filter),this.statusFilterQuery),this.getAllOrders()}}filterByAdvanceType(t){switch(this.router.navigate([],{queryParams:this.queryParamsVar}),t){case"COD":this.filter=Object.assign(Object.assign({},this.filter),{advanceTotal:0}),this.advancedTypeParam=c.COD,this.reloadService.needRefreshOrder$();break;case"Advance":this.filter=Object.assign(Object.assign({},this.filter),{advanceTotal:{$gt:0}}),this.advancedTypeParam=c.ADVANCE,this.reloadService.needRefreshOrder$();break;default:this.filter=null}this.paymentTypeFilter=t,this.reloadService.needRefreshOrder$()}filterByOrderStatus(t){switch(this.router.navigate([],{queryParams:this.queryParamsVar}),t.viewValue){case"Paid":this.orderStatusParam=c.PAID;break;case"Unpaid":this.orderStatusParam=c.UNPAID;break;case"Pending":this.orderStatusParam=c.PENDING;break;case"Partial Shipping":this.orderStatusParam=c.PARTIAL_SHIPPING;break;case"Refunded":this.orderStatusParam=c.REFUNDED;break;case"Shipping":this.orderStatusParam=c.SHIPPING;break;case"Cancel":this.orderStatusParam=c.CANCEL;break;case"Confirm":this.orderStatusParam=c.CONFIRM;break;default:this.orderStatusParam=null}this.statusFilter=this.orderStatusParam?this.orderStatusParam:t.viewValue,this.statusFilter=t.viewValue,this.statusFilterQuery={orderedItems:{$all:[{$elemMatch:{deliveryStatus:t.value}}]}},this.filter=Object.assign(Object.assign({},this.filter),this.statusFilterQuery),this.reloadService.needRefreshOrder$()}todayFilter(){this.dateRangeCalFilter=null,this.dateRangeFilter="Today",this.dateRangeParam="Today",this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.startDateParam=this.startDate,this.filter=Object.assign(Object.assign({},this.filter),{checkoutDate:{$gte:this.startDate,$lt:this.today}}),this.reloadService.needRefreshOrder$()}yesterdayFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,0,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-1,23,59,59,999),this.dateRangeParam="Yesterday",this.onDateChange(this.startDate,this.endDate,!0,"Yesterday"),this.reloadService.needRefreshOrder$()}lastWeekFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-7,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 7 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 7 days"),this.reloadService.needRefreshOrder$()}lastThirtyDaysFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-30,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 30 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 30 days"),this.reloadService.needRefreshOrder$()}lastThreeMonthFilter(){this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()-90,0,0,0,0),this.endDate=this.today,this.dateRangeParam="Last 90 days",this.onDateChange(this.startDate,this.endDate,!0,"Last 90 days"),this.reloadService.needRefreshOrder$()}lastMonthFilter(){const t=new Date(this.today.getFullYear(),this.today.getMonth()-1,1),r=new Date(this.today.getFullYear(),this.today.getMonth(),0,23,59,59,999);this.startDate=t,this.endDate=r,this.dateRangeParam="Last month",this.onDateChange(this.startDate,this.endDate,!0,"Last month"),this.reloadService.needRefreshOrder$()}lastYearFilter(){const t=new Date((new Date).getFullYear()-1,0,1),r=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),11,31,23,59,59,999);this.startDate=r,this.endDate=a,this.dateRangeParam="Last Year",this.onDateChange(this.startDate,this.endDate,!0,"Last Year"),this.reloadService.needRefreshOrder$()}weekToDateFilter(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-(6==this.startDate.getDay()?7:(this.startDate.getDay()+1)%7)),this.startDate.setHours(0,0,0,0),this.endDate=this.today,this.dateRangeParam="Week to date",this.onDateChange(this.startDate,this.endDate,!0,"Week to date"),this.reloadService.needRefreshOrder$()}monthToDateFilter(){this.startDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Month to date"),this.reloadService.needRefreshOrder$()}yearToDateFilter(){this.startDate=new Date((new Date).getFullYear(),0,1,0,0,0,0),this.endDate=this.today,this.onDateChange(this.startDate,this.endDate,!0,"Year to date"),this.reloadService.needRefreshOrder$()}filterByCustomTag(t){this.router.navigate([],{queryParams:this.queryParamsVar}),this.customTagFilter=t.tagname,this.customTagParam=t._id,this.filter=Object.assign(Object.assign({},this.filter),{customTag:t._id}),this.reloadService.needRefreshOrder$()}filterByPaymentStatus(t){switch(this.router.navigate([],{queryParams:this.queryParamsVar}),t){case"All Order":this.filter=null,this.reloadService.needRefreshOrder$();break;case"Partial Paid":this.filter={$and:[{$expr:{$lt:["$paidAmount","$totalAmount"]}},{paidAmount:{$gt:0}}]},this.reloadService.needRefreshOrder$();break;case"Paid":this.filter={$expr:{$gte:["$paidAmount","$totalAmount"]}},this.reloadService.needRefreshOrder$();break;case"Unpaid":this.filter={paidAmount:{$lte:0}},this.reloadService.needRefreshOrder$();break;default:this.filter=null}}endChangeRegDateRange(t){if(t.value){const r=this.utilsService.getDateString(this.dataFormDateRange.value.start),a=this.utilsService.getDateString(this.dataFormDateRange.value.end);this.filter={createdAt:{$gte:r,$lte:a}},this.currentPage>1||this.reloadService.needRefreshOrder$()}}sortData(t,r,a){switch(this.router.navigate([],{queryParams:this.queryParamsVar}),a){case"Order Number(High to low)":this.queryArr=c.HIGHTOLOW;break;case"Order Number(Low to High)":this.queryArr=c.LOWTOHIGH;break;case"Created (oldest first)":this.queryArr=c.OLDESTFIRST;break;case"Created (newest first)":this.queryArr=c.NEWESTFIRST;break;case"Customer Name (A-Z)":this.queryArr=c.ATOZ;break;case"Customer Name (Z-A)":this.queryArr=c.ZTOA;break;case"Amount(High to low)":this.queryArr=c.AMOUNTHIGHTOLOW;break;case"Amount (Low to High)":this.queryArr=c.AMOUNTLOWTOHIGH;break;default:this.queryArr=null}this.sortFilter=a,this.sortQueryParam=this.queryArr,this.clearAllFilter=!0,this.sortQuery=t,this.activeSort=r,this.getAllOrders()}clearStatusFilter(){this.statusFilter=null,delete this.filter.orderedItems,this.statusFilterQuery=null,delete this.queryParamsVar.orderStatusParam,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshOrder$()}clearPaymentTypeFilter(){var t;this.paymentTypeFilter=null,null===(t=this.filter)||void 0===t||delete t.advanceTotal,delete this.queryParamsVar.advancedTypeParam,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshOrder$()}clearcustomTagFilter(){var t;null===(t=this.filter)||void 0===t||delete t.customTag,this.customTagFilter=null,delete this.queryParamsVar.customTagParam,delete this.queryParamsVar.customTagNameParam,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshOrder$()}clearDateFilter(){this.dateRangeFilter=null,this.dateRangeCalFilter=null,delete this.filter.checkoutDate,this.queryParamsVar.startDateParam&&delete this.queryParamsVar.startDateParam,this.queryParamsVar.endDateParam&&delete this.queryParamsVar.endDateParam,this.queryParamsVar.dateRangeParam&&delete this.queryParamsVar.dateRangeParam,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshOrder$()}clearSort(t){this.sortFilter=null,this.sortQuery=null,this.clearAllFilter=!1,this.queryParamsVar.sortQueryParam&&delete this.queryParamsVar.sortQueryParam,this.router.navigate([],{queryParams:this.queryParamsVar}),this.reloadService.needRefreshOrder$()}getAllOrders(){this.loading=!0;const t={pageSize:this.ordersPerPage.toString(),currentPage:this.currentPage.toString()};this.orderService.getAllOrdersByAdmin(t,this.sortQuery,this.filter).subscribe(r=>{this.orders=r.data,this.totalNumbers=r.count,this.listOfData=this.orders,this.loading=!1},r=>{this.msg.create("error",r.message),this.loading=!1})}getAllCustomTags(){this.customTagService.getAllTags().subscribe(t=>{this.customTags=t.data},t=>{console.log(t.message)})}ngAfterViewInit(){this.searchForm.valueChanges.pipe((0,k.j)("searchTerm"),(0,Z.b)(200),(0,F.x)(),(0,z.w)(r=>(console.log(r),this.query=r.trim(),""===this.query||null===this.query?(this.overlay=!1,this.searchOrders=[],this.query=null,this.getAllOrders(),w.E):(this.loading=!0,this.orderService.getOrdersBySearch(r,{currentPage:"1",pageSize:"50"},this.filter))))).subscribe(r=>{this.loading=!1,this.orders=r.data,this.searchOrders=r.data,this.searchOrders.length>0&&(this.isOpen=!0,this.overlay=!0)},()=>{this.loading=!1})}openDialog(){this.dialog.open(U.J)}onRefresh(){this.spin=!0,this.products=[],this.setOfCheckedId.clear(),this.dateRangeFilter=null,this.dateRangeCalFilter=null,this.customTagFilter=null,this.statusFilter=null,this.clearAllFilter=null,this.paymentTypeFilter=null,this.filter=null,this.sortQuery=null,this.reloadService.needRefreshOrder$(),this.getAllOrders()}onOrderDetailsChanged(t,r){this.router.navigate(["/admin/order-details",r],{queryParams:{customTagParam:this.customTagParam,customTagNameParam:this.customTagFilter,advancedTypeParam:this.advancedTypeParam,orderStatusParam:this.orderStatusParam,sortQueryParam:this.sortQueryParam,startDateParam:this.startDateParam,endDateParam:this.endDateParam,dateRangeParam:this.dateRangeParam},queryParamsHandling:"merge"})}exportPopUpShow(){this.exportOrder.exportPOpUpShow()}handleFocus(t){this.searchInput.nativeElement.focus(),!this.isFocused&&(this.searchOrders.length>0&&this.setPanelState(t),this.isFocused=!0)}setPanelState(t){t&&t.stopPropagation(),this.isOpen=!1,this.handleOpen()}handleOpen(){this.isOpen||this.isOpen&&!this.isLoading||this.searchOrders.length>0&&(this.isOpen=!0,this.overlay=!0)}exportToExcel(t){t.selectedAmount===h.t.ALL_ORDERS?this.orderService.getAllOrdersByAdmin().subscribe(r=>{this.exportData(r.data,t.SelectedType)},r=>{console.log(r)}):t.selectedAmount===h.t.CURRENT_PAGE?this.exportData(this.orders,t.SelectedType):t.selectedAmount===h.t.SELECTED?this.orderService.getSelectedOrderDetails(this.selectedIds).subscribe(r=>{this.exportData(r.data,t.SelectedType)}):t.selectedAmount===h.t.BY_SEARCH_RESULT&&this.exportData(this.orders,t.SelectedType)}exportData(t,r){this.spinner.show();const a=this.utilsService.getDateString(new Date),i=m.P6.json_to_sheet(t),l=m.P6.book_new();m.P6.book_append_sheet(l,i,"orders"),m.NC(l,"2"===r?`Orders_${a}.csv`:`Orders_${a}.xlsx`),this.spinner.hide()}bulkAddCustomTag(t){let r=[];this.setOfCheckedId.forEach(a=>{r.push({_id:a,customTag:t._id})}),r.length?this.orderService.updateMultipleOrderById(r).subscribe(a=>{this.uiService.success(a.message),this.getAllOrders()}):this.uiService.wrong("Please Select some order!"),this.reloadService.needRefreshOrder$()}onCheckChange(t,r,a){if(t)this.selectedIds.push(a);else{const i=this.selectedIds.findIndex(l=>l===a);this.selectedIds.splice(i,1)}}onAllSelectChange(t){const r=this.orders.map(a=>a._id);t.checked?(this.selectedIds=this.utilsService.mergeArrayString(this.selectedIds,r),this.orders.forEach(a=>{a.select=!0})):r.forEach(a=>{this.orders.find(l=>l._id===a).select=!1;const i=this.selectedIds.findIndex(l=>l===a);this.selectedIds.splice(i,1)})}updateCheckedSet(t,r){r?this.setOfCheckedId.add(t):this.setOfCheckedId.delete(t)}onItemChecked(t,r){this.updateCheckedSet(t,r),this.refreshCheckedStatus()}onAllChecked(t){this.orders.forEach(r=>{this.updateCheckedSet(r._id,t)}),this.refreshCheckedStatus()}onPageChanged(t){this.router.navigate([],{queryParams:{page:t.pageIndex}}),this.reloadService.needRefreshOrder$()}refreshCheckedStatus(){this.checked=this.listOfCurrentPageData.every(t=>this.setOfCheckedId.has(t.id)),this.indeterminate=this.listOfCurrentPageData.some(t=>this.setOfCheckedId.has(t.id))&&!this.checked}openMore(){this.moreAction=!0}closeMore(){this.moreAction=!1}clearAllFilters(){this.queryParamsVar.startDateParam&&delete this.queryParamsVar.startDateParam,this.queryParamsVar.endDateParam&&delete this.queryParamsVar.endDateParam,this.queryParamsVar.dateRangeParam&&delete this.queryParamsVar.dateRangeParam,this.sortQuery=null,this.filter=null,this.dateRangeFilter=null,this.dateRangeCalFilter&&(this.dateRangeCalFilter=null),this.customTagFilter=null,this.statusFilter=null,this.paymentTypeFilter=null,this.clearAllFilter=!1,this.reloadService.needRefreshOrder$()}onDateChange(t,r,a,i){const l=this.utilsService.getDateString(t,"DD MMM-YYYY"),_=this.utilsService.getDateString(r,"DD MMM-YYYY");console.log("todayBool",a),!0===a?(this.dateRangeCalFilter=null,this.dateRangeFilter=i):(this.dateRangeFilter=null,this.dateRangeCalFilter=l+" - "+_),this.startDateParam=t,this.endDateParam=r,this.filter=Object.assign(Object.assign({},this.filter),r?{checkoutDate:{$gte:t,$lte:r}}:{checkoutDate:{$eq:t}}),this.reloadService.needRefreshOrder$()}getInvoiceStatus(t){this.loading=!0;let r=0,a=0;r=d.i.PENDING;for(let i=0;i<t.orderedItems.length;i++)if(t.orderedItems[i].deliveryStatus>=d.i.SHIPPING)r=d.i.SHIPPING,a+=1;else{if(t.orderedItems[i].deliveryStatus===d.i.PARTIAL_SHIPPING){r=d.i.PARTIAL_SHIPPING;break}if(t.orderedItems[i].deliveryStatus===d.i.CONFIRM||t.orderedItems[i].deliveryStatus===d.i.PENDING){if(0!==a){r=d.i.PARTIAL_SHIPPING;break}r=d.i.PENDING}}return this.loading=!1,r}getInvoiceStatusIcon(t){this.loading=!0;let r=0,a=0;r=d.i.PENDING;for(let i=0;i<t.orderedItems.length;i++)if(t.orderedItems[i].deliveryStatus>=d.i.SHIPPING)r=d.i.SHIPPING,a+=1;else{if(t.orderedItems[i].deliveryStatus===d.i.PARTIAL_SHIPPING){r=d.i.PARTIAL_SHIPPING;break}if(t.orderedItems[i].deliveryStatus===d.i.CONFIRM||t.orderedItems[i].deliveryStatus===d.i.PENDING){if(0!==a){r=d.i.PARTIAL_SHIPPING;break}r=d.i.PENDING}}return this.loading=!1,r===d.i.SHIPPING?"success":r===d.i.PARTIAL_SHIPPING?"processing":"error"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.p),e.Y36(D.F),e.Y36(P.gz),e.Y36(P.F0),e.Y36(q.t2),e.Y36(E.uw),e.Y36(L.dD),e.Y36(J.f),e.Y36(G.V),e.Y36(Q.L),e.Y36($.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-regular-orders"]],viewQuery:function(t,r){if(1&t&&(e.Gf(ne,5),e.Gf(ie,5),e.Gf(se,5),e.Gf(oe,5)),2&t){let a;e.iGM(a=e.CRH())&&(r.exportOrder=a.first),e.iGM(a=e.CRH())&&(r.searchForm=a.first),e.iGM(a=e.CRH())&&(r.searchInput=a.first),e.iGM(a=e.CRH())&&(r.matCheckbox=a.first)}},decls:150,vars:34,consts:[[1,"page-header"],[1,"page-header-left"],[3,"click"],[1,"header-action"],["type","button",3,"click"],["nz-button","","nzType","default","disabled","",3,"click"],[1,"las","la-plus",2,"margin-right","5px"],[1,"table-samary"],["nzSize","small"],[3,"nzTabBarExtraContent"],[3,"nzTitle","nzClick",4,"ngFor","ngForOf"],[1,"table-filter-area"],[1,"search-form"],["searchForm","ngForm"],["name","searchTerm","autocomplete","off","ngModel","","nz-input","","placeholder","Search here",3,"focus"],["searchInput",""],[1,"entry_filter"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],[1,"las","la-calendar"],[1,"entry_date_main"],["dateMenu","nzDropdownMenu"],[1,"date_main"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"custome_dates"],["nzInline","","nzBorderless","true","nzBackdrop","true",3,"ngModel","nzPopupStyle","nzDisabledDate","ngModelChange"],["nz-button","","nzType","primary"],[1,"las","la-angle-down"],["customerAction","nzDropdownMenu"],["nz-menu","",1,"wid200"],["nz-submenu","","nzTitle","Custom Tag"],[1,"wid200"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["deliveryMenu","nzDropdownMenu"],["cod","nzDropdownMenu"],[1,"las","la-sort"],["sortMenu","nzDropdownMenu"],["nz-button","","nz-dropdown","",3,"click"],[1,"las","la-braille"],["nz-button","","nzType","default"],[1,"las","la-lg","la-sliders-h"],[1,"entry_query_filter"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"table-data-area"],["nzSize","small",3,"nzData","nzLoading","nzPageIndex","nzFrontPagination","nzPageSize","nzTotal","nzQueryParams"],["rowSelectionTable",""],[2,"width","50px",3,"nzChecked","nzIndeterminate","nzCheckedChange"],[1,"twd100"],[4,"ngFor","ngForOf"],["extraTemplate",""],["nzPlacement","right","nzTitle","More Filter",3,"nzClosable","nzVisible","nzBodyStyle","nzOnClose"],[4,"nzDrawerContent"],[1,"export-popup-area"],[3,"valueChange"],["export",""],[3,"nzTitle","nzClick"],[1,"las","la-times",3,"click"],[2,"width","50px",3,"nzChecked","nzCheckedChange"],[1,"invoice_status"],[3,"nzStatus"],[3,"routerLink"],["class","las la-lg la-comment","nz-popover","","nzPopoverTitle","Instruction",3,"nzPopoverContent",4,"ngIf"],["nz-popover","","nzPopoverTitle","Instruction",1,"las","la-lg","la-comment",3,"nzPopoverContent"],[2,"text-decoration","none","color","black"],["nz-menu","","nzMode","inline"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"All Orders"),e.qZA(),e._uU(4," \xa0\xa0 "),e.TgZ(5,"span",2),e.NdJ("click",function(){return r.onRefresh()}),e._UZ(6,"i"),e.qZA()(),e.TgZ(7,"div",3)(8,"a",4),e.NdJ("click",function(){return r.exportPopUpShow()}),e._uU(9,"Export"),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){return r.openDialog()}),e._UZ(11,"i",6),e._uU(12," New Order "),e.qZA()()(),e.TgZ(13,"div",7)(14,"nz-card",8)(15,"nz-tabset",9),e.YNc(16,le,1,1,"nz-tab",10),e.qZA(),e.TgZ(17,"div",11)(18,"form",12,13)(20,"input",14,15),e.NdJ("focus",function(i){return r.handleFocus(i)}),e.qZA()(),e.TgZ(22,"ul",16)(23,"li")(24,"button",17),e._uU(25," Set Date "),e._UZ(26,"i",18),e.qZA(),e.TgZ(27,"nz-dropdown-menu",19,20)(29,"div",21)(30,"ul",22)(31,"li",23),e.NdJ("click",function(){return r.todayFilter()}),e._uU(32,"Today"),e.qZA(),e.TgZ(33,"li",23),e.NdJ("click",function(){return r.yesterdayFilter()}),e._uU(34,"Yesterday"),e.qZA(),e.TgZ(35,"li",23),e.NdJ("click",function(){return r.lastWeekFilter()}),e._uU(36,"Last 7 days"),e.qZA(),e.TgZ(37,"li",23),e.NdJ("click",function(){return r.lastThirtyDaysFilter()}),e._uU(38," Last 30 days "),e.qZA(),e.TgZ(39,"li",23),e.NdJ("click",function(){return r.lastThreeMonthFilter()}),e._uU(40," Last 90 days "),e.qZA(),e.TgZ(41,"li",23),e.NdJ("click",function(){return r.lastMonthFilter()}),e._uU(42,"Last month"),e.qZA(),e.TgZ(43,"li",23),e.NdJ("click",function(){return r.lastYearFilter()}),e._uU(44,"Last year"),e.qZA(),e.TgZ(45,"li",23),e.NdJ("click",function(){return r.weekToDateFilter()}),e._uU(46,"Week to date"),e.qZA(),e.TgZ(47,"li",23),e.NdJ("click",function(){return r.monthToDateFilter()}),e._uU(48," Month to date "),e.qZA(),e.TgZ(49,"li",23),e.NdJ("click",function(){return r.yearToDateFilter()}),e._uU(50,"Year to date"),e.qZA()(),e.TgZ(51,"div",24)(52,"nz-card",8)(53,"nz-range-picker",25),e.NdJ("ngModelChange",function(i){return r.onDateChange(i[0],i[1])})("ngModelChange",function(i){return r.filterDate=i}),e.qZA(),e._UZ(54,"br"),e.TgZ(55,"button",26),e._uU(56,"Apply"),e.qZA()()()()()(),e.TgZ(57,"li")(58,"button",17),e._uU(59," Action "),e._UZ(60,"i",27),e.qZA(),e.TgZ(61,"nz-dropdown-menu",null,28)(63,"ul",29)(64,"li",30)(65,"ul",31),e.YNc(66,de,2,1,"li",32),e.qZA()()()()(),e.TgZ(67,"li")(68,"button",17),e._uU(69," Status "),e._UZ(70,"i",27),e.qZA(),e.TgZ(71,"nz-dropdown-menu",null,33)(73,"ul",22),e.YNc(74,ce,2,1,"li",32),e.qZA()()(),e.TgZ(75,"li")(76,"button",17),e._uU(77," Payment Type "),e._UZ(78,"i",27),e.qZA(),e.TgZ(79,"nz-dropdown-menu",null,34)(81,"ul",22)(82,"li",23),e.NdJ("click",function(){return r.filterByAdvanceType("COD")}),e._uU(83,"COD"),e.qZA(),e.TgZ(84,"li",23),e.NdJ("click",function(){return r.filterByAdvanceType("Advance")}),e._uU(85," ADVANCE "),e.qZA()()()(),e.TgZ(86,"li")(87,"button",17),e._uU(88," Sort "),e._UZ(89,"i",35),e.qZA(),e.TgZ(90,"nz-dropdown-menu",null,36)(92,"ul",22)(93,"li",23),e.NdJ("click",function(){return r.sortData({orderId:-1},1,"Order Number(High to low)")}),e._uU(94," Order Number(High to low) "),e.qZA(),e.TgZ(95,"li",23),e.NdJ("click",function(){return r.sortData({orderId:1},2,"Order Number(Low to High)")}),e._uU(96," Order Number(Low to High) "),e.qZA(),e.TgZ(97,"li",23),e.NdJ("click",function(){return r.sortData({createdAt:1},3,"Created (oldest first)")}),e._uU(98," Created (oldest first) "),e.qZA(),e.TgZ(99,"li",23),e.NdJ("click",function(){return r.sortData({createdAt:-1},4,"Created (newest first)")}),e._uU(100," Created (newest first) "),e.qZA(),e.TgZ(101,"li",23),e.NdJ("click",function(){return r.sortData({fullName:-1},5,"Customer Name (A-Z)")}),e._uU(102," Customer Name (A-Z) "),e.qZA(),e.TgZ(103,"li",23),e.NdJ("click",function(){return r.sortData({fullName:1},6,"Customer Name (Z-A)")}),e._uU(104," Customer Name (Z-A) "),e.qZA(),e.TgZ(105,"li",23),e.NdJ("click",function(){return r.sortData({totalAmount:-1},5,"Amount(High to low)")}),e._uU(106," Amount(High to low) "),e.qZA(),e.TgZ(107,"li",23),e.NdJ("click",function(){return r.sortData({totalAmount:1},6,"Amount (Low to High)")}),e._uU(108," Amount (Low to High) "),e.qZA()()()(),e.TgZ(109,"li")(110,"button",37),e.NdJ("click",function(){return r.openMore()}),e._uU(111," More "),e._UZ(112,"i",38),e.qZA()()(),e.TgZ(113,"button",39),e._UZ(114,"i",40),e.qZA()(),e.TgZ(115,"div",41)(116,"ul"),e.YNc(117,ue,3,1,"li",42),e.YNc(118,he,3,1,"li",42),e.YNc(119,ge,3,1,"li",42),e.YNc(120,me,3,1,"li",42),e.YNc(121,pe,3,1,"li",42),e.qZA(),e.YNc(122,_e,2,0,"span",43),e.qZA(),e.TgZ(123,"div",44)(124,"nz-table",45,46),e.NdJ("nzQueryParams",function(i){return r.onPageChanged(i)}),e.TgZ(126,"thead")(127,"tr")(128,"th",47),e.NdJ("nzCheckedChange",function(i){return r.checked=i})("nzCheckedChange",function(i){return r.onAllChecked(i)}),e.qZA(),e.TgZ(129,"th"),e._uU(130,"Order ID & Date"),e.qZA(),e.TgZ(131,"th",48),e._uU(132,"Invoice Status"),e.qZA(),e.TgZ(133,"th",48),e._uU(134,"Customer"),e.qZA(),e.TgZ(135,"th",48),e._uU(136,"Total Amount"),e.qZA(),e.TgZ(137,"th",48),e._uU(138,"Advance Payment"),e.qZA(),e.TgZ(139,"th",48),e._uU(140,"Notes"),e.qZA()()(),e.TgZ(141,"tbody"),e.YNc(142,Oe,24,18,"tr",49),e.qZA()()()()(),e.YNc(143,Te,2,1,"ng-template",null,50,e.W1O),e.TgZ(145,"nz-drawer",51),e.NdJ("nzOnClose",function(){return r.closeMore()}),e.YNc(146,ve,5,1,"ng-container",52),e.qZA(),e.TgZ(147,"div",53)(148,"app-export-popup",54,55),e.NdJ("valueChange",function(i){return r.exportToExcel(i)}),e.qZA()()),2&t){const a=e.MAs(28),i=e.MAs(62),l=e.MAs(72),_=e.MAs(80),T=e.MAs(91),y=e.MAs(125),v=e.MAs(144);e.xp6(6),e.Tol(r.spin?"fa fa-refresh fa-spin":"fa fa-refresh"),e.xp6(9),e.Q6J("nzTabBarExtraContent",v),e.xp6(1),e.Q6J("ngForOf",r.tabs),e.xp6(8),e.Q6J("nzDropdownMenu",a),e.xp6(29),e.Q6J("ngModel",r.filterDate)("nzPopupStyle",e.DdM(32,be))("nzDisabledDate",r.disabledDate),e.xp6(5),e.Q6J("nzDropdownMenu",i),e.xp6(8),e.Q6J("ngForOf",r.customTags),e.xp6(2),e.Q6J("nzDropdownMenu",l),e.xp6(6),e.Q6J("ngForOf",r.productOrderStatus),e.xp6(2),e.Q6J("nzDropdownMenu",_),e.xp6(11),e.Q6J("nzDropdownMenu",T),e.xp6(30),e.Q6J("ngIf",r.dateRangeFilter||r.dateRangeCalFilter),e.xp6(1),e.Q6J("ngIf",r.customTagFilter),e.xp6(1),e.Q6J("ngIf",r.statusFilter),e.xp6(1),e.Q6J("ngIf",r.paymentTypeFilter),e.xp6(1),e.Q6J("ngIf",r.sortFilter),e.xp6(1),e.Q6J("ngIf",r.dateRangeFilter||r.dateRangeCalFilter||r.customTagFilter||r.statusFilter||r.sortFilter||r.paymentTypeFilter||r.clearAllFilter),e.xp6(2),e.Q6J("nzData",r.orders)("nzLoading",r.loading)("nzPageIndex",r.currentPage)("nzFrontPagination",!1)("nzPageSize",r.ordersPerPage)("nzTotal",r.totalNumbers),e.xp6(4),e.Q6J("nzChecked",r.checked)("nzIndeterminate",r.indeterminate),e.xp6(14),e.Q6J("ngForOf",y.data),e.xp6(3),e.Q6J("nzClosable",!1)("nzVisible",r.moreAction)("nzBodyStyle",e.DdM(33,Ae))}},dependencies:[f.sg,f.O5,P.yS,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,g.N8,g.Uo,g._C,g.h7,g.Om,g.p0,g.$Z,g.g6,V.Zp,Y.ix,j.w,W.dQ,M.xH,M.xw,C.wO,C.r9,C.rY,O.cm,O.RR,O.wA,S.uw,S.wS,B.x7,R.Vz,R.SQ,K.bd,X.lU,re,f.uU,ae.M],styles:[".date_main[_ngcontent-%COMP%]{min-width:500px;display:flex}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #ddd}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:100%}.date_main[_ngcontent-%COMP%]   .custome_dates[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}a[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{color:#1e90ff}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:30px 0 15px}.page-header[_ngcontent-%COMP%]   .page-header-left[_ngcontent-%COMP%]{display:flex}.page-header[_ngcontent-%COMP%]   .page-header-left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto;cursor:pointer}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]{display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:15px}.page-header[_ngcontent-%COMP%]   .header-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 10px;color:#585858}.table-samary[_ngcontent-%COMP%]{margin-bottom:30px}.table-filter-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:5px}.table-filter-area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.table-filter-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;align-items:center}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;list-style:none}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px;font-size:18px}.invoice_status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10px}.action-menu[_ngcontent-%COMP%]{position:relative;min-width:300px}.action-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:0}li.action-menu[_ngcontent-%COMP%]:hover   ul[_ngcontent-%COMP%]{display:block}.entry_query_filter[_ngcontent-%COMP%]{margin-bottom:15px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;float:left;margin-right:5px;border:1px solid #ddd;padding:2px 10px;font-size:12px;border-radius:25px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.entry_query_filter[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline!important;padding:2px 10px;display:inline-block;margin-left:5px;border-radius:3px;transition:all .3s ease-in-out;color:#0c8ff9;cursor:pointer;font-size:12px}.entry_query_filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:none!important;background:#6bbde8;color:#fff}.wid200[_ngcontent-%COMP%]{width:200px}@media (max-width: 1440px){.twd100[_ngcontent-%COMP%]{width:150px}}@media (max-width: 768px){.twd100[_ngcontent-%COMP%]{width:100px}.table-filter-area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.table-filter-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.table-filter-area[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px;font-size:14px}.table-filter-area[_ngcontent-%COMP%]   .date_pick[_ngcontent-%COMP%]{margin:5px 0}}"]}),n})();const xe=[{path:"",component:N},{path:":id",component:N}];let De=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[P.Bz.forChild(xe),P.Bz]}),n})();var Me=s(24586),Se=s(19966),Re=s(72408);let Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,De,A.q,g.HQ,Me.D,Se.JX,A.q,u.u5,Re.P]}),n})()}}]);